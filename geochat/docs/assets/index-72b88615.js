(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function px(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M0={exports:{}},Wc={},b0={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xa=Symbol.for("react.element"),mx=Symbol.for("react.portal"),gx=Symbol.for("react.fragment"),_x=Symbol.for("react.strict_mode"),vx=Symbol.for("react.profiler"),yx=Symbol.for("react.provider"),wx=Symbol.for("react.context"),Ex=Symbol.for("react.forward_ref"),Tx=Symbol.for("react.suspense"),Sx=Symbol.for("react.memo"),Ix=Symbol.for("react.lazy"),zv=Symbol.iterator;function kx(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var U0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$0=Object.assign,z0={};function to(t,e,n){this.props=t,this.context=e,this.refs=z0,this.updater=n||U0}to.prototype.isReactComponent={};to.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};to.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F0(){}F0.prototype=to.prototype;function cm(t,e,n){this.props=t,this.context=e,this.refs=z0,this.updater=n||U0}var hm=cm.prototype=new F0;hm.constructor=cm;$0(hm,to.prototype);hm.isPureReactComponent=!0;var Fv=Array.isArray,B0=Object.prototype.hasOwnProperty,dm={current:null},V0={key:!0,ref:!0,__self:!0,__source:!0};function j0(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)B0.call(e,i)&&!V0.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return{$$typeof:Xa,type:t,key:o,ref:a,props:r,_owner:dm.current}}function Cx(t,e){return{$$typeof:Xa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xa}function xx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bv=/\/+/g;function Ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xx(""+t.key):e.toString(36)}function Iu(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Xa:case mx:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Ld(a,0):i,Fv(r)?(n="",t!=null&&(n=t.replace(Bv,"$&/")+"/"),Iu(r,e,n,"",function(f){return f})):r!=null&&(fm(r)&&(r=Cx(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Bv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Fv(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+Ld(o,c);a+=Iu(o,e,n,h,r)}else if(h=kx(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+Ld(o,c++),a+=Iu(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Gl(t,e,n){if(t==null)return t;var i=[],r=0;return Iu(t,i,"","",function(o){return e.call(n,o,r++)}),i}function Px(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},ku={transition:null},Lx={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:ku,ReactCurrentOwner:dm};ue.Children={map:Gl,forEach:function(t,e,n){Gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gl(t,function(){e++}),e},toArray:function(t){return Gl(t,function(e){return e})||[]},only:function(t){if(!fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=to;ue.Fragment=gx;ue.Profiler=vx;ue.PureComponent=cm;ue.StrictMode=_x;ue.Suspense=Tx;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=$0({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=dm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)B0.call(e,h)&&!V0.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:Xa,type:t.type,key:r,ref:o,props:i,_owner:a}};ue.createContext=function(t){return t={$$typeof:wx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yx,_context:t},t.Consumer=t};ue.createElement=j0;ue.createFactory=function(t){var e=j0.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:Ex,render:t}};ue.isValidElement=fm;ue.lazy=function(t){return{$$typeof:Ix,_payload:{_status:-1,_result:t},_init:Px}};ue.memo=function(t,e){return{$$typeof:Sx,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=ku.transition;ku.transition={};try{t()}finally{ku.transition=e}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ue.useContext=function(t){return Mt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ue.useId=function(){return Mt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ue.useRef=function(t){return Mt.current.useRef(t)};ue.useState=function(t){return Mt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Mt.current.useTransition()};ue.version="18.2.0";b0.exports=ue;var A=b0.exports;const Hu=px(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx=A,Ax=Symbol.for("react.element"),Nx=Symbol.for("react.fragment"),Ox=Object.prototype.hasOwnProperty,Dx=Rx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mx={key:!0,ref:!0,__self:!0,__source:!0};function H0(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Ox.call(e,i)&&!Mx.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Ax,type:t,key:o,ref:a,props:r,_owner:Dx.current}}Wc.Fragment=Nx;Wc.jsx=H0;Wc.jsxs=H0;M0.exports=Wc;var W0=M0.exports;const W=W0.jsx,He=W0.jsxs;var Pf={},q0={exports:{}},Jt={},Z0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,te){var $=N.length;N.push(te);e:for(;0<$;){var J=$-1>>>1,pe=N[J];if(0<r(pe,te))N[J]=te,N[$]=pe,$=J;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var te=N[0],$=N.pop();if($!==te){N[0]=$;e:for(var J=0,pe=N.length,Je=pe>>>1;J<Je;){var Se=2*(J+1)-1,ge=N[Se],ce=Se+1,Ut=N[ce];if(0>r(ge,$))ce<pe&&0>r(Ut,ge)?(N[J]=Ut,N[ce]=$,J=ce):(N[J]=ge,N[Se]=$,J=Se);else if(ce<pe&&0>r(Ut,$))N[J]=Ut,N[ce]=$,J=ce;else break e}}return te}function r(N,te){var $=N.sortIndex-te.sortIndex;return $!==0?$:N.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],f=[],m=1,_=null,v=3,S=!1,k=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(N){for(var te=n(f);te!==null;){if(te.callback===null)i(f);else if(te.startTime<=N)i(f),te.sortIndex=te.expirationTime,e(h,te);else break;te=n(f)}}function P(N){if(I=!1,T(N),!k)if(n(h)!==null)k=!0,lt(U);else{var te=n(f);te!==null&&qn(P,te.startTime-N)}}function U(N,te){k=!1,I&&(I=!1,E(j),j=-1),S=!0;var $=v;try{for(T(te),_=n(h);_!==null&&(!(_.expirationTime>te)||N&&!Te());){var J=_.callback;if(typeof J=="function"){_.callback=null,v=_.priorityLevel;var pe=J(_.expirationTime<=te);te=t.unstable_now(),typeof pe=="function"?_.callback=pe:_===n(h)&&i(h),T(te)}else i(h);_=n(h)}if(_!==null)var Je=!0;else{var Se=n(f);Se!==null&&qn(P,Se.startTime-te),Je=!1}return Je}finally{_=null,v=$,S=!1}}var z=!1,V=null,j=-1,fe=5,se=-1;function Te(){return!(t.unstable_now()-se<fe)}function nt(){if(V!==null){var N=t.unstable_now();se=N;var te=!0;try{te=V(!0,N)}finally{te?lr():(z=!1,V=null)}}else z=!1}var lr;if(typeof y=="function")lr=function(){y(nt)};else if(typeof MessageChannel<"u"){var tn=new MessageChannel,Gh=tn.port2;tn.port1.onmessage=nt,lr=function(){Gh.postMessage(null)}}else lr=function(){R(nt,0)};function lt(N){V=N,z||(z=!0,lr())}function qn(N,te){j=R(function(){N(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){k||S||(k=!0,lt(U))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(N){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var $=v;v=te;try{return N()}finally{v=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,te){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=v;v=N;try{return te()}finally{v=$}},t.unstable_scheduleCallback=function(N,te,$){var J=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?J+$:J):$=J,N){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=$+pe,N={id:m++,callback:te,priorityLevel:N,startTime:$,expirationTime:pe,sortIndex:-1},$>J?(N.sortIndex=$,e(f,N),n(h)===null&&N===n(f)&&(I?(E(j),j=-1):I=!0,qn(P,$-J))):(N.sortIndex=pe,e(h,N),k||S||(k=!0,lt(U))),N},t.unstable_shouldYield=Te,t.unstable_wrapCallback=function(N){var te=v;return function(){var $=v;v=te;try{return N.apply(this,arguments)}finally{v=$}}}})(G0);Z0.exports=G0;var bx=Z0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=A,Xt=bx;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q0=new Set,va={};function jr(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(va[t]=e,t=0;t<e.length;t++)Q0.add(e[t])}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=Object.prototype.hasOwnProperty,Ux=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},jv={};function $x(t){return Lf.call(jv,t)?!0:Lf.call(Vv,t)?!1:Ux.test(t)?jv[t]=!0:(Vv[t]=!0,!1)}function zx(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fx(t,e,n,i){if(e===null||typeof e>"u"||zx(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var pm=/[\-:]([a-z])/g;function mm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pm,mm);gt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pm,mm);gt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pm,mm);gt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function gm(t,e,n,i){var r=gt.hasOwnProperty(e)?gt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fx(e,n,r,i)&&(n=null),i||r===null?$x(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var _i=K0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),hs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),_m=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),X0=Symbol.for("react.provider"),Y0=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),Af=Symbol.for("react.suspense"),Nf=Symbol.for("react.suspense_list"),ym=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),J0=Symbol.for("react.offscreen"),Hv=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=Hv&&t[Hv]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Rd;function Ho(t){if(Rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rd=e&&e[1]||""}return`
`+Rd+t}var Ad=!1;function Nd(t,e){if(!t||Ad)return"";Ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,c=o.length-1;1<=a&&0<=c&&r[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(r[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||r[a]!==o[c]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{Ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function Bx(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=Nd(t.type,!1),t;case 11:return t=Nd(t.type.render,!1),t;case 1:return t=Nd(t.type,!0),t;default:return""}}function Of(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case hs:return"Portal";case Rf:return"Profiler";case _m:return"StrictMode";case Af:return"Suspense";case Nf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Y0:return(t.displayName||"Context")+".Consumer";case X0:return(t._context.displayName||"Context")+".Provider";case vm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ym:return e=t.displayName||null,e!==null?e:Of(t.type)||"Memo";case Ii:e=t._payload,t=t._init;try{return Of(t(e))}catch{}}return null}function Vx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Of(e);case 8:return e===_m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function e1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jx(t){var e=e1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ql(t){t._valueTracker||(t._valueTracker=jx(t))}function t1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=e1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Df(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function n1(t,e){e=e.checked,e!=null&&gm(t,"checked",e,!1)}function Mf(t,e){n1(t,e);var n=Ki(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bf(t,e.type,n):e.hasOwnProperty("defaultValue")&&bf(t,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bf(t,e,n){(e!=="number"||Wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Cs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Uf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Wo(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ki(n)}}function i1(t,e){var n=Ki(e.value),i=Ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Gv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xl,s1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xl=Xl||document.createElement("div"),Xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hx=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){Hx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function o1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function a1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=o1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Wx=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zf(t,e){if(e){if(Wx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bf=null;function wm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vf=null,xs=null,Ps=null;function Kv(t){if(t=el(t)){if(typeof Vf!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Qc(e),Vf(t.stateNode,t.type,e))}}function l1(t){xs?Ps?Ps.push(t):Ps=[t]:xs=t}function u1(){if(xs){var t=xs,e=Ps;if(Ps=xs=null,Kv(t),e)for(t=0;t<e.length;t++)Kv(e[t])}}function c1(t,e){return t(e)}function h1(){}var Od=!1;function d1(t,e,n){if(Od)return t(e,n);Od=!0;try{return c1(t,e,n)}finally{Od=!1,(xs!==null||Ps!==null)&&(h1(),u1())}}function wa(t,e){var n=t.stateNode;if(n===null)return null;var i=Qc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var jf=!1;if(li)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){jf=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{jf=!1}function qx(t,e,n,i,r,o,a,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var ia=!1,qu=null,Zu=!1,Hf=null,Zx={onError:function(t){ia=!0,qu=t}};function Gx(t,e,n,i,r,o,a,c,h){ia=!1,qu=null,qx.apply(Zx,arguments)}function Kx(t,e,n,i,r,o,a,c,h){if(Gx.apply(this,arguments),ia){if(ia){var f=qu;ia=!1,qu=null}else throw Error(M(198));Zu||(Zu=!0,Hf=f)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function f1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qv(t){if(Hr(t)!==t)throw Error(M(188))}function Qx(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Qv(r),t;if(o===i)return Qv(r),e;o=o.sibling}throw Error(M(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=o;break}if(c===i){a=!0,i=r,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,i=r;break}if(c===i){a=!0,i=o,n=r;break}c=c.sibling}if(!a)throw Error(M(189))}}if(n.alternate!==i)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function p1(t){return t=Qx(t),t!==null?m1(t):null}function m1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=m1(t);if(e!==null)return e;t=t.sibling}return null}var g1=Xt.unstable_scheduleCallback,Xv=Xt.unstable_cancelCallback,Xx=Xt.unstable_shouldYield,Yx=Xt.unstable_requestPaint,je=Xt.unstable_now,Jx=Xt.unstable_getCurrentPriorityLevel,Em=Xt.unstable_ImmediatePriority,_1=Xt.unstable_UserBlockingPriority,Gu=Xt.unstable_NormalPriority,eP=Xt.unstable_LowPriority,v1=Xt.unstable_IdlePriority,qc=null,Un=null;function tP(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(qc,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:rP,nP=Math.log,iP=Math.LN2;function rP(t){return t>>>=0,t===0?32:31-(nP(t)/iP|0)|0}var Yl=64,Jl=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~r;c!==0?i=qo(c):(o&=a,o!==0&&(i=qo(o)))}else a=n&~r,a!==0?i=qo(a):o!==0&&(i=qo(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-En(e),r=1<<n,i|=t[n],e&=~r;return i}function sP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-En(o),c=1<<a,h=r[a];h===-1?(!(c&n)||c&i)&&(r[a]=sP(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function y1(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function aP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-En(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Tm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-En(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var we=0;function w1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var E1,Sm,T1,S1,I1,qf=!1,eu=[],Ui=null,$i=null,zi=null,Ea=new Map,Ta=new Map,Ci=[],lP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yv(t,e){switch(t){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ta.delete(e.pointerId)}}function Mo(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=el(e),e!==null&&Sm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function uP(t,e,n,i,r){switch(e){case"focusin":return Ui=Mo(Ui,t,e,n,i,r),!0;case"dragenter":return $i=Mo($i,t,e,n,i,r),!0;case"mouseover":return zi=Mo(zi,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ea.set(o,Mo(Ea.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ta.set(o,Mo(Ta.get(o)||null,t,e,n,i,r)),!0}return!1}function k1(t){var e=vr(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=f1(n),e!==null){t.blockedOn=e,I1(t.priority,function(){T1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Bf=i,n.target.dispatchEvent(i),Bf=null}else return e=el(n),e!==null&&Sm(e),t.blockedOn=n,!1;e.shift()}return!0}function Jv(t,e,n){Cu(t)&&n.delete(e)}function cP(){qf=!1,Ui!==null&&Cu(Ui)&&(Ui=null),$i!==null&&Cu($i)&&($i=null),zi!==null&&Cu(zi)&&(zi=null),Ea.forEach(Jv),Ta.forEach(Jv)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,qf||(qf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,cP)))}function Sa(t){function e(r){return bo(r,t)}if(0<eu.length){bo(eu[0],t);for(var n=1;n<eu.length;n++){var i=eu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ui!==null&&bo(Ui,t),$i!==null&&bo($i,t),zi!==null&&bo(zi,t),Ea.forEach(e),Ta.forEach(e),n=0;n<Ci.length;n++)i=Ci[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)k1(n),n.blockedOn===null&&Ci.shift()}var Ls=_i.ReactCurrentBatchConfig,Qu=!0;function hP(t,e,n,i){var r=we,o=Ls.transition;Ls.transition=null;try{we=1,Im(t,e,n,i)}finally{we=r,Ls.transition=o}}function dP(t,e,n,i){var r=we,o=Ls.transition;Ls.transition=null;try{we=4,Im(t,e,n,i)}finally{we=r,Ls.transition=o}}function Im(t,e,n,i){if(Qu){var r=Zf(t,e,n,i);if(r===null)Hd(t,e,i,Xu,n),Yv(t,i);else if(uP(r,t,e,n,i))i.stopPropagation();else if(Yv(t,i),e&4&&-1<lP.indexOf(t)){for(;r!==null;){var o=el(r);if(o!==null&&E1(o),o=Zf(t,e,n,i),o===null&&Hd(t,e,i,Xu,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Hd(t,e,i,null,n)}}var Xu=null;function Zf(t,e,n,i){if(Xu=null,t=wm(i),t=vr(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=f1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xu=t,null}function C1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jx()){case Em:return 1;case _1:return 4;case Gu:case eP:return 16;case v1:return 536870912;default:return 16}default:return 16}}var Oi=null,km=null,xu=null;function x1(){if(xu)return xu;var t,e=km,n=e.length,i,r="value"in Oi?Oi.value:Oi.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return xu=r.slice(t,1<i?1-i:void 0)}function Pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tu(){return!0}function ey(){return!1}function en(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tu:ey,this.isPropagationStopped=ey,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cm=en(no),Ja=Ue({},no,{view:0,detail:0}),fP=en(Ja),Md,bd,Uo,Zc=Ue({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uo&&(Uo&&t.type==="mousemove"?(Md=t.screenX-Uo.screenX,bd=t.screenY-Uo.screenY):bd=Md=0,Uo=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:bd}}),ty=en(Zc),pP=Ue({},Zc,{dataTransfer:0}),mP=en(pP),gP=Ue({},Ja,{relatedTarget:0}),Ud=en(gP),_P=Ue({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),vP=en(_P),yP=Ue({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wP=en(yP),EP=Ue({},no,{data:0}),ny=en(EP),TP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=IP[t])?!!e[t]:!1}function xm(){return kP}var CP=Ue({},Ja,{key:function(t){if(t.key){var e=TP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xm,charCode:function(t){return t.type==="keypress"?Pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xP=en(CP),PP=Ue({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=en(PP),LP=Ue({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xm}),RP=en(LP),AP=Ue({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),NP=en(AP),OP=Ue({},Zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DP=en(OP),MP=[9,13,27,32],Pm=li&&"CompositionEvent"in window,ra=null;li&&"documentMode"in document&&(ra=document.documentMode);var bP=li&&"TextEvent"in window&&!ra,P1=li&&(!Pm||ra&&8<ra&&11>=ra),ry=String.fromCharCode(32),sy=!1;function L1(t,e){switch(t){case"keyup":return MP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fs=!1;function UP(t,e){switch(t){case"compositionend":return R1(e);case"keypress":return e.which!==32?null:(sy=!0,ry);case"textInput":return t=e.data,t===ry&&sy?null:t;default:return null}}function $P(t,e){if(fs)return t==="compositionend"||!Pm&&L1(t,e)?(t=x1(),xu=km=Oi=null,fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P1&&e.locale!=="ko"?null:e.data;default:return null}}var zP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zP[t.type]:e==="textarea"}function A1(t,e,n,i){l1(i),e=Yu(e,"onChange"),0<e.length&&(n=new Cm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var sa=null,Ia=null;function FP(t){V1(t,0)}function Gc(t){var e=gs(t);if(t1(e))return t}function BP(t,e){if(t==="change")return e}var N1=!1;if(li){var $d;if(li){var zd="oninput"in document;if(!zd){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),zd=typeof ay.oninput=="function"}$d=zd}else $d=!1;N1=$d&&(!document.documentMode||9<document.documentMode)}function ly(){sa&&(sa.detachEvent("onpropertychange",O1),Ia=sa=null)}function O1(t){if(t.propertyName==="value"&&Gc(Ia)){var e=[];A1(e,Ia,t,wm(t)),d1(FP,e)}}function VP(t,e,n){t==="focusin"?(ly(),sa=e,Ia=n,sa.attachEvent("onpropertychange",O1)):t==="focusout"&&ly()}function jP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(Ia)}function HP(t,e){if(t==="click")return Gc(e)}function WP(t,e){if(t==="input"||t==="change")return Gc(e)}function qP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:qP;function ka(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Lf.call(e,r)||!Sn(t[r],e[r]))return!1}return!0}function uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cy(t,e){var n=uy(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uy(n)}}function D1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M1(){for(var t=window,e=Wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZP(t){var e=M1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D1(n.ownerDocument.documentElement,n)){if(i!==null&&Lm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=cy(n,o);var a=cy(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GP=li&&"documentMode"in document&&11>=document.documentMode,ps=null,Gf=null,oa=null,Kf=!1;function hy(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||ps==null||ps!==Wu(i)||(i=ps,"selectionStart"in i&&Lm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),oa&&ka(oa,i)||(oa=i,i=Yu(Gf,"onSelect"),0<i.length&&(e=new Cm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ps)))}function nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ms={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},Fd={},b1={};li&&(b1=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Kc(t){if(Fd[t])return Fd[t];if(!ms[t])return t;var e=ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b1)return Fd[t]=e[n];return t}var U1=Kc("animationend"),$1=Kc("animationiteration"),z1=Kc("animationstart"),F1=Kc("transitionend"),B1=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(t,e){B1.set(t,e),jr(e,[t])}for(var Bd=0;Bd<dy.length;Bd++){var Vd=dy[Bd],KP=Vd.toLowerCase(),QP=Vd[0].toUpperCase()+Vd.slice(1);tr(KP,"on"+QP)}tr(U1,"onAnimationEnd");tr($1,"onAnimationIteration");tr(z1,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(F1,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function fy(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Kx(i,e,void 0,t),t.currentTarget=null}function V1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var c=i[a],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&r.isPropagationStopped())break e;fy(r,c,f),o=h}else for(a=0;a<i.length;a++){if(c=i[a],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&r.isPropagationStopped())break e;fy(r,c,f),o=h}}}if(Zu)throw t=Hf,Zu=!1,Hf=null,t}function Ce(t,e){var n=e[ep];n===void 0&&(n=e[ep]=new Set);var i=t+"__bubble";n.has(i)||(j1(e,t,2,!1),n.add(i))}function jd(t,e,n){var i=0;e&&(i|=4),j1(n,t,i,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Ca(t){if(!t[iu]){t[iu]=!0,Q0.forEach(function(n){n!=="selectionchange"&&(XP.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,jd("selectionchange",!1,e))}}function j1(t,e,n,i){switch(C1(e)){case 1:var r=hP;break;case 4:r=dP;break;default:r=Im}n=r.bind(null,e,n,t),r=void 0,!jf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Hd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var c=i.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;c!==null;){if(a=vr(c),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}c=c.parentNode}}i=i.return}d1(function(){var f=o,m=wm(n),_=[];e:{var v=B1.get(t);if(v!==void 0){var S=Cm,k=t;switch(t){case"keypress":if(Pu(n)===0)break e;case"keydown":case"keyup":S=xP;break;case"focusin":k="focus",S=Ud;break;case"focusout":k="blur",S=Ud;break;case"beforeblur":case"afterblur":S=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=mP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=RP;break;case U1:case $1:case z1:S=vP;break;case F1:S=NP;break;case"scroll":S=fP;break;case"wheel":S=DP;break;case"copy":case"cut":case"paste":S=wP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=iy}var I=(e&4)!==0,R=!I&&t==="scroll",E=I?v!==null?v+"Capture":null:v;I=[];for(var y=f,T;y!==null;){T=y;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,E!==null&&(P=wa(y,E),P!=null&&I.push(xa(y,P,T)))),R)break;y=y.return}0<I.length&&(v=new S(v,k,null,n,m),_.push({event:v,listeners:I}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==Bf&&(k=n.relatedTarget||n.fromElement)&&(vr(k)||k[ui]))break e;if((S||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=f,k=k?vr(k):null,k!==null&&(R=Hr(k),k!==R||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=f),S!==k)){if(I=ty,P="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(I=iy,P="onPointerLeave",E="onPointerEnter",y="pointer"),R=S==null?v:gs(S),T=k==null?v:gs(k),v=new I(P,y+"leave",S,n,m),v.target=R,v.relatedTarget=T,P=null,vr(m)===f&&(I=new I(E,y+"enter",k,n,m),I.target=T,I.relatedTarget=R,P=I),R=P,S&&k)t:{for(I=S,E=k,y=0,T=I;T;T=ss(T))y++;for(T=0,P=E;P;P=ss(P))T++;for(;0<y-T;)I=ss(I),y--;for(;0<T-y;)E=ss(E),T--;for(;y--;){if(I===E||E!==null&&I===E.alternate)break t;I=ss(I),E=ss(E)}I=null}else I=null;S!==null&&py(_,v,S,I,!1),k!==null&&R!==null&&py(_,R,k,I,!0)}}e:{if(v=f?gs(f):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var U=BP;else if(oy(v))if(N1)U=WP;else{U=jP;var z=VP}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(U=HP);if(U&&(U=U(t,f))){A1(_,U,n,m);break e}z&&z(t,v,f),t==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&bf(v,"number",v.value)}switch(z=f?gs(f):window,t){case"focusin":(oy(z)||z.contentEditable==="true")&&(ps=z,Gf=f,oa=null);break;case"focusout":oa=Gf=ps=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,hy(_,n,m);break;case"selectionchange":if(GP)break;case"keydown":case"keyup":hy(_,n,m)}var V;if(Pm)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else fs?L1(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(P1&&n.locale!=="ko"&&(fs||j!=="onCompositionStart"?j==="onCompositionEnd"&&fs&&(V=x1()):(Oi=m,km="value"in Oi?Oi.value:Oi.textContent,fs=!0)),z=Yu(f,j),0<z.length&&(j=new ny(j,t,null,n,m),_.push({event:j,listeners:z}),V?j.data=V:(V=R1(n),V!==null&&(j.data=V)))),(V=bP?UP(t,n):$P(t,n))&&(f=Yu(f,"onBeforeInput"),0<f.length&&(m=new ny("onBeforeInput","beforeinput",null,n,m),_.push({event:m,listeners:f}),m.data=V))}V1(_,e)})}function xa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=wa(t,n),o!=null&&i.unshift(xa(t,o,r)),o=wa(t,e),o!=null&&i.push(xa(t,o,r))),t=t.return}return i}function ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function py(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var c=n,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,r?(h=wa(n,o),h!=null&&a.unshift(xa(n,h,c))):r||(h=wa(n,o),h!=null&&a.push(xa(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var YP=/\r\n?/g,JP=/\u0000|\uFFFD/g;function my(t){return(typeof t=="string"?t:""+t).replace(YP,`
`).replace(JP,"")}function ru(t,e,n){if(e=my(e),my(t)!==e&&n)throw Error(M(425))}function Ju(){}var Qf=null,Xf=null;function Yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,eL=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,tL=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(t){return gy.resolve(null).then(t).catch(nL)}:Jf;function nL(t){setTimeout(function(){throw t})}function Wd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Sa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Sa(e)}function Fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),On="__reactFiber$"+io,Pa="__reactProps$"+io,ui="__reactContainer$"+io,ep="__reactEvents$"+io,iL="__reactListeners$"+io,rL="__reactHandles$"+io;function vr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ui]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_y(t);t!==null;){if(n=t[On])return n;t=_y(t)}return e}t=n,n=t.parentNode}return null}function el(t){return t=t[On]||t[ui],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Qc(t){return t[Pa]||null}var tp=[],_s=-1;function nr(t){return{current:t}}function Pe(t){0>_s||(t.current=tp[_s],tp[_s]=null,_s--)}function ke(t,e){_s++,tp[_s]=t.current,t.current=e}var Qi={},Pt=nr(Qi),Vt=nr(!1),Lr=Qi;function zs(t,e){var n=t.type.contextTypes;if(!n)return Qi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function jt(t){return t=t.childContextTypes,t!=null}function ec(){Pe(Vt),Pe(Pt)}function vy(t,e,n){if(Pt.current!==Qi)throw Error(M(168));ke(Pt,e),ke(Vt,n)}function H1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(M(108,Vx(t)||"Unknown",r));return Ue({},n,i)}function tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qi,Lr=Pt.current,ke(Pt,t),ke(Vt,Vt.current),!0}function yy(t,e,n){var i=t.stateNode;if(!i)throw Error(M(169));n?(t=H1(t,e,Lr),i.__reactInternalMemoizedMergedChildContext=t,Pe(Vt),Pe(Pt),ke(Pt,t)):Pe(Vt),ke(Vt,n)}var Yn=null,Xc=!1,qd=!1;function W1(t){Yn===null?Yn=[t]:Yn.push(t)}function sL(t){Xc=!0,W1(t)}function ir(){if(!qd&&Yn!==null){qd=!0;var t=0,e=we;try{var n=Yn;for(we=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Yn=null,Xc=!1}catch(r){throw Yn!==null&&(Yn=Yn.slice(t+1)),g1(Em,ir),r}finally{we=e,qd=!1}}return null}var vs=[],ys=0,nc=null,ic=0,on=[],an=0,Rr=null,Jn=1,ei="";function mr(t,e){vs[ys++]=ic,vs[ys++]=nc,nc=t,ic=e}function q1(t,e,n){on[an++]=Jn,on[an++]=ei,on[an++]=Rr,Rr=t;var i=Jn;t=ei;var r=32-En(i)-1;i&=~(1<<r),n+=1;var o=32-En(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Jn=1<<32-En(e)+r|n<<r|i,ei=o+t}else Jn=1<<o|n<<r|i,ei=t}function Rm(t){t.return!==null&&(mr(t,1),q1(t,1,0))}function Am(t){for(;t===nc;)nc=vs[--ys],vs[ys]=null,ic=vs[--ys],vs[ys]=null;for(;t===Rr;)Rr=on[--an],on[an]=null,ei=on[--an],on[an]=null,Jn=on[--an],on[an]=null}var Qt=null,Zt=null,Ae=!1,wn=null;function Z1(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Zt=Fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rr!==null?{id:Jn,overflow:ei}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Zt=null,!0):!1;default:return!1}}function np(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ip(t){if(Ae){var e=Zt;if(e){var n=e;if(!wy(t,e)){if(np(t))throw Error(M(418));e=Fi(n.nextSibling);var i=Qt;e&&wy(t,e)?Z1(i,n):(t.flags=t.flags&-4097|2,Ae=!1,Qt=t)}}else{if(np(t))throw Error(M(418));t.flags=t.flags&-4097|2,Ae=!1,Qt=t}}}function Ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function su(t){if(t!==Qt)return!1;if(!Ae)return Ey(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yf(t.type,t.memoizedProps)),e&&(e=Zt)){if(np(t))throw G1(),Error(M(418));for(;e;)Z1(t,e),e=Fi(e.nextSibling)}if(Ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=Fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=Qt?Fi(t.stateNode.nextSibling):null;return!0}function G1(){for(var t=Zt;t;)t=Fi(t.nextSibling)}function Fs(){Zt=Qt=null,Ae=!1}function Nm(t){wn===null?wn=[t]:wn.push(t)}var oL=_i.ReactCurrentBatchConfig;function vn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var rc=nr(null),sc=null,ws=null,Om=null;function Dm(){Om=ws=sc=null}function Mm(t){var e=rc.current;Pe(rc),t._currentValue=e}function rp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){sc=t,Om=ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Om!==t)if(t={context:t,memoizedValue:e,next:null},ws===null){if(sc===null)throw Error(M(308));ws=t,sc.dependencies={lanes:0,firstContext:t}}else ws=ws.next=t;return e}var yr=null;function bm(t){yr===null?yr=[t]:yr.push(t)}function K1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,bm(e)):(n.next=r.next,r.next=n),e.interleaved=n,ci(t,i)}function ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ki=!1;function Um(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ci(t,n)}return r=i.interleaved,r===null?(e.next=e,bm(i)):(e.next=r.next,r.next=e),i.interleaved=e,ci(t,n)}function Lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Tm(t,n)}}function Ty(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oc(t,e,n,i){var r=t.updateQueue;ki=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var h=c,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=h))}if(o!==null){var _=r.baseState;a=0,m=f=h=null,c=o;do{var v=c.lane,S=c.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:S,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,I=c;switch(v=e,S=n,I.tag){case 1:if(k=I.payload,typeof k=="function"){_=k.call(S,_,v);break e}_=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=I.payload,v=typeof k=="function"?k.call(S,_,v):k,v==null)break e;_=Ue({},_,v);break e;case 2:ki=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[c]:v.push(c))}else S={eventTime:S,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=S,h=_):m=m.next=S,a|=v;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;v=c,c=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(1);if(m===null&&(h=_),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Nr|=a,t.lanes=a,t.memoizedState=_}}function Sy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(M(191,r));r.call(i)}}}var X1=new K0.Component().refs;function sp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yc={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Dt(),r=ji(t),o=si(i,r);o.payload=e,n!=null&&(o.callback=n),e=Bi(t,o,r),e!==null&&(Tn(e,t,r,i),Lu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Dt(),r=ji(t),o=si(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Bi(t,o,r),e!==null&&(Tn(e,t,r,i),Lu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),i=ji(t),r=si(n,i);r.tag=2,e!=null&&(r.callback=e),e=Bi(t,r,i),e!==null&&(Tn(e,t,i,n),Lu(e,t,i))}};function Iy(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!ka(n,i)||!ka(r,o):!0}function Y1(t,e,n){var i=!1,r=Qi,o=e.contextType;return typeof o=="object"&&o!==null?o=fn(o):(r=jt(e)?Lr:Pt.current,i=e.contextTypes,o=(i=i!=null)?zs(t,r):Qi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function ky(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Yc.enqueueReplaceState(e,e.state,null)}function op(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=X1,Um(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=fn(o):(o=jt(e)?Lr:Pt.current,r.context=zs(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(sp(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Yc.enqueueReplaceState(r,r.state,null),oc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var i=n.stateNode}if(!i)throw Error(M(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=r.refs;c===X1&&(c=r.refs={}),a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cy(t){var e=t._init;return e(t._payload)}function J1(t){function e(E,y){if(t){var T=E.deletions;T===null?(E.deletions=[y],E.flags|=16):T.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function i(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function r(E,y){return E=Hi(E,y),E.index=0,E.sibling=null,E}function o(E,y,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<y?(E.flags|=2,y):T):(E.flags|=2,y)):(E.flags|=1048576,y)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,y,T,P){return y===null||y.tag!==6?(y=Jd(T,E.mode,P),y.return=E,y):(y=r(y,T),y.return=E,y)}function h(E,y,T,P){var U=T.type;return U===ds?m(E,y,T.props.children,P,T.key):y!==null&&(y.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ii&&Cy(U)===y.type)?(P=r(y,T.props),P.ref=$o(E,y,T),P.return=E,P):(P=Mu(T.type,T.key,T.props,null,E.mode,P),P.ref=$o(E,y,T),P.return=E,P)}function f(E,y,T,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=ef(T,E.mode,P),y.return=E,y):(y=r(y,T.children||[]),y.return=E,y)}function m(E,y,T,P,U){return y===null||y.tag!==7?(y=kr(T,E.mode,P,U),y.return=E,y):(y=r(y,T),y.return=E,y)}function _(E,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jd(""+y,E.mode,T),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kl:return T=Mu(y.type,y.key,y.props,null,E.mode,T),T.ref=$o(E,null,y),T.return=E,T;case hs:return y=ef(y,E.mode,T),y.return=E,y;case Ii:var P=y._init;return _(E,P(y._payload),T)}if(Wo(y)||Oo(y))return y=kr(y,E.mode,T,null),y.return=E,y;ou(E,y)}return null}function v(E,y,T,P){var U=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return U!==null?null:c(E,y,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Kl:return T.key===U?h(E,y,T,P):null;case hs:return T.key===U?f(E,y,T,P):null;case Ii:return U=T._init,v(E,y,U(T._payload),P)}if(Wo(T)||Oo(T))return U!==null?null:m(E,y,T,P,null);ou(E,T)}return null}function S(E,y,T,P,U){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(T)||null,c(y,E,""+P,U);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Kl:return E=E.get(P.key===null?T:P.key)||null,h(y,E,P,U);case hs:return E=E.get(P.key===null?T:P.key)||null,f(y,E,P,U);case Ii:var z=P._init;return S(E,y,T,z(P._payload),U)}if(Wo(P)||Oo(P))return E=E.get(T)||null,m(y,E,P,U,null);ou(y,P)}return null}function k(E,y,T,P){for(var U=null,z=null,V=y,j=y=0,fe=null;V!==null&&j<T.length;j++){V.index>j?(fe=V,V=null):fe=V.sibling;var se=v(E,V,T[j],P);if(se===null){V===null&&(V=fe);break}t&&V&&se.alternate===null&&e(E,V),y=o(se,y,j),z===null?U=se:z.sibling=se,z=se,V=fe}if(j===T.length)return n(E,V),Ae&&mr(E,j),U;if(V===null){for(;j<T.length;j++)V=_(E,T[j],P),V!==null&&(y=o(V,y,j),z===null?U=V:z.sibling=V,z=V);return Ae&&mr(E,j),U}for(V=i(E,V);j<T.length;j++)fe=S(V,E,j,T[j],P),fe!==null&&(t&&fe.alternate!==null&&V.delete(fe.key===null?j:fe.key),y=o(fe,y,j),z===null?U=fe:z.sibling=fe,z=fe);return t&&V.forEach(function(Te){return e(E,Te)}),Ae&&mr(E,j),U}function I(E,y,T,P){var U=Oo(T);if(typeof U!="function")throw Error(M(150));if(T=U.call(T),T==null)throw Error(M(151));for(var z=U=null,V=y,j=y=0,fe=null,se=T.next();V!==null&&!se.done;j++,se=T.next()){V.index>j?(fe=V,V=null):fe=V.sibling;var Te=v(E,V,se.value,P);if(Te===null){V===null&&(V=fe);break}t&&V&&Te.alternate===null&&e(E,V),y=o(Te,y,j),z===null?U=Te:z.sibling=Te,z=Te,V=fe}if(se.done)return n(E,V),Ae&&mr(E,j),U;if(V===null){for(;!se.done;j++,se=T.next())se=_(E,se.value,P),se!==null&&(y=o(se,y,j),z===null?U=se:z.sibling=se,z=se);return Ae&&mr(E,j),U}for(V=i(E,V);!se.done;j++,se=T.next())se=S(V,E,j,se.value,P),se!==null&&(t&&se.alternate!==null&&V.delete(se.key===null?j:se.key),y=o(se,y,j),z===null?U=se:z.sibling=se,z=se);return t&&V.forEach(function(nt){return e(E,nt)}),Ae&&mr(E,j),U}function R(E,y,T,P){if(typeof T=="object"&&T!==null&&T.type===ds&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Kl:e:{for(var U=T.key,z=y;z!==null;){if(z.key===U){if(U=T.type,U===ds){if(z.tag===7){n(E,z.sibling),y=r(z,T.props.children),y.return=E,E=y;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Ii&&Cy(U)===z.type){n(E,z.sibling),y=r(z,T.props),y.ref=$o(E,z,T),y.return=E,E=y;break e}n(E,z);break}else e(E,z);z=z.sibling}T.type===ds?(y=kr(T.props.children,E.mode,P,T.key),y.return=E,E=y):(P=Mu(T.type,T.key,T.props,null,E.mode,P),P.ref=$o(E,y,T),P.return=E,E=P)}return a(E);case hs:e:{for(z=T.key;y!==null;){if(y.key===z)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(E,y.sibling),y=r(y,T.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ef(T,E.mode,P),y.return=E,E=y}return a(E);case Ii:return z=T._init,R(E,y,z(T._payload),P)}if(Wo(T))return k(E,y,T,P);if(Oo(T))return I(E,y,T,P);ou(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(n(E,y.sibling),y=r(y,T),y.return=E,E=y):(n(E,y),y=Jd(T,E.mode,P),y.return=E,E=y),a(E)):n(E,y)}return R}var Bs=J1(!0),eE=J1(!1),tl={},$n=nr(tl),La=nr(tl),Ra=nr(tl);function wr(t){if(t===tl)throw Error(M(174));return t}function $m(t,e){switch(ke(Ra,e),ke(La,t),ke($n,tl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$f(e,t)}Pe($n),ke($n,e)}function Vs(){Pe($n),Pe(La),Pe(Ra)}function tE(t){wr(Ra.current);var e=wr($n.current),n=$f(e,t.type);e!==n&&(ke(La,t),ke($n,n))}function zm(t){La.current===t&&(Pe($n),Pe(La))}var Me=nr(0);function ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zd=[];function Fm(){for(var t=0;t<Zd.length;t++)Zd[t]._workInProgressVersionPrimary=null;Zd.length=0}var Ru=_i.ReactCurrentDispatcher,Gd=_i.ReactCurrentBatchConfig,Ar=0,be=null,et=null,rt=null,lc=!1,aa=!1,Aa=0,aL=0;function _t(){throw Error(M(321))}function Bm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function Vm(t,e,n,i,r,o){if(Ar=o,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ru.current=t===null||t.memoizedState===null?hL:dL,t=n(i,r),aa){o=0;do{if(aa=!1,Aa=0,25<=o)throw Error(M(301));o+=1,rt=et=null,e.updateQueue=null,Ru.current=fL,t=n(i,r)}while(aa)}if(Ru.current=uc,e=et!==null&&et.next!==null,Ar=0,rt=et=be=null,lc=!1,e)throw Error(M(300));return t}function jm(){var t=Aa!==0;return Aa=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?be.memoizedState=rt=t:rt=rt.next=t,rt}function pn(){if(et===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=rt===null?be.memoizedState:rt.next;if(e!==null)rt=e,et=t;else{if(t===null)throw Error(M(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},rt===null?be.memoizedState=rt=t:rt=rt.next=t}return rt}function Na(t,e){return typeof e=="function"?e(t):e}function Kd(t){var e=pn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var i=et,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var c=a=null,h=null,f=o;do{var m=f.lane;if((Ar&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var _={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=_,a=i):h=h.next=_,be.lanes|=m,Nr|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=c,Sn(i,e.memoizedState)||(Bt=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,be.lanes|=o,Nr|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qd(t){var e=pn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Sn(o,e.memoizedState)||(Bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function nE(){}function iE(t,e){var n=be,i=pn(),r=e(),o=!Sn(i.memoizedState,r);if(o&&(i.memoizedState=r,Bt=!0),i=i.queue,Hm(oE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Oa(9,sE.bind(null,n,i,r,e),void 0,null),st===null)throw Error(M(349));Ar&30||rE(n,e,r)}return r}function rE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sE(t,e,n,i){e.value=n,e.getSnapshot=i,aE(e)&&lE(t)}function oE(t,e,n){return n(function(){aE(e)&&lE(t)})}function aE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function lE(t){var e=ci(t,1);e!==null&&Tn(e,t,1,-1)}function xy(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=cL.bind(null,be,t),[e.memoizedState,t]}function Oa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function uE(){return pn().memoizedState}function Au(t,e,n,i){var r=Nn();be.flags|=t,r.memoizedState=Oa(1|e,n,void 0,i===void 0?null:i)}function Jc(t,e,n,i){var r=pn();i=i===void 0?null:i;var o=void 0;if(et!==null){var a=et.memoizedState;if(o=a.destroy,i!==null&&Bm(i,a.deps)){r.memoizedState=Oa(e,n,o,i);return}}be.flags|=t,r.memoizedState=Oa(1|e,n,o,i)}function Py(t,e){return Au(8390656,8,t,e)}function Hm(t,e){return Jc(2048,8,t,e)}function cE(t,e){return Jc(4,2,t,e)}function hE(t,e){return Jc(4,4,t,e)}function dE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fE(t,e,n){return n=n!=null?n.concat([t]):null,Jc(4,4,dE.bind(null,e,t),n)}function Wm(){}function pE(t,e){var n=pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Bm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function mE(t,e){var n=pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Bm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function gE(t,e,n){return Ar&21?(Sn(n,e)||(n=y1(),be.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function lL(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var i=Gd.transition;Gd.transition={};try{t(!1),e()}finally{we=n,Gd.transition=i}}function _E(){return pn().memoizedState}function uL(t,e,n){var i=ji(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},vE(t))yE(e,n);else if(n=K1(t,e,n,i),n!==null){var r=Dt();Tn(n,t,i,r),wE(n,e,i)}}function cL(t,e,n){var i=ji(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(vE(t))yE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(r.hasEagerState=!0,r.eagerState=c,Sn(c,a)){var h=e.interleaved;h===null?(r.next=r,bm(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=K1(t,e,r,i),n!==null&&(r=Dt(),Tn(n,t,i,r),wE(n,e,i))}}function vE(t){var e=t.alternate;return t===be||e!==null&&e===be}function yE(t,e){aa=lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Tm(t,n)}}var uc={readContext:fn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},hL={readContext:fn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:Py,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Au(4194308,4,dE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Au(4194308,4,t,e)},useInsertionEffect:function(t,e){return Au(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Nn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=uL.bind(null,be,t),[i.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:xy,useDebugValue:Wm,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=xy(!1),e=t[0];return t=lL.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=be,r=Nn();if(Ae){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),st===null)throw Error(M(349));Ar&30||rE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Py(oE.bind(null,i,o,t),[t]),i.flags|=2048,Oa(9,sE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Nn(),e=st.identifierPrefix;if(Ae){var n=ei,i=Jn;n=(i&~(1<<32-En(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dL={readContext:fn,useCallback:pE,useContext:fn,useEffect:Hm,useImperativeHandle:fE,useInsertionEffect:cE,useLayoutEffect:hE,useMemo:mE,useReducer:Kd,useRef:uE,useState:function(){return Kd(Na)},useDebugValue:Wm,useDeferredValue:function(t){var e=pn();return gE(e,et.memoizedState,t)},useTransition:function(){var t=Kd(Na)[0],e=pn().memoizedState;return[t,e]},useMutableSource:nE,useSyncExternalStore:iE,useId:_E,unstable_isNewReconciler:!1},fL={readContext:fn,useCallback:pE,useContext:fn,useEffect:Hm,useImperativeHandle:fE,useInsertionEffect:cE,useLayoutEffect:hE,useMemo:mE,useReducer:Qd,useRef:uE,useState:function(){return Qd(Na)},useDebugValue:Wm,useDeferredValue:function(t){var e=pn();return et===null?e.memoizedState=t:gE(e,et.memoizedState,t)},useTransition:function(){var t=Qd(Na)[0],e=pn().memoizedState;return[t,e]},useMutableSource:nE,useSyncExternalStore:iE,useId:_E,unstable_isNewReconciler:!1};function js(t,e){try{var n="",i=e;do n+=Bx(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Xd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ap(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pL=typeof WeakMap=="function"?WeakMap:Map;function EE(t,e,n){n=si(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){hc||(hc=!0,_p=i),ap(t,e)},n}function TE(t,e,n){n=si(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ap(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ap(t,e),typeof i!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ly(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new pL;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=PL.bind(null,t,e,n),e.then(t,t))}function Ry(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ay(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=si(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var mL=_i.ReactCurrentOwner,Bt=!1;function Nt(t,e,n,i){e.child=t===null?eE(e,null,n,i):Bs(e,t.child,n,i)}function Ny(t,e,n,i,r){n=n.render;var o=e.ref;return Rs(e,r),i=Vm(t,e,n,i,o,r),n=jm(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,hi(t,e,r)):(Ae&&n&&Rm(e),e.flags|=1,Nt(t,e,i,r),e.child)}function Oy(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Jm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SE(t,e,o,i,r)):(t=Mu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ka,n(a,i)&&t.ref===e.ref)return hi(t,e,r)}return e.flags|=1,t=Hi(o,i),t.ref=e.ref,t.return=e,e.child=t}function SE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(ka(o,i)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,hi(t,e,r)}return lp(t,e,n,i,r)}function IE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Ts,Wt),Wt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Ts,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ke(Ts,Wt),Wt|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,ke(Ts,Wt),Wt|=i;return Nt(t,e,r,n),e.child}function kE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lp(t,e,n,i,r){var o=jt(n)?Lr:Pt.current;return o=zs(e,o),Rs(e,r),n=Vm(t,e,n,i,o,r),i=jm(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,hi(t,e,r)):(Ae&&i&&Rm(e),e.flags|=1,Nt(t,e,n,r),e.child)}function Dy(t,e,n,i,r){if(jt(n)){var o=!0;tc(e)}else o=!1;if(Rs(e,r),e.stateNode===null)Nu(t,e),Y1(e,n,i),op(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=fn(f):(f=jt(n)?Lr:Pt.current,f=zs(e,f));var m=n.getDerivedStateFromProps,_=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==i||h!==f)&&ky(e,a,i,f),ki=!1;var v=e.memoizedState;a.state=v,oc(e,i,a,r),h=e.memoizedState,c!==i||v!==h||Vt.current||ki?(typeof m=="function"&&(sp(e,n,m,i),h=e.memoizedState),(c=ki||Iy(e,n,c,i,v,h,f))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Q1(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:vn(e.type,c),a.props=f,_=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=fn(h):(h=jt(n)?Lr:Pt.current,h=zs(e,h));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==_||v!==h)&&ky(e,a,i,h),ki=!1,v=e.memoizedState,a.state=v,oc(e,i,a,r);var k=e.memoizedState;c!==_||v!==k||Vt.current||ki?(typeof S=="function"&&(sp(e,n,S,i),k=e.memoizedState),(f=ki||Iy(e,n,f,i,v,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return up(t,e,n,i,o,r)}function up(t,e,n,i,r,o){kE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&yy(e,n,!1),hi(t,e,o);i=e.stateNode,mL.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Bs(e,t.child,null,o),e.child=Bs(e,null,c,o)):Nt(t,e,c,o),e.memoizedState=i.state,r&&yy(e,n,!0),e.child}function CE(t){var e=t.stateNode;e.pendingContext?vy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vy(t,e.context,!1),$m(t,e.containerInfo)}function My(t,e,n,i,r){return Fs(),Nm(r),e.flags|=256,Nt(t,e,n,i),e.child}var cp={dehydrated:null,treeContext:null,retryLane:0};function hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function xE(t,e,n){var i=e.pendingProps,r=Me.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ke(Me,r&1),t===null)return ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=nh(a,i,0,null),t=kr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hp(n),e.memoizedState=cp,t):qm(e,a));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return gL(t,e,a,i,c,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,c=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Hi(r,h),i.subtreeFlags=r.subtreeFlags&14680064),c!==null?o=Hi(c,o):(o=kr(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?hp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=cp,i}return o=t.child,t=o.sibling,i=Hi(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function qm(t,e){return e=nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function au(t,e,n,i){return i!==null&&Nm(i),Bs(e,t.child,null,n),t=qm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gL(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Xd(Error(M(422))),au(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=nh({mode:"visible",children:i.children},r,0,null),o=kr(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Bs(e,t.child,null,a),e.child.memoizedState=hp(a),e.memoizedState=cp,o);if(!(e.mode&1))return au(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error(M(419)),i=Xd(o,i,void 0),au(t,e,a,i)}if(c=(a&t.childLanes)!==0,Bt||c){if(i=st,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,ci(t,r),Tn(i,t,r,-1))}return Ym(),i=Xd(Error(M(421))),au(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=LL.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Zt=Fi(r.nextSibling),Qt=e,Ae=!0,wn=null,t!==null&&(on[an++]=Jn,on[an++]=ei,on[an++]=Rr,Jn=t.id,ei=t.overflow,Rr=e),e=qm(e,i.children),e.flags|=4096,e)}function by(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),rp(t.return,e,n)}function Yd(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function PE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Nt(t,e,i.children,n),i=Me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,n,e);else if(t.tag===19)by(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ke(Me,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ac(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Yd(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ac(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Yd(e,!0,n,null,o);break;case"together":Yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _L(t,e,n){switch(e.tag){case 3:CE(e),Fs();break;case 5:tE(e);break;case 1:jt(e.type)&&tc(e);break;case 4:$m(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ke(rc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ke(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?xE(t,e,n):(ke(Me,Me.current&1),t=hi(t,e,n),t!==null?t.sibling:null);ke(Me,Me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return PE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ke(Me,Me.current),i)break;return null;case 22:case 23:return e.lanes=0,IE(t,e,n)}return hi(t,e,n)}var LE,dp,RE,AE;LE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dp=function(){};RE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,wr($n.current);var o=null;switch(n){case"input":r=Df(t,r),i=Df(t,i),o=[];break;case"select":r=Ue({},r,{value:void 0}),i=Ue({},i,{value:void 0}),o=[];break;case"textarea":r=Uf(t,r),i=Uf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ju)}zf(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var c=r[f];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(va.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(c=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(va.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ce("scroll",t),o||c===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};AE=function(t,e,n,i){n!==i&&(e.flags|=4)};function zo(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function vL(t,e,n){var i=e.pendingProps;switch(Am(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return jt(e.type)&&ec(),vt(e),null;case 3:return i=e.stateNode,Vs(),Pe(Vt),Pe(Pt),Fm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(wp(wn),wn=null))),dp(t,e),vt(e),null;case 5:zm(e);var r=wr(Ra.current);if(n=e.type,t!==null&&e.stateNode!=null)RE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(M(166));return vt(e),null}if(t=wr($n.current),su(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[On]=e,i[Pa]=o,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":case"embed":Ce("load",i);break;case"video":case"audio":for(r=0;r<Zo.length;r++)Ce(Zo[r],i);break;case"source":Ce("error",i);break;case"img":case"image":case"link":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"input":Wv(i,o),Ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ce("invalid",i);break;case"textarea":Zv(i,o),Ce("invalid",i)}zf(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&ru(i.textContent,c,t),r=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&ru(i.textContent,c,t),r=["children",""+c]):va.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ce("scroll",i)}switch(n){case"input":Ql(i),qv(i,o,!0);break;case"textarea":Ql(i),Gv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Ju)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[On]=e,t[Pa]=i,LE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ff(n,i),n){case"dialog":Ce("cancel",t),Ce("close",t),r=i;break;case"iframe":case"object":case"embed":Ce("load",t),r=i;break;case"video":case"audio":for(r=0;r<Zo.length;r++)Ce(Zo[r],t);r=i;break;case"source":Ce("error",t),r=i;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),r=i;break;case"details":Ce("toggle",t),r=i;break;case"input":Wv(t,i),r=Df(t,i),Ce("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ue({},i,{value:void 0}),Ce("invalid",t);break;case"textarea":Zv(t,i),r=Uf(t,i),Ce("invalid",t);break;default:r=i}zf(n,r),c=r;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?a1(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&s1(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&ya(t,h):typeof h=="number"&&ya(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(va.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ce("scroll",t):h!=null&&gm(t,o,h,a))}switch(n){case"input":Ql(t),qv(t,i,!1);break;case"textarea":Ql(t),Gv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ki(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Cs(t,!!i.multiple,o,!1):i.defaultValue!=null&&Cs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)AE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(M(166));if(n=wr(Ra.current),wr($n.current),su(e)){if(i=e.stateNode,n=e.memoizedProps,i[On]=e,(o=i.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:ru(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ru(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[On]=e,e.stateNode=i}return vt(e),null;case 13:if(Pe(Me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Zt!==null&&e.mode&1&&!(e.flags&128))G1(),Fs(),e.flags|=98560,o=!1;else if(o=su(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(M(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[On]=e}else Fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),o=!1}else wn!==null&&(wp(wn),wn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?tt===0&&(tt=3):Ym())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Vs(),dp(t,e),t===null&&Ca(e.stateNode.containerInfo),vt(e),null;case 10:return Mm(e.type._context),vt(e),null;case 17:return jt(e.type)&&ec(),vt(e),null;case 19:if(Pe(Me),o=e.memoizedState,o===null)return vt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)zo(o,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ac(t),a!==null){for(e.flags|=128,zo(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Me,Me.current&1|2),e.child}t=t.sibling}o.tail!==null&&je()>Hs&&(e.flags|=128,i=!0,zo(o,!1),e.lanes=4194304)}else{if(!i)if(t=ac(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ae)return vt(e),null}else 2*je()-o.renderingStartTime>Hs&&n!==1073741824&&(e.flags|=128,i=!0,zo(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=je(),e.sibling=null,n=Me.current,ke(Me,i?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Xm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Wt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function yL(t,e){switch(Am(e),e.tag){case 1:return jt(e.type)&&ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vs(),Pe(Vt),Pe(Pt),Fm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zm(e),null;case 13:if(Pe(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Me),null;case 4:return Vs(),null;case 10:return Mm(e.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var lu=!1,Et=!1,wL=typeof WeakSet=="function"?WeakSet:Set,H=null;function Es(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Fe(t,e,i)}else n.current=null}function fp(t,e,n){try{n()}catch(i){Fe(t,e,i)}}var Uy=!1;function EL(t,e){if(Qf=Qu,t=M1(),Lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,h=-1,f=0,m=0,_=t,v=null;t:for(;;){for(var S;_!==n||r!==0&&_.nodeType!==3||(c=a+r),_!==o||i!==0&&_.nodeType!==3||(h=a+i),_.nodeType===3&&(a+=_.nodeValue.length),(S=_.firstChild)!==null;)v=_,_=S;for(;;){if(_===t)break t;if(v===n&&++f===r&&(c=a),v===o&&++m===i&&(h=a),(S=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=S}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xf={focusedElem:t,selectionRange:n},Qu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,R=k.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?I:vn(e.type,I),R);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(P){Fe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=Uy,Uy=!1,k}function la(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&fp(e,n,o)}r=r.next}while(r!==i)}}function eh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function pp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function NE(t){var e=t.alternate;e!==null&&(t.alternate=null,NE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Pa],delete e[ep],delete e[iL],delete e[rL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OE(t){return t.tag===5||t.tag===3||t.tag===4}function $y(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(i!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}function gp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(gp(t,e,n),t=t.sibling;t!==null;)gp(t,e,n),t=t.sibling}var ht=null,yn=!1;function Ti(t,e,n){for(n=n.child;n!==null;)DE(t,e,n),n=n.sibling}function DE(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(qc,n)}catch{}switch(n.tag){case 5:Et||Es(n,e);case 6:var i=ht,r=yn;ht=null,Ti(t,e,n),ht=i,yn=r,ht!==null&&(yn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(yn?(t=ht,n=n.stateNode,t.nodeType===8?Wd(t.parentNode,n):t.nodeType===1&&Wd(t,n),Sa(t)):Wd(ht,n.stateNode));break;case 4:i=ht,r=yn,ht=n.stateNode.containerInfo,yn=!0,Ti(t,e,n),ht=i,yn=r;break;case 0:case 11:case 14:case 15:if(!Et&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&fp(n,e,a),r=r.next}while(r!==i)}Ti(t,e,n);break;case 1:if(!Et&&(Es(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){Fe(n,e,c)}Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:n.mode&1?(Et=(i=Et)||n.memoizedState!==null,Ti(t,e,n),Et=i):Ti(t,e,n);break;default:Ti(t,e,n)}}function zy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wL),e.forEach(function(i){var r=RL.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:ht=c.stateNode,yn=!1;break e;case 3:ht=c.stateNode.containerInfo,yn=!0;break e;case 4:ht=c.stateNode.containerInfo,yn=!0;break e}c=c.return}if(ht===null)throw Error(M(160));DE(o,a,r),ht=null,yn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){Fe(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ME(e,t),e=e.sibling}function ME(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),An(t),i&4){try{la(3,t,t.return),eh(3,t)}catch(I){Fe(t,t.return,I)}try{la(5,t,t.return)}catch(I){Fe(t,t.return,I)}}break;case 1:_n(e,t),An(t),i&512&&n!==null&&Es(n,n.return);break;case 5:if(_n(e,t),An(t),i&512&&n!==null&&Es(n,n.return),t.flags&32){var r=t.stateNode;try{ya(r,"")}catch(I){Fe(t,t.return,I)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&n1(r,o),Ff(c,a);var f=Ff(c,o);for(a=0;a<h.length;a+=2){var m=h[a],_=h[a+1];m==="style"?a1(r,_):m==="dangerouslySetInnerHTML"?s1(r,_):m==="children"?ya(r,_):gm(r,m,_,f)}switch(c){case"input":Mf(r,o);break;case"textarea":i1(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Cs(r,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?Cs(r,!!o.multiple,o.defaultValue,!0):Cs(r,!!o.multiple,o.multiple?[]:"",!1))}r[Pa]=o}catch(I){Fe(t,t.return,I)}}break;case 6:if(_n(e,t),An(t),i&4){if(t.stateNode===null)throw Error(M(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(I){Fe(t,t.return,I)}}break;case 3:if(_n(e,t),An(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Sa(e.containerInfo)}catch(I){Fe(t,t.return,I)}break;case 4:_n(e,t),An(t);break;case 13:_n(e,t),An(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Km=je())),i&4&&zy(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(f=Et)||m,_n(e,t),Et=f):_n(e,t),An(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(H=t,m=t.child;m!==null;){for(_=H=m;H!==null;){switch(v=H,S=v.child,v.tag){case 0:case 11:case 14:case 15:la(4,v,v.return);break;case 1:Es(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(I){Fe(i,n,I)}}break;case 5:Es(v,v.return);break;case 22:if(v.memoizedState!==null){By(_);continue}}S!==null?(S.return=v,H=S):By(_)}m=m.sibling}e:for(m=null,_=t;;){if(_.tag===5){if(m===null){m=_;try{r=_.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=_.stateNode,h=_.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=o1("display",a))}catch(I){Fe(t,t.return,I)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(I){Fe(t,t.return,I)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:_n(e,t),An(t),i&4&&zy(t);break;case 21:break;default:_n(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OE(n)){var i=n;break e}n=n.return}throw Error(M(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ya(r,""),i.flags&=-33);var o=$y(t);gp(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,c=$y(t);mp(t,c,a);break;default:throw Error(M(161))}}catch(h){Fe(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TL(t,e,n){H=t,bE(t)}function bE(t,e,n){for(var i=(t.mode&1)!==0;H!==null;){var r=H,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||lu;if(!a){var c=r.alternate,h=c!==null&&c.memoizedState!==null||Et;c=lu;var f=Et;if(lu=a,(Et=h)&&!f)for(H=r;H!==null;)a=H,h=a.child,a.tag===22&&a.memoizedState!==null?Vy(r):h!==null?(h.return=a,H=h):Vy(r);for(;o!==null;)H=o,bE(o),o=o.sibling;H=r,lu=c,Et=f}Fy(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,H=o):Fy(t)}}function Fy(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||eh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Et)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Sy(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sy(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&Sa(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Et||e.flags&512&&pp(e)}catch(v){Fe(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function By(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Vy(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eh(4,e)}catch(h){Fe(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){Fe(e,r,h)}}var o=e.return;try{pp(e)}catch(h){Fe(e,o,h)}break;case 5:var a=e.return;try{pp(e)}catch(h){Fe(e,a,h)}}}catch(h){Fe(e,e.return,h)}if(e===t){H=null;break}var c=e.sibling;if(c!==null){c.return=e.return,H=c;break}H=e.return}}var SL=Math.ceil,cc=_i.ReactCurrentDispatcher,Zm=_i.ReactCurrentOwner,hn=_i.ReactCurrentBatchConfig,me=0,st=null,Qe=null,pt=0,Wt=0,Ts=nr(0),tt=0,Da=null,Nr=0,th=0,Gm=0,ua=null,zt=null,Km=0,Hs=1/0,Xn=null,hc=!1,_p=null,Vi=null,uu=!1,Di=null,dc=0,ca=0,vp=null,Ou=-1,Du=0;function Dt(){return me&6?je():Ou!==-1?Ou:Ou=je()}function ji(t){return t.mode&1?me&2&&pt!==0?pt&-pt:oL.transition!==null?(Du===0&&(Du=y1()),Du):(t=we,t!==0||(t=window.event,t=t===void 0?16:C1(t.type)),t):1}function Tn(t,e,n,i){if(50<ca)throw ca=0,vp=null,Error(M(185));Ya(t,n,i),(!(me&2)||t!==st)&&(t===st&&(!(me&2)&&(th|=n),tt===4&&xi(t,pt)),Ht(t,i),n===1&&me===0&&!(e.mode&1)&&(Hs=je()+500,Xc&&ir()))}function Ht(t,e){var n=t.callbackNode;oP(t,e);var i=Ku(t,t===st?pt:0);if(i===0)n!==null&&Xv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Xv(n),e===1)t.tag===0?sL(jy.bind(null,t)):W1(jy.bind(null,t)),tL(function(){!(me&6)&&ir()}),n=null;else{switch(w1(i)){case 1:n=Em;break;case 4:n=_1;break;case 16:n=Gu;break;case 536870912:n=v1;break;default:n=Gu}n=HE(n,UE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UE(t,e){if(Ou=-1,Du=0,me&6)throw Error(M(327));var n=t.callbackNode;if(As()&&t.callbackNode!==n)return null;var i=Ku(t,t===st?pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=fc(t,i);else{e=i;var r=me;me|=2;var o=zE();(st!==t||pt!==e)&&(Xn=null,Hs=je()+500,Ir(t,e));do try{CL();break}catch(c){$E(t,c)}while(1);Dm(),cc.current=o,me=r,Qe!==null?e=0:(st=null,pt=0,e=tt)}if(e!==0){if(e===2&&(r=Wf(t),r!==0&&(i=r,e=yp(t,r))),e===1)throw n=Da,Ir(t,0),xi(t,i),Ht(t,je()),n;if(e===6)xi(t,i);else{if(r=t.current.alternate,!(i&30)&&!IL(r)&&(e=fc(t,i),e===2&&(o=Wf(t),o!==0&&(i=o,e=yp(t,o))),e===1))throw n=Da,Ir(t,0),xi(t,i),Ht(t,je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(M(345));case 2:gr(t,zt,Xn);break;case 3:if(xi(t,i),(i&130023424)===i&&(e=Km+500-je(),10<e)){if(Ku(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Dt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Jf(gr.bind(null,t,zt,Xn),e);break}gr(t,zt,Xn);break;case 4:if(xi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-En(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*SL(i/1960))-i,10<i){t.timeoutHandle=Jf(gr.bind(null,t,zt,Xn),i);break}gr(t,zt,Xn);break;case 5:gr(t,zt,Xn);break;default:throw Error(M(329))}}}return Ht(t,je()),t.callbackNode===n?UE.bind(null,t):null}function yp(t,e){var n=ua;return t.current.memoizedState.isDehydrated&&(Ir(t,e).flags|=256),t=fc(t,e),t!==2&&(e=zt,zt=n,e!==null&&wp(e)),t}function wp(t){zt===null?zt=t:zt.push.apply(zt,t)}function IL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Sn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(t,e){for(e&=~Gm,e&=~th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),i=1<<n;t[n]=-1,e&=~i}}function jy(t){if(me&6)throw Error(M(327));As();var e=Ku(t,0);if(!(e&1))return Ht(t,je()),null;var n=fc(t,e);if(t.tag!==0&&n===2){var i=Wf(t);i!==0&&(e=i,n=yp(t,i))}if(n===1)throw n=Da,Ir(t,0),xi(t,e),Ht(t,je()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gr(t,zt,Xn),Ht(t,je()),null}function Qm(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Hs=je()+500,Xc&&ir())}}function Or(t){Di!==null&&Di.tag===0&&!(me&6)&&As();var e=me;me|=1;var n=hn.transition,i=we;try{if(hn.transition=null,we=1,t)return t()}finally{we=i,hn.transition=n,me=e,!(me&6)&&ir()}}function Xm(){Wt=Ts.current,Pe(Ts)}function Ir(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eL(n)),Qe!==null)for(n=Qe.return;n!==null;){var i=n;switch(Am(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ec();break;case 3:Vs(),Pe(Vt),Pe(Pt),Fm();break;case 5:zm(i);break;case 4:Vs();break;case 13:Pe(Me);break;case 19:Pe(Me);break;case 10:Mm(i.type._context);break;case 22:case 23:Xm()}n=n.return}if(st=t,Qe=t=Hi(t.current,null),pt=Wt=e,tt=0,Da=null,Gm=th=Nr=0,zt=ua=null,yr!==null){for(e=0;e<yr.length;e++)if(n=yr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}yr=null}return t}function $E(t,e){do{var n=Qe;try{if(Dm(),Ru.current=uc,lc){for(var i=be.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}lc=!1}if(Ar=0,rt=et=be=null,aa=!1,Aa=0,Zm.current=null,n===null||n.return===null){tt=1,Da=e,Qe=null;break}e:{var o=t,a=n.return,c=n,h=e;if(e=pt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=c,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=Ry(a);if(S!==null){S.flags&=-257,Ay(S,a,c,o,e),S.mode&1&&Ly(o,f,e),e=S,h=f;var k=e.updateQueue;if(k===null){var I=new Set;I.add(h),e.updateQueue=I}else k.add(h);break e}else{if(!(e&1)){Ly(o,f,e),Ym();break e}h=Error(M(426))}}else if(Ae&&c.mode&1){var R=Ry(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Ay(R,a,c,o,e),Nm(js(h,c));break e}}o=h=js(h,c),tt!==4&&(tt=2),ua===null?ua=[o]:ua.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=EE(o,h,e);Ty(o,E);break e;case 1:c=h;var y=o.type,T=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Vi===null||!Vi.has(T)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=TE(o,c,e);Ty(o,P);break e}}o=o.return}while(o!==null)}BE(n)}catch(U){e=U,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(1)}function zE(){var t=cc.current;return cc.current=uc,t===null?uc:t}function Ym(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Nr&268435455)&&!(th&268435455)||xi(st,pt)}function fc(t,e){var n=me;me|=2;var i=zE();(st!==t||pt!==e)&&(Xn=null,Ir(t,e));do try{kL();break}catch(r){$E(t,r)}while(1);if(Dm(),me=n,cc.current=i,Qe!==null)throw Error(M(261));return st=null,pt=0,tt}function kL(){for(;Qe!==null;)FE(Qe)}function CL(){for(;Qe!==null&&!Xx();)FE(Qe)}function FE(t){var e=jE(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?BE(t):Qe=e,Zm.current=null}function BE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yL(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Qe=null;return}}else if(n=vL(n,e,Wt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);tt===0&&(tt=5)}function gr(t,e,n){var i=we,r=hn.transition;try{hn.transition=null,we=1,xL(t,e,n,i)}finally{hn.transition=r,we=i}return null}function xL(t,e,n,i){do As();while(Di!==null);if(me&6)throw Error(M(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(aP(t,o),t===st&&(Qe=st=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,HE(Gu,function(){return As(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=hn.transition,hn.transition=null;var a=we;we=1;var c=me;me|=4,Zm.current=null,EL(t,n),ME(n,t),ZP(Xf),Qu=!!Qf,Xf=Qf=null,t.current=n,TL(n),Yx(),me=c,we=a,hn.transition=o}else t.current=n;if(uu&&(uu=!1,Di=t,dc=r),o=t.pendingLanes,o===0&&(Vi=null),tP(n.stateNode),Ht(t,je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(hc)throw hc=!1,t=_p,_p=null,t;return dc&1&&t.tag!==0&&As(),o=t.pendingLanes,o&1?t===vp?ca++:(ca=0,vp=t):ca=0,ir(),null}function As(){if(Di!==null){var t=w1(dc),e=hn.transition,n=we;try{if(hn.transition=null,we=16>t?16:t,Di===null)var i=!1;else{if(t=Di,Di=null,dc=0,me&6)throw Error(M(331));var r=me;for(me|=4,H=t.current;H!==null;){var o=H,a=o.child;if(H.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(H=f;H!==null;){var m=H;switch(m.tag){case 0:case 11:case 15:la(8,m,o)}var _=m.child;if(_!==null)_.return=m,H=_;else for(;H!==null;){m=H;var v=m.sibling,S=m.return;if(NE(m),m===f){H=null;break}if(v!==null){v.return=S,H=v;break}H=S}}}var k=o.alternate;if(k!==null){var I=k.child;if(I!==null){k.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}H=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,H=a;else e:for(;H!==null;){if(o=H,o.flags&2048)switch(o.tag){case 0:case 11:case 15:la(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,H=E;break e}H=o.return}}var y=t.current;for(H=y;H!==null;){a=H;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,H=T;else e:for(a=y;H!==null;){if(c=H,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:eh(9,c)}}catch(U){Fe(c,c.return,U)}if(c===a){H=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,H=P;break e}H=c.return}}if(me=r,ir(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(qc,t)}catch{}i=!0}return i}finally{we=n,hn.transition=e}}return!1}function Hy(t,e,n){e=js(n,e),e=EE(t,e,1),t=Bi(t,e,1),e=Dt(),t!==null&&(Ya(t,1,e),Ht(t,e))}function Fe(t,e,n){if(t.tag===3)Hy(t,t,n);else for(;e!==null;){if(e.tag===3){Hy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vi===null||!Vi.has(i))){t=js(n,t),t=TE(e,t,1),e=Bi(e,t,1),t=Dt(),e!==null&&(Ya(e,1,t),Ht(e,t));break}}e=e.return}}function PL(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(pt&n)===n&&(tt===4||tt===3&&(pt&130023424)===pt&&500>je()-Km?Ir(t,0):Gm|=n),Ht(t,e)}function VE(t,e){e===0&&(t.mode&1?(e=Jl,Jl<<=1,!(Jl&130023424)&&(Jl=4194304)):e=1);var n=Dt();t=ci(t,e),t!==null&&(Ya(t,e,n),Ht(t,n))}function LL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VE(t,n)}function RL(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(M(314))}i!==null&&i.delete(e),VE(t,n)}var jE;jE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,_L(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Ae&&e.flags&1048576&&q1(e,ic,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Nu(t,e),t=e.pendingProps;var r=zs(e,Pt.current);Rs(e,n),r=Vm(null,e,i,t,r,n);var o=jm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(i)?(o=!0,tc(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Um(e),r.updater=Yc,e.stateNode=r,r._reactInternals=e,op(e,i,t,n),e=up(null,e,i,!0,o,n)):(e.tag=0,Ae&&o&&Rm(e),Nt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Nu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=NL(i),t=vn(i,t),r){case 0:e=lp(null,e,i,t,n);break e;case 1:e=Dy(null,e,i,t,n);break e;case 11:e=Ny(null,e,i,t,n);break e;case 14:e=Oy(null,e,i,vn(i.type,t),n);break e}throw Error(M(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vn(i,r),lp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vn(i,r),Dy(t,e,i,r,n);case 3:e:{if(CE(e),t===null)throw Error(M(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Q1(t,e),oc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=js(Error(M(423)),e),e=My(t,e,i,n,r);break e}else if(i!==r){r=js(Error(M(424)),e),e=My(t,e,i,n,r);break e}else for(Zt=Fi(e.stateNode.containerInfo.firstChild),Qt=e,Ae=!0,wn=null,n=eE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),i===r){e=hi(t,e,n);break e}Nt(t,e,i,n)}e=e.child}return e;case 5:return tE(e),t===null&&ip(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Yf(i,r)?a=null:o!==null&&Yf(i,o)&&(e.flags|=32),kE(t,e),Nt(t,e,a,n),e.child;case 6:return t===null&&ip(e),null;case 13:return xE(t,e,n);case 4:return $m(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Bs(e,null,i,n):Nt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vn(i,r),Ny(t,e,i,r,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,ke(rc,i._currentValue),i._currentValue=a,o!==null)if(Sn(o.value,a)){if(o.children===r.children&&!Vt.current){e=hi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=si(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),rp(o.return,n,e),c.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(M(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),rp(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Nt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Rs(e,n),r=fn(r),i=i(r),e.flags|=1,Nt(t,e,i,n),e.child;case 14:return i=e.type,r=vn(i,e.pendingProps),r=vn(i.type,r),Oy(t,e,i,r,n);case 15:return SE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vn(i,r),Nu(t,e),e.tag=1,jt(i)?(t=!0,tc(e)):t=!1,Rs(e,n),Y1(e,i,r),op(e,i,r,n),up(null,e,i,!0,t,n);case 19:return PE(t,e,n);case 22:return IE(t,e,n)}throw Error(M(156,e.tag))};function HE(t,e){return g1(t,e)}function AL(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,i){return new AL(t,e,n,i)}function Jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NL(t){if(typeof t=="function")return Jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vm)return 11;if(t===ym)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Jm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ds:return kr(n.children,r,o,e);case _m:a=8,r|=8;break;case Rf:return t=un(12,n,e,r|2),t.elementType=Rf,t.lanes=o,t;case Af:return t=un(13,n,e,r),t.elementType=Af,t.lanes=o,t;case Nf:return t=un(19,n,e,r),t.elementType=Nf,t.lanes=o,t;case J0:return nh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X0:a=10;break e;case Y0:a=9;break e;case vm:a=11;break e;case ym:a=14;break e;case Ii:a=16,i=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=un(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function kr(t,e,n,i){return t=un(7,t,i,e),t.lanes=n,t}function nh(t,e,n,i){return t=un(22,t,i,e),t.elementType=J0,t.lanes=n,t.stateNode={isHidden:!1},t}function Jd(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function ef(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OL(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dd(0),this.expirationTimes=Dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function eg(t,e,n,i,r,o,a,c,h){return t=new OL(t,e,n,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=un(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Um(o),t}function DL(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function WE(t){if(!t)return Qi;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(jt(n))return H1(t,n,e)}return e}function qE(t,e,n,i,r,o,a,c,h){return t=eg(n,i,!0,t,r,o,a,c,h),t.context=WE(null),n=t.current,i=Dt(),r=ji(n),o=si(i,r),o.callback=e??null,Bi(n,o,r),t.current.lanes=r,Ya(t,r,i),Ht(t,i),t}function ih(t,e,n,i){var r=e.current,o=Dt(),a=ji(r);return n=WE(n),e.context===null?e.context=n:e.pendingContext=n,e=si(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Bi(r,e,a),t!==null&&(Tn(t,r,a,o),Lu(t,r,a)),a}function pc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tg(t,e){Wy(t,e),(t=t.alternate)&&Wy(t,e)}function ML(){return null}var ZE=typeof reportError=="function"?reportError:function(t){console.error(t)};function ng(t){this._internalRoot=t}rh.prototype.render=ng.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));ih(t,e,null,null)};rh.prototype.unmount=ng.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Or(function(){ih(null,t,null,null)}),e[ui]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=S1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&k1(t)}};function ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qy(){}function bL(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=pc(a);o.call(f)}}var a=qE(e,i,t,0,null,!1,!1,"",qy);return t._reactRootContainer=a,t[ui]=a.current,Ca(t.nodeType===8?t.parentNode:t),Or(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var c=i;i=function(){var f=pc(h);c.call(f)}}var h=eg(t,0,!1,null,null,!1,!1,"",qy);return t._reactRootContainer=h,t[ui]=h.current,Ca(t.nodeType===8?t.parentNode:t),Or(function(){ih(e,h,n,i)}),h}function oh(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var c=r;r=function(){var h=pc(a);c.call(h)}}ih(e,a,t,r)}else a=bL(n,e,t,r,i);return pc(a)}E1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(Tm(e,n|1),Ht(e,je()),!(me&6)&&(Hs=je()+500,ir()))}break;case 13:Or(function(){var i=ci(t,1);if(i!==null){var r=Dt();Tn(i,t,1,r)}}),tg(t,1)}};Sm=function(t){if(t.tag===13){var e=ci(t,134217728);if(e!==null){var n=Dt();Tn(e,t,134217728,n)}tg(t,134217728)}};T1=function(t){if(t.tag===13){var e=ji(t),n=ci(t,e);if(n!==null){var i=Dt();Tn(n,t,e,i)}tg(t,e)}};S1=function(){return we};I1=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Vf=function(t,e,n){switch(e){case"input":if(Mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Qc(i);if(!r)throw Error(M(90));t1(i),Mf(i,r)}}}break;case"textarea":i1(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};c1=Qm;h1=Or;var UL={usingClientEntryPoint:!1,Events:[el,gs,Qc,l1,u1,Qm]},Fo={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$L={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=p1(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||ML,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{qc=cu.inject($L),Un=cu}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UL;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ig(e))throw Error(M(200));return DL(t,e,null,n)};Jt.createRoot=function(t,e){if(!ig(t))throw Error(M(299));var n=!1,i="",r=ZE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=eg(t,1,!1,null,null,n,!1,i,r),t[ui]=e.current,Ca(t.nodeType===8?t.parentNode:t),new ng(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=p1(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Or(t)};Jt.hydrate=function(t,e,n){if(!sh(e))throw Error(M(200));return oh(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!ig(t))throw Error(M(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=qE(e,null,t,1,n??null,r,!1,o,a),t[ui]=e.current,Ca(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new rh(e)};Jt.render=function(t,e,n){if(!sh(e))throw Error(M(200));return oh(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!sh(t))throw Error(M(40));return t._reactRootContainer?(Or(function(){oh(null,null,t,!1,function(){t._reactRootContainer=null,t[ui]=null})}),!0):!1};Jt.unstable_batchedUpdates=Qm;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!sh(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return oh(t,e,n,!1,i)};Jt.version="18.2.0-next-9e3b772b8-20220608";function GE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GE)}catch(t){console.error(t)}}GE(),q0.exports=Jt;var zL=q0.exports,Zy=zL;Pf.createRoot=Zy.createRoot,Pf.hydrateRoot=Zy.hydrateRoot;const KE=""+new URL("Logo-84f0075e.png",import.meta.url).href;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},FL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],c=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},XE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,c=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let v=(c&15)<<2|f>>6,S=f&63;h||(S=64,a||(v=64)),i.push(n[m],n[_],n[v],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||_==null)throw new BL;const v=o<<2|c>>4;if(i.push(v),f!==64){const S=c<<4&240|f>>2;if(i.push(S),_!==64){const k=f<<6&192|_;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VL=function(t){const e=QE(t);return XE.encodeByteArray(e,!0)},mc=function(t){return VL(t).replace(/\./g,"")},YE=function(t){try{return XE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=()=>jL().__FIREBASE_DEFAULTS__,WL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YE(t[1]);return e&&JSON.parse(e)},ah=()=>{try{return HL()||WL()||qL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JE=t=>{var e,n;return(n=(e=ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eT=t=>{const e=JE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ZL=()=>{var t;return(t=ah())===null||t===void 0?void 0:t.config},tT=t=>{var e;return(e=ah())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[mc(JSON.stringify(n)),mc(JSON.stringify(a)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function QL(){var t;const e=(t=ah())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JL(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eR(){try{return typeof indexedDB=="object"}catch{return!1}}function tR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="FirebaseError";class Wn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=nR,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?iR(o,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new Wn(r,c,i)}}function iR(t,e){return t.replace(rR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const rR=/\{\$([^}]+)}/g;function sR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Gy(o)&&Gy(a)){if(!gc(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Gy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Go(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Ko(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oR(t,e){const n=new aR(t,e);return n.subscribe.bind(n)}class aR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");lR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=tf),r.error===void 0&&(r.error=tf),r.complete===void 0&&(r.complete=tf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new GL;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hR(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cR(t){return t===_r?void 0:t}function hR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const fR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},pR=ve.INFO,mR={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},gR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=mR[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rg{constructor(e){this.name=e,this._logLevel=pR,this._logHandler=gR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const _R=(t,e)=>e.some(n=>t instanceof n);let Ky,Qy;function vR(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yR(){return Qy||(Qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iT=new WeakMap,Ep=new WeakMap,rT=new WeakMap,nf=new WeakMap,sg=new WeakMap;function wR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Wi(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&iT.set(n,t)}).catch(()=>{}),sg.set(e,t),e}function ER(t){if(Ep.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Ep.set(t,e)}let Tp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TR(t){Tp=t(Tp)}function SR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(rf(this),e,...n);return rT.set(i,e.sort?e.sort():[e]),Wi(i)}:yR().includes(t)?function(...e){return t.apply(rf(this),e),Wi(iT.get(this))}:function(...e){return Wi(t.apply(rf(this),e))}}function IR(t){return typeof t=="function"?SR(t):(t instanceof IDBTransaction&&ER(t),_R(t,vR())?new Proxy(t,Tp):t)}function Wi(t){if(t instanceof IDBRequest)return wR(t);if(nf.has(t))return nf.get(t);const e=IR(t);return e!==t&&(nf.set(t,e),sg.set(e,t)),e}const rf=t=>sg.get(t);function kR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),c=Wi(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Wi(a.result),h.oldVersion,h.newVersion,Wi(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const CR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],sf=new Map;function Xy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sf.get(e))return sf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CR.includes(n)))return;const o=async function(a,...c){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return sf.set(e,o),o}TR(t=>({...t,get:(e,n,i)=>Xy(e,n)||t.get(e,n,i),has:(e,n)=>!!Xy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function LR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sp="@firebase/app",Yy="0.9.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new rg("@firebase/app"),RR="@firebase/app-compat",AR="@firebase/analytics-compat",NR="@firebase/analytics",OR="@firebase/app-check-compat",DR="@firebase/app-check",MR="@firebase/auth",bR="@firebase/auth-compat",UR="@firebase/database",$R="@firebase/database-compat",zR="@firebase/functions",FR="@firebase/functions-compat",BR="@firebase/installations",VR="@firebase/installations-compat",jR="@firebase/messaging",HR="@firebase/messaging-compat",WR="@firebase/performance",qR="@firebase/performance-compat",ZR="@firebase/remote-config",GR="@firebase/remote-config-compat",KR="@firebase/storage",QR="@firebase/storage-compat",XR="@firebase/firestore",YR="@firebase/firestore-compat",JR="firebase",eA="9.21.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="[DEFAULT]",tA={[Sp]:"fire-core",[RR]:"fire-core-compat",[NR]:"fire-analytics",[AR]:"fire-analytics-compat",[DR]:"fire-app-check",[OR]:"fire-app-check-compat",[MR]:"fire-auth",[bR]:"fire-auth-compat",[UR]:"fire-rtdb",[$R]:"fire-rtdb-compat",[zR]:"fire-fn",[FR]:"fire-fn-compat",[BR]:"fire-iid",[VR]:"fire-iid-compat",[jR]:"fire-fcm",[HR]:"fire-fcm-compat",[WR]:"fire-perf",[qR]:"fire-perf-compat",[ZR]:"fire-rc",[GR]:"fire-rc-compat",[KR]:"fire-gcs",[QR]:"fire-gcs-compat",[XR]:"fire-fst",[YR]:"fire-fst-compat","fire-js":"fire-js",[JR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,kp=new Map;function nA(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){const e=t.name;if(kp.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,t);for(const n of _c.values())nA(n,t);return!0}function lh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},qi=new nl("app","Firebase",iA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=eA;function sT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ip,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw qi.create("bad-app-name",{appName:String(r)});if(n||(n=ZL()),!n)throw qi.create("no-options");const o=_c.get(r);if(o){if(gc(n,o.options)&&gc(i,o.config))return o;throw qi.create("duplicate-app",{appName:r})}const a=new dR(r);for(const h of kp.values())a.addComponent(h);const c=new rA(n,i,a);return _c.set(r,c),c}function og(t=Ip){const e=_c.get(t);if(!e&&t===Ip)return sT();if(!e)throw qi.create("no-app",{appName:t});return e}function zn(t,e,n){var i;let r=(i=tA[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(c.join(" "));return}Mr(new Xi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebase-heartbeat-database",oA=1,Ma="firebase-heartbeat-store";let of=null;function oT(){return of||(of=kR(sA,oA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ma)}}}).catch(t=>{throw qi.create("idb-open",{originalErrorMessage:t.message})})),of}async function aA(t){try{return(await oT()).transaction(Ma).objectStore(Ma).get(aT(t))}catch(e){if(e instanceof Wn)Dr.warn(e.message);else{const n=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(n.message)}}}async function Jy(t,e){try{const i=(await oT()).transaction(Ma,"readwrite");return await i.objectStore(Ma).put(e,aT(t)),i.done}catch(n){if(n instanceof Wn)Dr.warn(n.message);else{const i=qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dr.warn(i.message)}}}function aT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1024,uA=30*24*60*60*1e3;class cA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ew();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=uA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ew(),{heartbeatsToSend:n,unsentEntries:i}=hA(this._heartbeatsCache.heartbeats),r=mc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ew(){return new Date().toISOString().substring(0,10)}function hA(t,e=lA){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),tw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eR()?tR().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await aA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Jy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Jy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tw(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){Mr(new Xi("platform-logger",e=>new PR(e),"PRIVATE")),Mr(new Xi("heartbeat",e=>new cA(e),"PRIVATE")),zn(Sp,Yy,t),zn(Sp,Yy,"esm2017"),zn("fire-js","")}fA("");function ag(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lT(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pA=lT,uT=new nl("auth","Firebase",lT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new rg("@firebase/auth");function mA(t,...e){vc.logLevel<=ve.WARN&&vc.warn(`Auth (${Wr}): ${t}`,...e)}function bu(t,...e){vc.logLevel<=ve.ERROR&&vc.error(`Auth (${Wr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,...e){throw lg(t,...e)}function Fn(t,...e){return lg(t,...e)}function gA(t,e,n){const i=Object.assign(Object.assign({},pA()),{[e]:n});return new nl("auth","Firebase",i).create(e,{appName:t.name})}function lg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return uT.create(t,...e)}function Q(t,e,...n){if(!t)throw lg(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bu(e),new Error(e)}function di(t,e){t||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _A(){return nw()==="http:"||nw()==="https:"}function nw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_A()||XL()||"connection"in navigator)?navigator.onLine:!0}function yA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=KL()||YL()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new rl(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qr(t,e,n,i,r={}){return hT(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const c=il(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),cT.fetch()(dT(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function hT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},wA),e);try{const r=new TA(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw hu(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw hu(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw hu(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw gA(t,m,f);In(t,m)}}catch(r){if(r instanceof Wn)throw r;In(t,"network-request-failed",{message:String(r)})}}async function sl(t,e,n,i,r={}){const o=await qr(t,e,n,i,r);return"mfaPendingCredential"in o&&In(t,"multi-factor-auth-required",{_serverResponse:o}),o}function dT(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ug(t.config,r):`${t.config.apiScheme}://${r}`}class TA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),EA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Fn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e){return qr(t,"POST","/v1/accounts:delete",e)}async function IA(t,e){return qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kA(t,e=!1){const n=Oe(t),i=await n.getIdToken(e),r=cg(i);Q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ha(af(r.auth_time)),issuedAtTime:ha(af(r.iat)),expirationTime:ha(af(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function af(t){return Number(t)*1e3}function cg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return bu("JWT malformed, contained fewer than 3 sections"),null;try{const r=YE(n);return r?JSON.parse(r):(bu("Failed to decode base64 JWT payload"),null)}catch(r){return bu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function CA(t){const e=cg(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Wn&&xA(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function xA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ha(this.lastLoginAt),this.creationTime=ha(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ws(t,IA(n,{idToken:i}));Q(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AA(o.providerUserInfo):[],c=RA(t.providerData,a),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new fT(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,_)}async function LA(t){const e=Oe(t);await yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RA(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function AA(t){return t.map(e=>{var{providerId:n}=e,i=ag(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e){const n=await hT(t,{},async()=>{const i=il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=dT(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",cT.fetch()(a,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Q(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await NA(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new ba;return i&&(Q(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Q(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Q(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new fT(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ws(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kA(this,e)}reload(){return LA(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await yc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ws(this,SA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,c,h,f,m;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,v=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(a=n.photoURL)!==null&&a!==void 0?a:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,E=(f=n.createdAt)!==null&&f!==void 0?f:void 0,y=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:T,emailVerified:P,isAnonymous:U,providerData:z,stsTokenManager:V}=n;Q(T&&V,e,"internal-error");const j=ba.fromJSON(this.name,V);Q(typeof T=="string",e,"internal-error"),Si(_,e.name),Si(v,e.name),Q(typeof P=="boolean",e,"internal-error"),Q(typeof U=="boolean",e,"internal-error"),Si(S,e.name),Si(k,e.name),Si(I,e.name),Si(R,e.name),Si(E,e.name),Si(y,e.name);const fe=new Cr({uid:T,auth:e,email:v,emailVerified:P,displayName:_,isAnonymous:U,photoURL:k,phoneNumber:S,tenantId:I,stsTokenManager:j,createdAt:E,lastLoginAt:y});return z&&Array.isArray(z)&&(fe.providerData=z.map(se=>Object.assign({},se))),R&&(fe._redirectEventId=R),fe}static async _fromIdTokenResponse(e,n,i=!1){const r=new ba;r.updateFromServerResponse(n);const o=new Cr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await yc(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new Map;function ni(t){di(t instanceof Function,"Expected a class definition");let e=iw.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pT.type="NONE";const rw=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ns{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Uu(this.userKey,r.apiKey,o),this.fullPersistenceKey=Uu("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ns(ni(rw),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ni(rw);const a=Uu(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const m=await f._get(a);if(m){const _=Cr._fromJSON(e,m);f!==o&&(c=_),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ns(o,e,i):(o=h[0],c&&await o._set(a,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ns(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yT(e))return"Blackberry";if(wT(e))return"Webos";if(hg(e))return"Safari";if((e.includes("chrome/")||gT(e))&&!e.includes("edge/"))return"Chrome";if(vT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function mT(t=Lt()){return/firefox\//i.test(t)}function hg(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gT(t=Lt()){return/crios\//i.test(t)}function _T(t=Lt()){return/iemobile/i.test(t)}function vT(t=Lt()){return/android/i.test(t)}function yT(t=Lt()){return/blackberry/i.test(t)}function wT(t=Lt()){return/webos/i.test(t)}function uh(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OA(t=Lt()){var e;return uh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DA(){return JL()&&document.documentMode===10}function ET(t=Lt()){return uh(t)||vT(t)||wT(t)||yT(t)||/windows phone/i.test(t)||_T(t)}function MA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e=[]){let n;switch(t){case"Browser":n=sw(Lt());break;case"Worker":n=`${sw(Lt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${i}`}async function ST(t,e){return qr(t,"GET","/v2/recaptchaConfig",ro(t,e))}function ow(t){return t!==void 0&&t.enterprise!==void 0}class IT{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function kT(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Fn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",bA().appendChild(i)})}function UA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $A="https://www.google.com/recaptcha/enterprise.js?render=",zA="recaptcha-enterprise",FA="NO_RECAPTCHA";class CT{constructor(e){this.type=zA,this.auth=so(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{ST(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new IT(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(h=>{c(h)})})}function r(o,a,c){const h=window.grecaptcha;ow(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(FA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(c=>{if(!n&&ow(window.grecaptcha))r(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}kT($A+c).then(()=>{r(c,o,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function wc(t,e,n,i=!1){const r=new CT(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,c)=>{try{const h=e(o);a(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aw(this),this.idTokenSubscription=new aw(this),this.beforeStateQueue=new BA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Oe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}async initializeRecaptchaConfig(){const e=await ST(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new IT(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new CT(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(a,this,"internal-error"),a.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function so(t){return Oe(t)}class aw{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e){const n=lh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(gc(o,e??{}))return r;In(r,"already-initialized")}return n.initialize({options:e})}function HA(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function WA(t,e,n){const i=so(t);Q(i._canInitEmulator,i,"emulator-config-failed"),Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=xT(e),{host:a,port:c}=qA(e),h=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${a}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||ZA()}function xT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qA(t){const e=xT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:lw(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:lw(a)}}}function lw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function GA(t,e){return qr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(t,e){return sl(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e){return sl(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}async function QA(t,e){return sl(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends dg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ua(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ua(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const r=await wc(e,i,"signInWithPassword");return lf(e,r)}else return lf(e,i).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const o=await wc(e,i,"signInWithPassword");return lf(e,o)}else return Promise.reject(r)});case"emailLink":return KA(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return GA(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return QA(e,{idToken:n,email:this._email,oobCode:this._password});default:In(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e){return sl(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="http://localhost";class br extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=ag(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new br(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Os(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Os(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Os(e,n)}buildRequest(){const e={requestUri:XA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=il(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JA(t){const e=Go(Ko(t)).link,n=e?Go(Ko(e)).deep_link_id:null,i=Go(Ko(t)).deep_link_id;return(i?Go(Ko(i)).link:null)||i||n||e||t}class fg{constructor(e){var n,i,r,o,a,c;const h=Go(Ko(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,m=(i=h.oobCode)!==null&&i!==void 0?i:null,_=YA((r=h.mode)!==null&&r!==void 0?r:null);Q(f&&m&&_,"argument-error"),this.apiKey=f,this.operation=_,this.code=m,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=JA(e);try{return new fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Ua._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=fg.parseLink(n);return Q(i,"argument-error"),Ua._fromEmailAndCode(e,i.code,i.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends PT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends ol{constructor(){super("facebook.com")}static credential(e){return br._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return br._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.GOOGLE_SIGN_IN_METHOD="google.com";Li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends ol{constructor(){super("github.com")}static credential(e){return br._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends ol{constructor(){super("twitter.com")}static credential(e,n){return br._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ai.credential(n,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(t,e){return sl(t,"POST","/v1/accounts:signUp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Cr._fromIdTokenResponse(e,i,r),a=uw(i);return new Ur({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=uw(i);return new Ur({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function uw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends Wn{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ec(e,n,i,r)}}function LT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(t,o,e,i):o})}async function eN(t,e,n=!1){const i=await Ws(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ur._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await Ws(t,LT(i,r,e,t),n);Q(o.idToken,i,"internal-error");const a=cg(o.idToken);Q(a,i,"internal-error");const{sub:c}=a;return Q(t.uid===c,i,"user-mismatch"),Ur._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&In(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(t,e,n=!1){const i="signIn",r=await LT(t,i,e),o=await Ur._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function nN(t,e){return RT(so(t),e)}async function iN(t,e,n){var i;const r=so(t),o={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const f=await wc(r,o,"signUpPassword");a=uf(r,f)}else a=uf(r,o).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const m=await wc(r,o,"signUpPassword");return uf(r,m)}else return Promise.reject(f)});const c=await a.catch(f=>Promise.reject(f)),h=await Ur._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function rN(t,e,n){return nN(Oe(t),oo.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(t,e){return qr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Oe(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Ws(i,sN(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const c=i.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function aN(t,e,n,i){return Oe(t).onIdTokenChanged(e,n,i)}function lN(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function uN(t,e,n,i){return Oe(t).onAuthStateChanged(e,n,i)}function cN(t){return Oe(t).signOut()}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(){const t=Lt();return hg(t)||uh(t)}const dN=1e3,fN=10;class NT extends AT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=hN()&&MA(),this.fallbackToPolling=ET(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);DA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,fN):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},dN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NT.type="LOCAL";const pN=NT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends AT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OT.type="SESSION";const DT=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ch(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(a).map(async f=>f(n.origin,o)),h=await mN(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((c,h)=>{const f=pg("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return window}function _N(t){Bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}async function vN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wN(){return MT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="firebaseLocalStorageDb",EN=1,Sc="firebaseLocalStorage",UT="fbase_key";class al{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(t,e){return t.transaction([Sc],e?"readwrite":"readonly").objectStore(Sc)}function TN(){const t=indexedDB.deleteDatabase(bT);return new al(t).toPromise()}function xp(){const t=indexedDB.open(bT,EN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Sc,{keyPath:UT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Sc)?e(i):(i.close(),await TN(),e(await xp()))})})}async function cw(t,e,n){const i=hh(t,!0).put({[UT]:e,value:n});return new al(i).toPromise()}async function SN(t,e){const n=hh(t,!1).get(e),i=await new al(n).toPromise();return i===void 0?null:i.value}function hw(t,e){const n=hh(t,!0).delete(e);return new al(n).toPromise()}const IN=800,kN=3;class $T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ch._getInstance(wN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vN(),!this.activeServiceWorker)return;this.sender=new gN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xp();return await cw(e,Tc,"1"),await hw(e,Tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>cw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>SN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=hh(r,!1).getAll();return new al(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$T.type="LOCAL";const CN=$T;new rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){return e?ni(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Os(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Os(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Os(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PN(t){return RT(t.auth,new mg(t),t.bypassAuthState)}function LN(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),tN(n,new mg(t),t.bypassAuthState)}async function RN(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),eN(n,new mg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PN;case"linkViaPopup":case"linkViaRedirect":return RN;case"reauthViaPopup":case"reauthViaRedirect":return LN;default:In(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new rl(2e3,1e4);class Ss extends zT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AN.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="pendingRedirect",$u=new Map;class ON extends zT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const i=await DN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DN(t,e){const n=UN(e),i=bN(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function MN(t,e){$u.set(t._key(),e)}function bN(t){return ni(t._redirectPersistence)}function UN(t){return Uu(NN,t.config.apiKey,t.name)}async function $N(t,e,n=!1){const i=so(t),r=xN(i,e),a=await new ON(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=10*60*1e3;class FN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!FT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zN&&this.cachedEventUids.clear(),this.cachedEventUids.has(dw(e))}saveEventToCache(e){this.cachedEventUids.add(dw(e)),this.lastProcessedEventTime=Date.now()}}function dw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e={}){return qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HN=/^https?/;async function WN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VN(t);for(const n of e)try{if(qN(n))return}catch{}In(t,"unauthorized-domain")}function qN(t){const e=Cp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!HN.test(n))return!1;if(jN.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new rl(3e4,6e4);function fw(){const t=Bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GN(t){return new Promise((e,n)=>{var i,r,o;function a(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),n(Fn(t,"network-request-failed"))},timeout:ZN.get()})}if(!((r=(i=Bn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Bn().gapi)===null||o===void 0)&&o.load)a();else{const c=UA("iframefcb");return Bn()[c]=()=>{gapi.load?a():n(Fn(t,"network-request-failed"))},kT(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw zu=null,e})}let zu=null;function KN(t){return zu=zu||GN(t),zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new rl(5e3,15e3),XN="__/auth/iframe",YN="emulator/auth/iframe",JN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t2(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ug(e,YN):`https://${t.config.authDomain}/${XN}`,i={apiKey:e.apiKey,appName:t.name,v:Wr},r=e2.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${il(i).slice(1)}`}async function n2(t){const e=await KN(t),n=Bn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:t2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JN,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Fn(t,"network-request-failed"),c=Bn().setTimeout(()=>{o(a)},QN.get());function h(){Bn().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r2=500,s2=600,o2="_blank",a2="http://localhost";class pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l2(t,e,n,i=r2,r=s2){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},i2),{width:i.toString(),height:r.toString(),top:o,left:a}),f=Lt().toLowerCase();n&&(c=gT(f)?o2:n),mT(f)&&(e=e||a2,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[S,k])=>`${v}${S}=${k},`,"");if(OA(f)&&c!=="_self")return u2(e||"",c),new pw(null);const _=window.open(e||"",c,m);Q(_,t,"popup-blocked");try{_.focus()}catch{}return new pw(_)}function u2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="__/auth/handler",h2="emulator/auth/handler",d2=encodeURIComponent("fac");async function mw(t,e,n,i,r,o){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Wr,eventId:r};if(e instanceof PT){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",sR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries(o||{}))a[m]=_}if(e instanceof ol){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),f=h?`#${d2}=${encodeURIComponent(h)}`:"";return`${f2(t)}?${il(c).slice(1)}${f}`}function f2({config:t}){return t.emulator?ug(t,h2):`https://${t.authDomain}/${c2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="webStorageSupport";class p2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DT,this._completeRedirectFn=$N,this._overrideRedirectResult=MN}async _openPopup(e,n,i,r){var o;di((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await mw(e,n,i,Cp(),r);return l2(e,a,pg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await mw(e,n,i,Cp(),r);return _N(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(di(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await n2(e),i=new FN(e);return n.register("authEvent",r=>(Q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cf,{type:cf},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[cf];a!==void 0&&n(!!a),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ET()||hg()||uh()}}const m2=p2;var gw="@firebase/auth",_w="0.23.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function v2(t){Mr(new Xi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:i.name}),Q(!(c!=null&&c.includes(":")),"argument-error",{appName:i.name});const h={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TT(t)},f=new VA(i,r,o,h);return HA(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Mr(new Xi("auth-internal",e=>{const n=so(e.getProvider("auth").getImmediate());return(i=>new g2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(gw,_w,_2(t)),zn(gw,_w,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=5*60,w2=tT("authIdTokenMaxAge")||y2;let vw=null;const E2=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>w2)return;const r=n==null?void 0:n.token;vw!==r&&(vw=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function T2(t=og()){const e=lh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jA(t,{popupRedirectResolver:m2,persistence:[CN,pN,DT]}),i=tT("authTokenSyncURL");if(i){const o=E2(i);lN(n,o,()=>o(n.currentUser)),aN(n,a=>o(a))}const r=JE("auth");return r&&WA(n,`http://${r}`),n}v2("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firebasestorage.googleapis.com",VT="storageBucket",S2=2*60*1e3,I2=10*60*1e3,k2=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends Wn{constructor(e,n,i=0){super(hf(e),`Firebase Storage: ${n} (${hf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Re;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Re||(Re={}));function hf(t){return"storage/"+t}function gg(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(Re.UNKNOWN,t)}function C2(t){return new ze(Re.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function x2(t){return new ze(Re.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function P2(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(Re.UNAUTHENTICATED,t)}function L2(){return new ze(Re.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function R2(t){return new ze(Re.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jT(){return new ze(Re.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HT(){return new ze(Re.CANCELED,"User canceled the upload/download.")}function A2(t){return new ze(Re.INVALID_URL,"Invalid URL '"+t+"'.")}function N2(t){return new ze(Re.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function O2(){return new ze(Re.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VT+"' property when initializing the app?")}function WT(){return new ze(Re.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function D2(){return new ze(Re.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function M2(){return new ze(Re.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function b2(t){return new ze(Re.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Pp(t){return new ze(Re.INVALID_ARGUMENT,t)}function qT(){return new ze(Re.APP_DELETED,"The Firebase app was deleted.")}function U2(t){return new ze(Re.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function da(t,e){return new ze(Re.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bo(t){throw new ze(Re.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Gt.makeFromUrl(e,n)}catch{return new Gt(e,"")}if(i.path==="")return i;throw N2(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function f(P){P.path_=decodeURIComponent(P.path)}const m="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",S=new RegExp(`^https?://${_}/${m}/b/${r}/o${v}`,"i"),k={bucket:1,path:3},I=n===BT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",E=new RegExp(`^https?://${I}/${r}/${R}`,"i"),T=[{regex:c,indices:h,postModify:o},{regex:S,indices:k,postModify:f},{regex:E,indices:{bucket:1,path:2},postModify:f}];for(let P=0;P<T.length;P++){const U=T[P],z=U.regex.exec(e);if(z){const V=z[U.indices.bucket];let j=z[U.indices.path];j||(j=""),i=new Gt(V,j),U.postModify(i);break}}if(i==null)throw A2(e);return i}}class $2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t,e,n){let i=1,r=null,o=null,a=!1,c=0;function h(){return c===2}let f=!1;function m(...R){f||(f=!0,e.apply(null,R))}function _(R){r=setTimeout(()=>{r=null,t(S,h())},R)}function v(){o&&clearTimeout(o)}function S(R,...E){if(f){v();return}if(R){v(),m.call(null,R,...E);return}if(h()||a){v(),m.call(null,R,...E);return}i<64&&(i*=2);let T;c===1?(c=2,T=0):T=(i+Math.random())*1e3,_(T)}let k=!1;function I(R){k||(k=!0,v(),!f&&(r!==null?(R||(c=2),clearTimeout(r),_(0)):R||(c=1)))}return _(0),o=setTimeout(()=>{a=!0,I(!0)},n),I}function F2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){return t!==void 0}function V2(t){return typeof t=="function"}function j2(t){return typeof t=="object"&&!Array.isArray(t)}function dh(t){return typeof t=="string"||t instanceof String}function yw(t){return _g()&&t instanceof Blob}function _g(){return typeof Blob<"u"&&!QL()}function ww(t,e,n,i){if(i<e)throw Pp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Pp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function ZT(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xr||(xr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,i,r,o,a,c,h,f,m,_,v=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=_,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,k)=>{this.resolve_=S,this.reject_=k,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new du(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const c=o.getErrorCode()===xr.NO_ERROR,h=o.getStatus();if(!c||GT(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===xr.ABORT;i(!1,new du(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new du(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());B2(h)?o(h):o()}catch(h){a(h)}else if(c!==null){const h=gg();h.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,h)):a(h)}else if(r.canceled){const h=this.appDelete_?qT():HT();a(h)}else{const h=jT();a(h)}};this.canceled_?n(!1,new du(!1,null,!0)):this.backoffId_=z2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&F2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class du{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function W2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function q2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Z2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function G2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function K2(t,e,n,i,r,o,a=!0){const c=ZT(t.urlParams),h=t.url+c,f=Object.assign({},t.headers);return Z2(f,e),W2(f,n),q2(f,o),G2(f,i),new H2(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function X2(...t){const e=Q2();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(_g())return new Blob(t);throw new ze(Re.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Y2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){if(typeof atob>"u")throw b2("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class df{constructor(e,n){this.data=e,this.contentType=n||null}}function eO(t,e){switch(t){case Mn.RAW:return new df(KT(e));case Mn.BASE64:case Mn.BASE64URL:return new df(QT(t,e));case Mn.DATA_URL:return new df(nO(e),iO(e))}throw gg()}function KT(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function tO(t){let e;try{e=decodeURIComponent(t)}catch{throw da(Mn.DATA_URL,"Malformed data URL.")}return KT(e)}function QT(t,e){switch(t){case Mn.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw da(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Mn.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw da(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=J2(e)}catch(r){throw r.message.includes("polyfill")?r:da(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class XT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw da(Mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=rO(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function nO(t){const e=new XT(t);return e.base64?QT(Mn.BASE64,e.rest):tO(e.rest)}function iO(t){return new XT(t).contentType}function rO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){let i=0,r="";yw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(yw(this.data_)){const i=this.data_,r=Y2(i,e,n);return r===null?null:new Ni(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ni(i,!0)}}static getBlob(...e){if(_g()){const n=e.map(i=>i instanceof Ni?i.data_:i);return new Ni(X2.apply(null,n))}else{const n=e.map(a=>dh(a)?eO(Mn.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)r[o++]=a[c]}),new Ni(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){let e;try{e=JSON.parse(t)}catch{return null}return j2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oO(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function JT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e){return e}class At{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||aO}}let fu=null;function lO(t){return!dh(t)||t.length<2?t:JT(t)}function eS(){if(fu)return fu;const t=[];t.push(new At("bucket")),t.push(new At("generation")),t.push(new At("metageneration")),t.push(new At("name","fullPath",!0));function e(o,a){return lO(a)}const n=new At("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new At("size");return r.xform=i,t.push(r),t.push(new At("timeCreated")),t.push(new At("updated")),t.push(new At("md5Hash",null,!0)),t.push(new At("cacheControl",null,!0)),t.push(new At("contentDisposition",null,!0)),t.push(new At("contentEncoding",null,!0)),t.push(new At("contentLanguage",null,!0)),t.push(new At("contentType",null,!0)),t.push(new At("metadata","customMetadata",!0)),fu=t,fu}function uO(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Gt(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function cO(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return uO(i,t),i}function tS(t,e,n){const i=YT(e);return i===null?null:cO(t,i,n)}function hO(t,e,n,i){const r=YT(e);if(r===null||!dh(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,_=t.fullPath,v="/b/"+a(m)+"/o/"+a(_),S=ll(v,n,i),k=ZT({alt:"media",token:f});return S+k})[0]}function nS(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class ao{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){if(!t)throw gg()}function vg(t,e){function n(i,r){const o=tS(t,r,e);return oi(o!==null),o}return n}function dO(t,e){function n(i,r){const o=tS(t,r,e);return oi(o!==null),hO(o,r,t.host,t._protocol)}return n}function ul(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=L2():r=P2():n.getStatus()===402?r=x2(t.bucket):n.getStatus()===403?r=R2(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function iS(t){const e=ul(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=C2(t.path)),o.serverResponse=r.serverResponse,o}return n}function fO(t,e,n){const i=e.fullServerUrl(),r=ll(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,c=new ao(r,o,vg(t,n),a);return c.errorHandler=iS(e),c}function pO(t,e,n){const i=e.fullServerUrl(),r=ll(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,c=new ao(r,o,dO(t,n),a);return c.errorHandler=iS(e),c}function mO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function rS(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=mO(null,e)),i}function gO(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let T="";for(let P=0;P<2;P++)T=T+Math.random().toString().slice(2);return T}const h=c();a["Content-Type"]="multipart/related; boundary="+h;const f=rS(e,i,r),m=nS(f,n),_="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",S=Ni.getBlob(_,i,v);if(S===null)throw WT();const k={name:f.fullPath},I=ll(o,t.host,t._protocol),R="POST",E=t.maxUploadRetryTime,y=new ao(I,R,vg(t,n),E);return y.urlParams=k,y.headers=a,y.body=S.uploadData(),y.errorHandler=ul(e),y}class Ic{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function yg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{oi(!1)}return oi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function _O(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a=rS(e,i,r),c={name:a.fullPath},h=ll(o,t.host,t._protocol),f="POST",m={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},_=nS(a,n),v=t.maxUploadRetryTime;function S(I){yg(I);let R;try{R=I.getResponseHeader("X-Goog-Upload-URL")}catch{oi(!1)}return oi(dh(R)),R}const k=new ao(h,f,S,v);return k.urlParams=c,k.headers=m,k.body=_,k.errorHandler=ul(e),k}function vO(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(f){const m=yg(f,["active","final"]);let _=null;try{_=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{oi(!1)}_||oi(!1);const v=Number(_);return oi(!isNaN(v)),new Ic(v,i.size(),m==="final")}const a="POST",c=t.maxUploadRetryTime,h=new ao(n,a,o,c);return h.headers=r,h.errorHandler=ul(e),h}const Ew=256*1024;function yO(t,e,n,i,r,o,a,c){const h=new Ic(0,0);if(a?(h.current=a.current,h.total=a.total):(h.current=0,h.total=i.size()),i.size()!==h.total)throw D2();const f=h.total-h.current;let m=f;r>0&&(m=Math.min(m,r));const _=h.current,v=_+m;let S="";m===0?S="finalize":f===m?S="upload, finalize":S="upload";const k={"X-Goog-Upload-Command":S,"X-Goog-Upload-Offset":`${h.current}`},I=i.slice(_,v);if(I===null)throw WT();function R(P,U){const z=yg(P,["active","final"]),V=h.current+m,j=i.size();let fe;return z==="final"?fe=vg(e,o)(P,U):fe=null,new Ic(V,j,z==="final",fe)}const E="POST",y=e.maxUploadRetryTime,T=new ao(n,E,R,y);return T.headers=k,T.body=I.uploadData(),T.progressCallback=c||null,T.errorHandler=ul(t),T}const $t={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ff(t){switch(t){case"running":case"pausing":case"canceling":return $t.RUNNING;case"paused":return $t.PAUSED;case"success":return $t.SUCCESS;case"canceled":return $t.CANCELED;case"error":return $t.ERROR;default:return $t.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n,i){if(V2(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class EO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Bo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TO extends EO{initXhr(){this.xhr_.responseType="text"}}function ls(){return new TO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=eS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Re.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(GT(r.status,[]))if(o)r=jT();else{this.sleepTime=Math.max(this.sleepTime*2,k2),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Re.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=_O(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ls,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=vO(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,ls,n,i);this._request=o,o.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ew*this._chunkMultiplier,n=new Ic(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let a;try{a=yO(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const c=this._ref.storage._makeRequest(a,ls,r,o,!1);this._request=c,c.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ew*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=fO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ls,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=gO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ls,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=HT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ff(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new wO(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ff(this._state)){case $t.SUCCESS:os(this._resolve.bind(null,this.snapshot))();break;case $t.CANCELED:case $t.ERROR:const n=this._reject;os(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ff(this._state)){case $t.RUNNING:case $t.PAUSED:e.next&&os(e.next.bind(e,this.snapshot))();break;case $t.SUCCESS:e.complete&&os(e.complete.bind(e))();break;case $t.CANCELED:case $t.ERROR:e.error&&os(e.error.bind(e,this._error))();break;default:e.error&&os(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this._service=e,n instanceof Gt?this._location=n:this._location=Gt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $r(e,n)}get root(){const e=new Gt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JT(this._location.path)}get storage(){return this._service}get parent(){const e=sO(this._location.path);if(e===null)return null;const n=new Gt(this._location.bucket,e);return new $r(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw U2(e)}}function IO(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new SO(t,new Ni(e),n)}function kO(t){t._throwIfRoot("getDownloadURL");const e=pO(t.storage,t._location,eS());return t.storage.makeRequestWithTokens(e,ls).then(n=>{if(n===null)throw M2();return n})}function CO(t,e){const n=oO(t._location.path,e),i=new Gt(t._location.bucket,n);return new $r(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){return/^[A-Za-z]+:\/\//.test(t)}function PO(t,e){return new $r(t,e)}function sS(t,e){if(t instanceof wg){const n=t;if(n._bucket==null)throw O2();const i=new $r(n,n._bucket);return e!=null?sS(i,e):i}else return e!==void 0?CO(t,e):t}function LO(t,e){if(e&&xO(e)){if(t instanceof wg)return PO(t,e);throw Pp("To use ref(service, url), the first argument must be a Storage instance.")}else return sS(t,e)}function Tw(t,e){const n=e==null?void 0:e[VT];return n==null?null:Gt.makeFromBucketSpec(n,t)}function RO(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:nT(r,t.app.options.projectId))}class wg{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=BT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S2,this._maxUploadRetryTime=I2,this._requests=new Set,r!=null?this._bucket=Gt.makeFromBucketSpec(r,this._host):this._bucket=Tw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gt.makeFromBucketSpec(this._url,e):this._bucket=Tw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ww("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ww("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $r(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new $2(qT());{const a=K2(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Sw="@firebase/storage",Iw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="storage";function AO(t,e,n){return t=Oe(t),IO(t,e,n)}function NO(t){return t=Oe(t),kO(t)}function OO(t,e){return t=Oe(t),LO(t,e)}function DO(t=og(),e){t=Oe(t);const i=lh(t,oS).getImmediate({identifier:e}),r=eT("storage");return r&&MO(i,...r),i}function MO(t,e,n,i={}){RO(t,e,n,i)}function bO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new wg(n,i,r,e,Wr)}function UO(){Mr(new Xi(oS,bO,"PUBLIC").setMultipleInstances(!0)),zn(Sw,Iw,""),zn(Sw,Iw,"esm2017")}UO();var $O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,Eg=Eg||{},ee=$O||self;function kc(){}function fh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function cl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function zO(t){return Object.prototype.hasOwnProperty.call(t,pf)&&t[pf]||(t[pf]=++FO)}var pf="closure_uid_"+(1e9*Math.random()>>>0),FO=0;function BO(t,e,n){return t.call.apply(t.bind,arguments)}function VO(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function It(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?It=BO:It=VO,It.apply(null,arguments)}function pu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[r].apply(i,a)}}function rr(){this.s=this.s,this.o=this.o}var jO=0;rr.prototype.s=!1;rr.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),jO!=0)&&zO(this)};rr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Tg(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function kw(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(fh(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let a=0;a<o;a++)t[r+a]=i[a]}else t.push(i)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var HO=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ee.addEventListener("test",kc,e),ee.removeEventListener("test",kc,e)}catch{}return t}();function Cc(t){return/^[\s\xa0]*$/.test(t)}var Cw=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function mf(t,e){return t<e?-1:t>e?1:0}function ph(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function Dn(t){return ph().indexOf(t)!=-1}function Sg(t){return Sg[" "](t),t}Sg[" "]=kc;function lS(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}var WO=Dn("Opera"),qs=Dn("Trident")||Dn("MSIE"),uS=Dn("Edge"),Lp=uS||qs,cS=Dn("Gecko")&&!(ph().toLowerCase().indexOf("webkit")!=-1&&!Dn("Edge"))&&!(Dn("Trident")||Dn("MSIE"))&&!Dn("Edge"),qO=ph().toLowerCase().indexOf("webkit")!=-1&&!Dn("Edge");function hS(){var t=ee.document;return t?t.documentMode:void 0}var xc;e:{var gf="",_f=function(){var t=ph();if(cS)return/rv:([^\);]+)(\)|;)/.exec(t);if(uS)return/Edge\/([\d\.]+)/.exec(t);if(qs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qO)return/WebKit\/(\S+)/.exec(t);if(WO)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(_f&&(gf=_f?_f[1]:""),qs){var vf=hS();if(vf!=null&&vf>parseFloat(gf)){xc=String(vf);break e}}xc=gf}var ZO={};function GO(){return lS(ZO,9,function(){let t=0;const e=Cw(String(xc)).split("."),n=Cw("9").split("."),i=Math.max(e.length,n.length);for(let a=0;t==0&&a<i;a++){var r=e[a]||"",o=n[a]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],r[0].length==0&&o[0].length==0)break;t=mf(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||mf(r[2].length==0,o[2].length==0)||mf(r[2],o[2]),r=r[3],o=o[3]}while(t==0)}return 0<=t})}var Rp;if(ee.document&&qs){var xw=hS();Rp=xw||parseInt(xc,10)||void 0}else Rp=void 0;var KO=Rp;function $a(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(cS){e:{try{Sg(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:QO[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$a.$.h.call(this)}}at($a,kt);var QO={2:"touch",3:"pen",4:"mouse"};$a.prototype.h=function(){$a.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hl="closure_listenable_"+(1e6*Math.random()|0),XO=0;function YO(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++XO,this.fa=this.ia=!1}function mh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ig(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function dS(t){const e={};for(const n in t)e[n]=t[n];return e}const Pw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fS(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<Pw.length;o++)n=Pw[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function gh(t){this.src=t,this.g={},this.h=0}gh.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var a=Np(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new YO(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function Ap(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=aS(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(mh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Np(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var kg="closure_lm_"+(1e6*Math.random()|0),yf={};function pS(t,e,n,i,r){if(i&&i.once)return gS(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pS(t,e[o],n,i,r);return null}return n=Pg(n),t&&t[hl]?t.O(e,n,cl(i)?!!i.capture:!!i,r):mS(t,e,n,!1,i,r)}function mS(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=cl(r)?!!r.capture:!!r,c=xg(t);if(c||(t[kg]=c=new gh(t)),n=c.add(e,n,i,a,o),n.proxy)return n;if(i=JO(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)HO||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(vS(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function JO(){function t(n){return e.call(t.src,t.listener,n)}const e=eD;return t}function gS(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)gS(t,e[o],n,i,r);return null}return n=Pg(n),t&&t[hl]?t.P(e,n,cl(i)?!!i.capture:!!i,r):mS(t,e,n,!0,i,r)}function _S(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)_S(t,e[o],n,i,r);else i=cl(i)?!!i.capture:!!i,n=Pg(n),t&&t[hl]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Np(o,n,i,r),-1<n&&(mh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=xg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Np(e,n,i,r)),(n=-1<t?e[t]:null)&&Cg(n))}function Cg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[hl])Ap(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(vS(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=xg(e))?(Ap(n,t),n.h==0&&(n.src=null,e[kg]=null)):mh(t)}}}function vS(t){return t in yf?yf[t]:yf[t]="on"+t}function eD(t,e){if(t.fa)t=!0;else{e=new $a(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Cg(t),t=n.call(i,e)}return t}function xg(t){return t=t[kg],t instanceof gh?t:null}var wf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pg(t){return typeof t=="function"?t:(t[wf]||(t[wf]=function(e){return t.handleEvent(e)}),t[wf])}function ot(){rr.call(this),this.i=new gh(this),this.S=this,this.J=null}at(ot,rr);ot.prototype[hl]=!0;ot.prototype.removeEventListener=function(t,e,n,i){_S(this,t,e,n,i)};function mt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var r=e;e=new kt(i,t),fS(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];r=mu(a,i,!0,e)&&r}if(a=e.g=t,r=mu(a,i,!0,e)&&r,r=mu(a,i,!1,e)&&r,n)for(o=0;o<n.length;o++)a=e.g=n[o],r=mu(a,i,!1,e)&&r}ot.prototype.N=function(){if(ot.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)mh(n[i]);delete t.g[e],t.h--}}this.J=null};ot.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};ot.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function mu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.fa&&a.capture==n){var c=a.listener,h=a.la||a.src;a.ia&&Ap(t.i,a),r=c.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var Lg=ee.JSON.stringify;function tD(){var t=ES;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class nD{constructor(){this.h=this.g=null}add(e,n){const i=yS.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var yS=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new iD,t=>t.reset());class iD{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function rD(t){ee.setTimeout(()=>{throw t},0)}function wS(t,e){Op||sD(),Dp||(Op(),Dp=!0),ES.add(t,e)}var Op;function sD(){var t=ee.Promise.resolve(void 0);Op=function(){t.then(oD)}}var Dp=!1,ES=new nD;function oD(){for(var t;t=tD();){try{t.h.call(t.g)}catch(n){rD(n)}var e=yS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Dp=!1}function _h(t,e){ot.call(this),this.h=t||1,this.g=e||ee,this.j=It(this.qb,this),this.l=Date.now()}at(_h,ot);B=_h.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mt(this,"tick"),this.ga&&(Rg(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){_h.$.N.call(this),Rg(this),delete this.g};function Ag(t,e,n){if(typeof t=="function")n&&(t=It(t,n));else if(t&&typeof t.handleEvent=="function")t=It(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function TS(t){t.g=Ag(()=>{t.g=null,t.i&&(t.i=!1,TS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class aD extends rr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TS(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function za(t){rr.call(this),this.h=t,this.g={}}at(za,rr);var Lw=[];function SS(t,e,n,i){Array.isArray(n)||(n&&(Lw[0]=n.toString()),n=Lw);for(var r=0;r<n.length;r++){var o=pS(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function IS(t){Ig(t.g,function(e,n){this.g.hasOwnProperty(n)&&Cg(e)},t),t.g={}}za.prototype.N=function(){za.$.N.call(this),IS(this)};za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vh(){this.g=!0}vh.prototype.Ea=function(){this.g=!1};function lD(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var a="",c=o.split("&"),h=0;h<c.length;h++){var f=c[h].split("=");if(1<f.length){var m=f[0];f=f[1];var _=m.split("_");a=2<=_.length&&_[1]=="type"?a+(m+"="+f+"&"):a+(m+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function uD(t,e,n,i,r,o,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+a})}function Is(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+hD(t,n)+(i?" "+i:"")})}function cD(t,e){t.info(function(){return"TIMEOUT: "+e})}vh.prototype.info=function(){};function hD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return Lg(n)}catch{return e}}var Zr={},Rw=null;function yh(){return Rw=Rw||new ot}Zr.Ta="serverreachability";function kS(t){kt.call(this,Zr.Ta,t)}at(kS,kt);function Fa(t){const e=yh();mt(e,new kS(e))}Zr.STAT_EVENT="statevent";function CS(t,e){kt.call(this,Zr.STAT_EVENT,t),this.stat=e}at(CS,kt);function Ot(t){const e=yh();mt(e,new CS(e,t))}Zr.Ua="timingevent";function xS(t,e){kt.call(this,Zr.Ua,t),this.size=e}at(xS,kt);function dl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var wh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},PS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ng(){}Ng.prototype.h=null;function Aw(t){return t.h||(t.h=t.i())}function LS(){}var fl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Og(){kt.call(this,"d")}at(Og,kt);function Dg(){kt.call(this,"c")}at(Dg,kt);var Mp;function Eh(){}at(Eh,Ng);Eh.prototype.g=function(){return new XMLHttpRequest};Eh.prototype.i=function(){return{}};Mp=new Eh;function pl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new za(this),this.P=dD,t=Lp?125:void 0,this.V=new _h(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new RS}function RS(){this.i=null,this.g="",this.h=!1}var dD=45e3,bp={},Pc={};B=pl.prototype;B.setTimeout=function(t){this.P=t};function Up(t,e,n){t.L=1,t.v=Sh(fi(e)),t.s=n,t.S=!0,AS(t,null)}function AS(t,e){t.G=Date.now(),ml(t),t.A=fi(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),zS(n.i,"t",i),t.C=0,n=t.l.I,t.h=new RS,t.g=oI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new aD(It(t.Pa,t,t.g),t.O)),SS(t.U,t.g,"readystatechange",t.nb),e=t.I?dS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Fa(),lD(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&ii(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const m=ii(this.g);var e=this.g.Ia();const _=this.g.da();if(!(3>m)&&(m!=3||Lp||this.g&&(this.h.h||this.g.ja()||Mw(this.g)))){this.J||m!=4||e==7||(e==8||0>=_?Fa(3):Fa(2)),Th(this);var n=this.g.da();this.aa=n;t:if(NS(this)){var i=Mw(this.g);t="";var r=i.length,o=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),fa(this);var a="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,uD(this.j,this.u,this.A,this.m,this.W,m,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cc(c)){var f=c;break t}}f=null}if(n=f)Is(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$p(this,n);else{this.i=!1,this.o=3,Ot(12),Er(this),fa(this);break e}}this.S?(OS(this,m,a),Lp&&this.i&&m==3&&(SS(this.U,this.V,"tick",this.mb),this.V.start())):(Is(this.j,this.m,a,null),$p(this,a)),m==4&&Er(this),this.i&&!this.J&&(m==4?nI(this.l,this):(this.i=!1,ml(this)))}else n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Ot(12)):(this.o=0,Ot(13)),Er(this),fa(this)}}}catch{}finally{}};function NS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function OS(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=fD(t,n),r==Pc){e==4&&(t.o=4,Ot(14),i=!1),Is(t.j,t.m,null,"[Incomplete Response]");break}else if(r==bp){t.o=4,Ot(15),Is(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Is(t.j,t.m,r,null),$p(t,r);NS(t)&&r!=Pc&&r!=bp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ot(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bg(e),e.L=!0,Ot(11))):(Is(t.j,t.m,n,"[Invalid Chunked Response]"),Er(t),fa(t))}B.mb=function(){if(this.g){var t=ii(this.g),e=this.g.ja();this.C<e.length&&(Th(this),OS(this,t,e),this.i&&t!=4&&ml(this))}};function fD(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Pc:(n=Number(e.substring(n,i)),isNaN(n)?bp:(i+=1,i+n>e.length?Pc:(e=e.substr(i,n),t.C=i+n,e)))}B.cancel=function(){this.J=!0,Er(this)};function ml(t){t.Y=Date.now()+t.P,DS(t,t.P)}function DS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=dl(It(t.lb,t),e)}function Th(t){t.B&&(ee.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(cD(this.j,this.A),this.L!=2&&(Fa(),Ot(17)),Er(this),this.o=2,fa(this)):DS(this,this.Y-t)};function fa(t){t.l.H==0||t.J||nI(t.l,t)}function Er(t){Th(t);var e=t.M;e&&typeof e.ra=="function"&&e.ra(),t.M=null,Rg(t.V),IS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function $p(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||zp(n.h,t))){if(!t.K&&zp(n.h,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ac(n),Ch(n);else break e;Fg(n),Ot(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&n.A==0&&!n.v&&(n.v=dl(It(n.ib,n),6e3));if(1>=VS(n.h)&&n.na){try{n.na()}catch{}n.na=void 0}}else Tr(n,11)}else if((t.K||n.g==t)&&Ac(n),!Cc(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let f=r[e];if(n.V=f[0],f=f[1],n.H==2)if(f[0]=="c"){n.J=f[1],n.oa=f[2];const m=f[3];m!=null&&(n.qa=m,n.j.info("VER="+n.qa));const _=f[4];_!=null&&(n.Ga=_,n.j.info("SVER="+n.Ga));const v=f[5];v!=null&&typeof v=="number"&&0<v&&(i=1.5*v,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const S=t.g;if(S){const k=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(k){var o=i.h;o.g||k.indexOf("spdy")==-1&&k.indexOf("quic")==-1&&k.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Mg(o,o.h),o.h=null))}if(i.F){const I=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(i.Da=I,Ne(i.G,i.F,I))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=sI(i,i.I?i.oa:null,i.Y),a.K){jS(i.h,a);var c=a,h=i.K;h&&c.setTimeout(h),c.B&&(Th(c),ml(c)),i.g=a}else eI(i);0<n.i.length&&xh(n)}else f[0]!="stop"&&f[0]!="close"||Tr(n,7);else n.H==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Tr(n,7):zg(n):f[0]!="noop"&&n.l&&n.l.Aa(f),n.A=0)}}Fa(4)}catch{}}function pD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(fh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function mD(t){if(t.sa&&typeof t.sa=="function")return t.sa();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function MS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(fh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=mD(t),i=pD(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var bS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Pr(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Pr){this.h=e!==void 0?e:t.h,Lc(this,t.j),this.s=t.s,this.g=t.g,Rc(this,t.m),this.l=t.l,e=t.i;var n=new Ba;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Nw(this,n),this.o=t.o}else t&&(n=String(t).match(bS))?(this.h=!!e,Lc(this,n[1]||"",!0),this.s=Qo(n[2]||""),this.g=Qo(n[3]||"",!0),Rc(this,n[4]),this.l=Qo(n[5]||"",!0),Nw(this,n[6]||"",!0),this.o=Qo(n[7]||"")):(this.h=!!e,this.i=new Ba(null,this.h))}Pr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Xo(e,Ow,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Xo(e,Ow,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Xo(n,n.charAt(0)=="/"?yD:vD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Xo(n,ED)),t.join("")};function fi(t){return new Pr(t)}function Lc(t,e,n){t.j=n?Qo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Rc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Nw(t,e,n){e instanceof Ba?(t.i=e,TD(t.i,t.h)):(n||(e=Xo(e,wD)),t.i=new Ba(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function Sh(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_D),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _D(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ow=/[#\/\?@]/g,vD=/[#\?:]/g,yD=/[#\?]/g,wD=/[#\?@]/g,ED=/#/g;function Ba(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sr(t){t.g||(t.g=new Map,t.h=0,t.i&&gD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=Ba.prototype;B.add=function(t,e){sr(this),this.i=null,t=lo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function US(t,e){sr(t),e=lo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $S(t,e){return sr(t),e=lo(t,e),t.g.has(e)}B.forEach=function(t,e){sr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};B.sa=function(){sr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};B.Z=function(t){sr(this);let e=[];if(typeof t=="string")$S(this,t)&&(e=e.concat(this.g.get(lo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return sr(this),this.i=null,t=lo(this,t),$S(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function zS(t,e,n){US(t,e),0<n.length&&(t.i=null,t.g.set(lo(t,e),Tg(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=o;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function lo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function TD(t,e){e&&!t.j&&(sr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(US(this,i),zS(this,r,n))},t)),t.j=e}var SD=class{constructor(t,e){this.h=t,this.g=e}};function FS(t){this.l=t||ID,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ID=10;function BS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function VS(t){return t.h?1:t.g?t.g.size:0}function zp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Mg(t,e){t.g?t.g.add(e):t.h=e}function jS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}FS.prototype.cancel=function(){if(this.i=HS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function HS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Tg(t.i)}function bg(){}bg.prototype.stringify=function(t){return ee.JSON.stringify(t,void 0)};bg.prototype.parse=function(t){return ee.JSON.parse(t,void 0)};function kD(){this.g=new bg}function CD(t,e,n){const i=n||"";try{MS(t,function(r,o){let a=r;cl(r)&&(a=Lg(r)),e.push(i+o+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function xD(t,e){const n=new vh;if(ee.Image){const i=new Image;i.onload=pu(gu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=pu(gu,n,i,"TestLoadImage: error",!1,e),i.onabort=pu(gu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=pu(gu,n,i,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function gu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function gl(t){this.l=t.fc||null,this.j=t.ob||!1}at(gl,Ng);gl.prototype.g=function(){return new Ih(this.l,this.j)};gl.prototype.i=function(t){return function(){return t}}({});function Ih(t,e){ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ug,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(Ih,ot);var Ug=0;B=Ih.prototype;B.open=function(t,e){if(this.readyState!=Ug)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Va(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=Ug};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function WS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_l(this):Va(this),this.readyState==3&&WS(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,_l(this))};B.Ya=function(t){this.g&&(this.response=t,_l(this))};B.ka=function(){this.g&&_l(this)};function _l(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Va(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Va(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ih.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var PD=ee.JSON.parse;function Be(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qS,this.L=this.M=!1}at(Be,ot);var qS="",LD=/^https?$/i,RD=["POST","PUT"];B=Be.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Mp.g(),this.C=this.u?Aw(this.u):Aw(Mp),this.g.onreadystatechange=It(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){Dw(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=ee.FormData&&t instanceof ee.FormData,!(0<=aS(RD,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{KS(this),0<this.B&&((this.L=AD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=It(this.ua,this)):this.A=Ag(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Dw(this,o)}};function AD(t){return qs&&GO()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof Eg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mt(this,"timeout"),this.abort(8))};function Dw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ZS(t),kh(t)}function ZS(t){t.F||(t.F=!0,mt(t,"complete"),mt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mt(this,"complete"),mt(this,"abort"),kh(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kh(this,!0)),Be.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?GS(this):this.kb())};B.kb=function(){GS(this)};function GS(t){if(t.h&&typeof Eg<"u"&&(!t.C[1]||ii(t)!=4||t.da()!=2)){if(t.v&&ii(t)==4)Ag(t.La,0,t);else if(mt(t,"readystatechange"),ii(t)==4){t.h=!1;try{const c=t.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=c===0){var r=String(t.I).match(bS)[1]||null;if(!r&&ee.self&&ee.self.location){var o=ee.self.location.protocol;r=o.substr(0,o.length-1)}i=!LD.test(r?r.toLowerCase():"")}n=i}if(n)mt(t,"complete"),mt(t,"success");else{t.m=6;try{var a=2<ii(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.da()+"]",ZS(t)}}finally{kh(t)}}}}function kh(t,e){if(t.g){KS(t);const n=t.g,i=t.C[0]?kc:null;t.g=null,t.C=null,e||mt(t,"ready");try{n.onreadystatechange=i}catch{}}}function KS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}function ii(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),PD(e)}};function Mw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case qS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function QS(t){let e="";return Ig(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function $g(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=QS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function Vo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function XS(t){this.Ga=0,this.i=[],this.j=new vh,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vo("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vo("baseRetryDelayMs",5e3,t),this.hb=Vo("retryDelaySeedMs",1e4,t),this.eb=Vo("forwardChannelMaxRetries",2,t),this.xa=Vo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new FS(t&&t.concurrentRequestLimit),this.Ja=new kD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}B=XS.prototype;B.qa=8;B.H=1;function zg(t){if(YS(t),t.H==3){var e=t.W++,n=fi(t.G);Ne(n,"SID",t.J),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),vl(t,n),e=new pl(t,t.j,e,void 0),e.L=2,e.v=Sh(fi(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon&&(n=ee.navigator.sendBeacon(e.v.toString(),"")),!n&&ee.Image&&(new Image().src=e.v,n=!0),n||(e.g=oI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ml(e)}rI(t)}function Ch(t){t.g&&(Bg(t),t.g.cancel(),t.g=null)}function YS(t){Ch(t),t.u&&(ee.clearTimeout(t.u),t.u=null),Ac(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function xh(t){BS(t.h)||t.m||(t.m=!0,wS(t.Na,t),t.C=0)}function ND(t,e){return VS(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.F.concat(t.i),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=dl(It(t.Na,t,e),iI(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new pl(this,this.j,t,void 0);let o=this.s;if(this.U&&(o?(o=dS(o),fS(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=JS(this,r,e),n=fi(this.G),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),vl(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(QS(o)))+"&"+e:this.o&&$g(n,this.o,o)),Mg(this.h,r),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),r.ba=!0,Up(r,n,null)):Up(r,n,e),this.H=2}}else this.H==3&&(t?bw(this,t):this.i.length==0||BS(this.h)||bw(this))};function bw(t,e){var n;e?n=e.m:n=t.W++;const i=fi(t.G);Ne(i,"SID",t.J),Ne(i,"RID",n),Ne(i,"AID",t.V),vl(t,i),t.o&&t.s&&$g(i,t.o,t.s),n=new pl(t,t.j,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=JS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Mg(t.h,n),Up(n,i,e)}function vl(t,e){t.ma&&Ig(t.ma,function(n,i){Ne(e,i,n)}),t.l&&MS({},function(n,i){Ne(e,i,n)})}function JS(t,e,n){n=Math.min(t.i.length,n);var i=t.l?It(t.l.Va,t.l,t):null;e:{var r=t.i;let o=-1;for(;;){const a=["count="+n];o==-1?0<n?(o=r[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);let c=!0;for(let h=0;h<n;h++){let f=r[h].h;const m=r[h].g;if(f-=o,0>f)o=Math.max(0,r[h].h-100),c=!1;else try{CD(m,a,"req"+f+"_")}catch{i&&i(m)}}if(c){i=a.join("&");break e}}}return t=t.i.splice(0,n),e.F=t,i}function eI(t){t.g||t.u||(t.ba=1,wS(t.Ma,t),t.A=0)}function Fg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=dl(It(t.Ma,t),iI(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,tI(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=dl(It(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Ot(10),Ch(this),tI(this))};function Bg(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function tI(t){t.g=new pl(t,t.j,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=fi(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.J),Ne(e,"CI",t.M?"0":"1"),Ne(e,"AID",t.V),Ne(e,"TYPE","xmlhttp"),vl(t,e),t.o&&t.s&&$g(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=Sh(fi(e)),n.s=null,n.S=!0,AS(n,t)}B.ib=function(){this.v!=null&&(this.v=null,Ch(this),Fg(this),Ot(19))};function Ac(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function nI(t,e){var n=null;if(t.g==e){Ac(t),Bg(t),t.g=null;var i=2}else if(zp(t.h,e))n=e.F,jS(t.h,e),i=1;else return;if(t.H!=0){if(t.ta=e.aa,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=yh(),mt(i,new xS(i,n)),xh(t)}else eI(t);else if(r=e.o,r==3||r==0&&0<t.ta||!(i==1&&ND(t,e)||i==2&&Fg(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:Tr(t,5);break;case 4:Tr(t,10);break;case 3:Tr(t,6);break;default:Tr(t,2)}}}function iI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function Tr(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=It(t.pb,t);n||(n=new Pr("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||Lc(n,"https"),Sh(n)),xD(n.toString(),i)}else Ot(2);t.H=0,t.l&&t.l.za(e),rI(t),YS(t)}B.pb=function(t){t?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function rI(t){if(t.H=0,t.pa=[],t.l){const e=HS(t.h);(e.length!=0||t.i.length!=0)&&(kw(t.pa,e),kw(t.pa,t.i),t.h.i.length=0,Tg(t.i),t.i.length=0),t.l.ya()}}function sI(t,e,n){var i=n instanceof Pr?fi(n):new Pr(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),Rc(i,i.m);else{var r=ee.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Pr(null,void 0);i&&Lc(o,i),e&&(o.g=e),r&&Rc(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&Ne(i,n,e),Ne(i,"VER",t.qa),vl(t,i),i}function oI(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Be(new gl({ob:!0})):new Be(t.va),e.Oa(t.I),e}function aI(){}B=aI.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.Va=function(){};function Nc(){if(qs&&!(10<=Number(KO)))throw Error("Environmental error: no available transport.")}Nc.prototype.g=function(t,e){return new Yt(t,e)};function Yt(t,e){ot.call(this),this.g=new XS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Cc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new uo(this)}at(Yt,ot);Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;Ot(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=sI(t,null,t.Y),xh(t)};Yt.prototype.close=function(){zg(this.g)};Yt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Lg(t),t=n);e.i.push(new SD(e.fb++,t)),e.H==3&&xh(e)};Yt.prototype.N=function(){this.g.l=null,delete this.j,zg(this.g),delete this.g,Yt.$.N.call(this)};function lI(t){Og.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(lI,Og);function uI(){Dg.call(this),this.status=1}at(uI,Dg);function uo(t){this.g=t}at(uo,aI);uo.prototype.Ba=function(){mt(this.g,"a")};uo.prototype.Aa=function(t){mt(this.g,new lI(t))};uo.prototype.za=function(t){mt(this.g,new uI)};uo.prototype.ya=function(){mt(this.g,"b")};function OD(){this.blockSize=-1}function kn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(kn,OD);kn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ef(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],a=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}kn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)Ef(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){Ef(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){Ef(this,i),r=0;break}}this.h=r,this.i+=e};kn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Ee(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var DD={};function Vg(t){return-128<=t&&128>t?lS(DD,t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function bn(t){if(isNaN(t)||!isFinite(t))return Ds;if(0>t)return ft(bn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Fp;return new Ee(e,0)}function cI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ft(cI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=bn(Math.pow(e,8)),i=Ds,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+o),e);8>o?(o=bn(Math.pow(e,o)),i=i.R(o).add(bn(a))):(i=i.R(n),i=i.add(bn(a)))}return i}var Fp=4294967296,Ds=Vg(0),Bp=Vg(1),Uw=Vg(16777216);B=Ee.prototype;B.ea=function(){if(ln(this))return-ft(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Fp+i)*e,e*=Fp}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ri(this))return"0";if(ln(this))return"-"+ft(this).toString(t);for(var e=bn(Math.pow(t,6)),n=this,i="";;){var r=Dc(n,e).g;n=Oc(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,ri(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ri(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ln(t){return t.h==-1}B.X=function(t){return t=Oc(this,t),ln(t)?-1:ri(t)?0:1};function ft(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Ee(n,~t.h).add(Bp)}B.abs=function(){return ln(this)?ft(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),a=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,o&=65535,a&=65535,n[r]=a<<16|o}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function Oc(t,e){return t.add(ft(e))}B.R=function(t){if(ri(this)||ri(t))return Ds;if(ln(this))return ln(t)?ft(this).R(ft(t)):ft(ft(this).R(t));if(ln(t))return ft(this.R(ft(t)));if(0>this.X(Uw)&&0>t.X(Uw))return bn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,a=this.D(i)&65535,c=t.D(r)>>>16,h=t.D(r)&65535;n[2*i+2*r]+=a*h,_u(n,2*i+2*r),n[2*i+2*r+1]+=o*h,_u(n,2*i+2*r+1),n[2*i+2*r+1]+=a*c,_u(n,2*i+2*r+1),n[2*i+2*r+2]+=o*c,_u(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Ee(n,0)};function _u(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function jo(t,e){this.g=t,this.h=e}function Dc(t,e){if(ri(e))throw Error("division by zero");if(ri(t))return new jo(Ds,Ds);if(ln(t))return e=Dc(ft(t),e),new jo(ft(e.g),ft(e.h));if(ln(e))return e=Dc(t,ft(e)),new jo(ft(e.g),e.h);if(30<t.g.length){if(ln(t)||ln(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Bp,i=e;0>=i.X(t);)n=$w(n),i=$w(i);var r=as(n,1),o=as(i,1);for(i=as(i,2),n=as(n,2);!ri(i);){var a=o.add(i);0>=a.X(t)&&(r=r.add(n),o=a),i=as(i,1),n=as(n,1)}return e=Oc(t,r.R(e)),new jo(r,e)}for(r=Ds;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=bn(n),a=o.R(e);ln(a)||0<a.X(t);)n-=i,o=bn(n),a=o.R(e);ri(o)&&(o=Bp),r=r.add(o),t=Oc(t,a)}return new jo(r,t)}B.gb=function(t){return Dc(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Ee(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Ee(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Ee(n,this.h^t.h)};function $w(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Ee(n,t.h)}function as(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ee(r,t.h)}Nc.prototype.createWebChannel=Nc.prototype.g;Yt.prototype.send=Yt.prototype.u;Yt.prototype.open=Yt.prototype.m;Yt.prototype.close=Yt.prototype.close;wh.NO_ERROR=0;wh.TIMEOUT=8;wh.HTTP_ERROR=6;PS.COMPLETE="complete";LS.EventType=fl;fl.OPEN="a";fl.CLOSE="b";fl.ERROR="c";fl.MESSAGE="d";ot.prototype.listen=ot.prototype.O;Be.prototype.listenOnce=Be.prototype.P;Be.prototype.getLastError=Be.prototype.Sa;Be.prototype.getLastErrorCode=Be.prototype.Ia;Be.prototype.getStatus=Be.prototype.da;Be.prototype.getResponseJson=Be.prototype.Wa;Be.prototype.getResponseText=Be.prototype.ja;Be.prototype.send=Be.prototype.ha;Be.prototype.setWithCredentials=Be.prototype.Oa;kn.prototype.digest=kn.prototype.l;kn.prototype.reset=kn.prototype.reset;kn.prototype.update=kn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=bn;Ee.fromString=cI;var MD=function(){return new Nc},bD=function(){return yh()},Tf=wh,UD=PS,$D=Zr,zw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zD=gl,vu=LS,FD=Be,BD=kn,Ms=Ee;const Fw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="9.21.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new rg("@firebase/firestore");function Bw(){return zr.logLevel}function Z(t,...e){if(zr.logLevel<=ve.DEBUG){const n=e.map(jg);zr.debug(`Firestore (${co}): ${t}`,...n)}}function pi(t,...e){if(zr.logLevel<=ve.ERROR){const n=e.map(jg);zr.error(`Firestore (${co}): ${t}`,...n)}}function Zs(t,...e){if(zr.logLevel<=ve.WARN){const n=e.map(jg);zr.warn(`Firestore (${co}): ${t}`,...n)}}function jg(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+t;throw pi(e),new Error(e)}function Le(t,e){t||Y()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class jD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HD{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ai,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},c=h=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ai)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Le(typeof i.accessToken=="string"),new hI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new wt(e)}}class WD{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qD{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new WD(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GD{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.T;return this.T=o.token,Z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?r(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.T=n.token,new ZD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=KD(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function ye(t,e){return t<e?-1:t>e?1:0}function Gs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new We(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new We(0,0))}static max(){return new ne(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,i){n===void 0?n=0:n>e.length&&Y(),i===void 0?i=e.length-n:i>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends ja{construct(e,n,i){return new xe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const QD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends ja{construct(e,n,i){return new St(e,n,i)}static isValidIdentifier(e){return QD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(xe.fromString(e))}static fromName(e){return new K(xe.fromString(e).popFirst(5))}static empty(){return new K(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new xe(e.slice()))}}function XD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ne.fromTimestamp(i===1e9?new We(n+1,0):new We(n,i));return new Yi(r,K.empty(),e)}function YD(t){return new Yi(t.readTime,t.key,-1)}class Yi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Yi(ne.min(),K.empty(),-1)}static max(){return new Yi(ne.max(),K.empty(),-1)}}function JD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==eM)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,i)=>{n(e)})}static reject(e){return new b((n,i)=>{i(e)})}static waitFor(e){return new b((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=b.resolve(!1);for(const i of e)n=n.next(r=>r?b.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new b((i,r)=>{const o=e.length,a=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new b((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Hg.ct=-1;function Ph(t){return t==null}function Mc(t){return t===0&&1/t==-1/0}function nM(t){return typeof t=="number"&&Number.isInteger(t)&&!Mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??dt.RED,this.left=r??dt.EMPTY,this.right=o??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new dt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return dt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,e,n,i,r){return this}insert(t,e,n){return new dt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jw(this.data.getIterator())}getIteratorFrom(e){return new jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Ct(St.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new pI("Invalid base64 string: "+r):r}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const iM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(t){if(Le(!!t),typeof t=="string"){let e=0;const n=iM.exec(t);if(Le(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qg(t){const e=t.mapValue.fields.__previous_value__;return Wg(e)?qg(e):e}function Ha(t){const e=Ji(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n,i,r,o,a,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.useFetchStreams=h}}class Wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wg(t)?4:sM(t)?9007199254740991:10:Y()}function Hn(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Ji(i.timestampValue),a=Ji(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Fr(i.bytesValue).isEqual(Fr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Ke(i.geoPointValue.latitude)===Ke(r.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ke(i.integerValue)===Ke(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ke(i.doubleValue),a=Ke(r.doubleValue);return o===a?Mc(o)===Mc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Gs(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Vw(o)!==Vw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Hn(o[c],a[c])))return!1;return!0}(t,e);default:return Y()}}function qa(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function Ks(t,e){if(t===e)return 0;const n=Br(t),i=Br(e);if(n!==i)return ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Ke(r.integerValue||r.doubleValue),c=Ke(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Hw(t.timestampValue,e.timestampValue);case 4:return Hw(Ha(t),Ha(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(r,o){const a=Fr(r),c=Fr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const f=ye(a[h],c[h]);if(f!==0)return f}return ye(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=ye(Ke(r.latitude),Ke(o.latitude));return a!==0?a:ye(Ke(r.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const a=r.values||[],c=o.values||[];for(let h=0;h<a.length&&h<c.length;++h){const f=Ks(a[h],c[h]);if(f)return f}return ye(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===wu.mapValue&&o===wu.mapValue)return 0;if(r===wu.mapValue)return 1;if(o===wu.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const _=ye(c[m],f[m]);if(_!==0)return _;const v=Ks(a[c[m]],h[f[m]]);if(v!==0)return v}return ye(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Hw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Ji(t),i=Ji(e),r=ye(n.seconds,i.seconds);return r!==0?r:ye(n.nanos,i.nanos)}function Qs(t){return Vp(t)}function Vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=Ji(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Fr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,K.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",o=!0;for(const a of i.values||[])o?o=!1:r+=",",r+=Vp(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Vp(i.fields[c])}`;return o+"}"}(t.mapValue):Y();var e,n}function Ww(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jp(t){return!!t&&"integerValue"in t}function Zg(t){return!!t&&"arrayValue"in t}function qw(t){return!!t&&"nullValue"in t}function Zw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function pa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=pa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pa(n)}setAll(e){let n=St.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=pa(a):r.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Gr(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Ft(pa(this.value))}}function mI(t){const e=[];return Gr(t.fields,(n,i)=>{const r=new St([n]);if(Fu(i)){const o=mI(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Tt(e,0,ne.min(),ne.min(),ne.min(),Ft.empty(),0)}static newFoundDocument(e,n,i,r){return new Tt(e,1,n,ne.min(),i,r,0)}static newNoDocument(e,n){return new Tt(e,2,n,ne.min(),ne.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,ne.min(),ne.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.position=e,this.inclusive=n}}function Gw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=Ks(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Kw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function oM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class Xe extends gI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new lM(e,n,i):n==="array-contains"?new hM(e,i):n==="in"?new dM(e,i):n==="not-in"?new fM(e,i):n==="array-contains-any"?new pM(e,i):new Xe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new uM(e,i):new cM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ks(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new Cn(e,n)}matches(e){return _I(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function _I(t){return t.op==="and"}function vI(t){return aM(t)&&_I(t)}function aM(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Hp(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(vI(t))return t.filters.map(e=>Hp(e)).join(",");{const e=t.filters.map(n=>Hp(n)).join(",");return`${t.op}(${e})`}}function yI(t,e){return t instanceof Xe?function(n,i){return i instanceof Xe&&n.op===i.op&&n.field.isEqual(i.field)&&Hn(n.value,i.value)}(t,e):t instanceof Cn?function(n,i){return i instanceof Cn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,o,a)=>r&&yI(o,i.filters[a]),!0):!1}(t,e):void Y()}function wI(t){return t instanceof Xe?function(e){return`${e.field.canonicalString()} ${e.op} ${Qs(e.value)}`}(t):t instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(wI).join(" ,")+"}"}(t):"Filter"}class lM extends Xe{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class uM extends Xe{constructor(e,n){super(e,"in",n),this.keys=EI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cM extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=EI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function EI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class hM extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zg(n)&&qa(n.arrayValue,this.value)}}class dM extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qa(this.value.arrayValue,n)}}class fM extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qa(this.value.arrayValue,n)}}class pM extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>qa(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ft=null}}function Qw(t,e=null,n=[],i=[],r=null,o=null,a=null){return new mM(t,e,n,i,r,o,a)}function Gg(t){const e=re(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Hp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Qs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Qs(i)).join(",")),e.ft=n}return e.ft}function Kg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kw(t.startAt,e.startAt)&&Kw(t.endAt,e.endAt)}function Wp(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=h,this.dt=null,this._t=null,this.startAt,this.endAt}}function gM(t,e,n,i,r,o,a,c){return new El(t,e,n,i,r,o,a,c)}function Lh(t){return new El(t)}function Xw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Qg(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function SI(t){return t.collectionGroup!==null}function bs(t){const e=re(t);if(e.dt===null){e.dt=[];const n=Qg(e),i=TI(e);if(n!==null&&i===null)n.isKeyField()||e.dt.push(new ma(n)),e.dt.push(new ma(St.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ma(St.keyField(),o))}}}return e.dt}function mi(t){const e=re(t);if(!e._t)if(e.limitType==="F")e._t=Qw(e.path,e.collectionGroup,bs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of bs(e)){const a=o.dir==="desc"?"asc":"desc";n.push(new ma(o.field,a))}const i=e.endAt?new bc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new bc(e.startAt.position,e.startAt.inclusive):null;e._t=Qw(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function qp(t,e){e.getFirstInequalityField(),Qg(t);const n=t.filters.concat([e]);return new El(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zp(t,e,n){return new El(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rh(t,e){return Kg(mi(t),mi(e))&&t.limitType===e.limitType}function II(t){return`${Gg(mi(t))}|lt:${t.limitType}`}function Gp(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>wI(i)).join(", ")}]`),Ph(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Qs(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Qs(i)).join(",")),`Target(${n})`}(mi(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):K.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of bs(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,o,a){const c=Gw(r,o,a);return r.inclusive?c<=0:c<0}(n.startAt,bs(n),i)||n.endAt&&!function(r,o,a){const c=Gw(r,o,a);return r.inclusive?c>=0:c>0}(n.endAt,bs(n),i))}(t,e)}function _M(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kI(t){return(e,n)=>{let i=!1;for(const r of bs(t)){const o=vM(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function vM(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(r,o,a){const c=o.data.field(r),h=a.data.field(r);return c!==null&&h!==null?Ks(c,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new $e(K.comparator);function gi(){return yM}const CI=new $e(K.comparator);function Yo(...t){let e=CI;for(const n of t)e=e.insert(n.key,n);return e}function xI(t){let e=CI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Sr(){return ga()}function PI(){return ga()}function ga(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const wM=new $e(K.comparator),EM=new Ct(K.comparator);function le(...t){let e=EM;for(const n of t)e=e.add(n);return e}const TM=new Ct(ye);function SM(){return TM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function RI(t){return{integerValue:""+t}}function IM(t,e){return nM(e)?RI(e):LI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this._=void 0}}function kM(t,e,n){return t instanceof Za?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Wg(r)&&(r=qg(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof Xs?NI(t,e):t instanceof Ga?OI(t,e):function(i,r){const o=AI(i,r),a=Yw(o)+Yw(i.wt);return jp(o)&&jp(i.wt)?RI(a):LI(i.serializer,a)}(t,e)}function CM(t,e,n){return t instanceof Xs?NI(t,e):t instanceof Ga?OI(t,e):n}function AI(t,e){return t instanceof Uc?jp(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class Za extends Nh{}class Xs extends Nh{constructor(e){super(),this.elements=e}}function NI(t,e){const n=DI(e);for(const i of t.elements)n.some(r=>Hn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ga extends Nh{constructor(e){super(),this.elements=e}}function OI(t,e){let n=DI(e);for(const i of t.elements)n=n.filter(r=>!Hn(r,i));return{arrayValue:{values:n}}}class Uc extends Nh{constructor(e,n){super(),this.serializer=e,this.wt=n}}function Yw(t){return Ke(t.integerValue||t.doubleValue)}function DI(t){return Zg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.field=e,this.transform=n}}function xM(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Xs&&i instanceof Xs||n instanceof Ga&&i instanceof Ga?Gs(n.elements,i.elements,Hn):n instanceof Uc&&i instanceof Uc?Hn(n.wt,i.wt):n instanceof Za&&i instanceof Za}(t.transform,e.transform)}class PM{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oh{}function bI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $I(t.key,Vn.none()):new Tl(t.key,t.data,Vn.none());{const n=t.data,i=Ft.empty();let r=new Ct(St.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new or(t.key,i,new Kt(r.toArray()),Vn.none())}}function LM(t,e,n){t instanceof Tl?function(i,r,o){const a=i.value.clone(),c=e0(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof or?function(i,r,o){if(!Bu(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=e0(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(UI(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,i){return t instanceof Tl?function(r,o,a,c){if(!Bu(r.precondition,o))return a;const h=r.value.clone(),f=t0(r.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof or?function(r,o,a,c){if(!Bu(r.precondition,o))return a;const h=t0(r.fieldTransforms,c,o),f=o.data;return f.setAll(UI(r)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(r,o,a){return Bu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RM(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=AI(i.transform,r||null);o!=null&&(n===null&&(n=Ft.empty()),n.set(i.field,o))}return n||null}function Jw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Gs(n,i,(r,o)=>xM(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tl extends Oh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class or extends Oh{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function UI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function e0(t,e,n){const i=new Map;Le(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,CM(a,c,n[r]))}return i}function t0(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,kM(o,a,e))}return i}class $I extends Oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AM extends Oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&LM(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=_a(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=_a(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=PI();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;const h=bI(a,c);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(ne.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(n,i)=>Jw(n,i))&&Gs(this.baseMutations,e.baseMutations,(n,i)=>Jw(n,i))}}class Xg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Le(e.mutations.length===i.length);let r=wM;const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Xg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,de;function MM(t){switch(t){default:return Y();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function zI(t){if(t===void 0)return pi("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ge.OK:return O.OK;case Ge.CANCELLED:return O.CANCELLED;case Ge.UNKNOWN:return O.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return O.INTERNAL;case Ge.UNAVAILABLE:return O.UNAVAILABLE;case Ge.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ge.NOT_FOUND:return O.NOT_FOUND;case Ge.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ge.ABORTED:return O.ABORTED;case Ge.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ge.DATA_LOSS:return O.DATA_LOSS;default:return Y()}}(de=Ge||(Ge={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Eu}static getOrCreateInstance(){return Eu===null&&(Eu=new Yg),Eu}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Eu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Ms([4294967295,4294967295],0);function n0(t){const e=bM().encode(t),n=new BD;return n.update(e),new Uint8Array(n.digest())}function i0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ms([n,i],0),new Ms([r,o],0)]}class Jg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(i<0)throw new Jo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.yt=8*e.length-n,this.It=Ms.fromNumber(this.yt)}Tt(e,n,i){let r=e.add(n.multiply(Ms.fromNumber(i)));return r.compare(UM)===1&&(r=new Ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}Et(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}At(e){if(this.yt===0)return!1;const n=n0(e),[i,r]=i0(n);for(let o=0;o<this.hashCount;o++){const a=this.Tt(i,r,o);if(!this.Et(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Jg(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.yt===0)return;const n=n0(e),[i,r]=i0(n);for(let o=0;o<this.hashCount;o++){const a=this.Tt(i,r,o);this.Rt(a)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Dh(ne.min(),r,new $e(ye),gi(),le())}}class Sl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Sl(i,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,i,r){this.vt=e,this.removedTargetIds=n,this.key=i,this.Pt=r}}class FI{constructor(e,n){this.targetId=e,this.bt=n}}class BI{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class r0{constructor(){this.Vt=0,this.St=o0(),this.Dt=Rt.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return this.Vt!==0}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=le(),n=le(),i=le();return this.St.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y()}}),new Sl(this.Dt,this.Ct,e,n,i)}$t(){this.xt=!1,this.St=o0()}Ft(e,n){this.xt=!0,this.St=this.St.insert(e,n)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class $M{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=gi(),this.jt=s0(),this.zt=new $e(ye)}Wt(e){for(const n of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(n,e.Pt):this.Jt(n,e.key,e.Pt);for(const n of e.removedTargetIds)this.Jt(n,e.key,e.Pt)}Yt(e){this.forEachTarget(e,n=>{const i=this.Xt(n);switch(e.state){case 0:this.Zt(n)&&i.Mt(e.resumeToken);break;case 1:i.qt(),i.Nt||i.$t(),i.Mt(e.resumeToken);break;case 2:i.qt(),i.Nt||this.removeTarget(n);break;case 3:this.Zt(n)&&(i.Ut(),i.Mt(e.resumeToken));break;case 4:this.Zt(n)&&(this.te(n),i.Mt(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Gt.forEach((i,r)=>{this.Zt(r)&&n(r)})}ee(e){var n;const i=e.targetId,r=e.bt.count,o=this.ne(i);if(o){const a=o.target;if(Wp(a))if(r===0){const c=new K(a.path);this.Jt(i,c,Tt.newNoDocument(c,ne.min()))}else Le(r===1);else{const c=this.se(i);if(c!==r){const h=this.ie(e,c);if(h!==0){this.te(i);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(i,f)}(n=Yg.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(f,m,_){var v,S,k,I,R,E;const y={localCacheCount:m,existenceFilterCount:_.count},T=_.unchangedNames;return T&&(y.bloomFilter={applied:f===0,hashCount:(v=T==null?void 0:T.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(I=(k=(S=T==null?void 0:T.bits)===null||S===void 0?void 0:S.bitmap)===null||k===void 0?void 0:k.length)!==null&&I!==void 0?I:0,padding:(E=(R=T==null?void 0:T.bits)===null||R===void 0?void 0:R.padding)!==null&&E!==void 0?E:0}),y}(h,c,e.bt))}}}}ie(e,n){const{unchangedNames:i,count:r}=e.bt;if(!i||!i.bits)return 1;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=i;let h,f;try{h=Fr(o).toUint8Array()}catch(m){if(m instanceof pI)return Zs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw m}try{f=new Jg(h,a,c)}catch(m){return Zs(m instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",m),1}return f.yt===0?1:r!==n-this.re(e.targetId,f)?2:0}re(e,n){const i=this.Kt.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const a=this.Kt.oe(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;n.At(c)||(this.Jt(e,o,null),r++)}),r}ue(e){const n=new Map;this.Gt.forEach((o,a)=>{const c=this.ne(a);if(c){if(o.current&&Wp(c.target)){const h=new K(c.target.path);this.Qt.get(h)!==null||this.ce(a,h)||this.Jt(a,h,Tt.newNoDocument(h,e))}o.kt&&(n.set(a,o.Ot()),o.$t())}});let i=le();this.jt.forEach((o,a)=>{let c=!0;a.forEachWhile(h=>{const f=this.ne(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.Qt.forEach((o,a)=>a.setReadTime(e));const r=new Dh(e,n,this.zt,this.Qt,i);return this.Qt=gi(),this.jt=s0(),this.zt=new $e(ye),r}Ht(e,n){if(!this.Zt(e))return;const i=this.ce(e,n.key)?2:0;this.Xt(e).Ft(n.key,i),this.Qt=this.Qt.insert(n.key,n),this.jt=this.jt.insert(n.key,this.ae(n.key).add(e))}Jt(e,n,i){if(!this.Zt(e))return;const r=this.Xt(e);this.ce(e,n)?r.Ft(n,1):r.Bt(n),this.jt=this.jt.insert(n,this.ae(n).delete(e)),i&&(this.Qt=this.Qt.insert(n,i))}removeTarget(e){this.Gt.delete(e)}se(e){const n=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let n=this.Gt.get(e);return n||(n=new r0,this.Gt.set(e,n)),n}ae(e){let n=this.jt.get(e);return n||(n=new Ct(ye),this.jt=this.jt.insert(e,n)),n}Zt(e){const n=this.ne(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ne(e){const n=this.Gt.get(e);return n&&n.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new r0),this.Kt.getRemoteKeysForTarget(e).forEach(n=>{this.Jt(e,n,null)})}ce(e,n){return this.Kt.getRemoteKeysForTarget(e).has(n)}}function s0(){return new $e(K.comparator)}function o0(){return new $e(K.comparator)}const zM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),FM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),BM=(()=>({and:"AND",or:"OR"}))();class VM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kp(t,e){return t.useProto3Json||Ph(e)?e:{value:e}}function $c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jM(t,e){return $c(t,e.toTimestamp())}function jn(t){return Le(!!t),ne.fromTimestamp(function(e){const n=Ji(e);return new We(n.seconds,n.nanos)}(t))}function e_(t,e){return function(n){return new xe(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function jI(t){const e=xe.fromString(t);return Le(ZI(e)),e}function Qp(t,e){return e_(t.databaseId,e.path)}function Sf(t,e){const n=jI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(HI(n))}function Xp(t,e){return e_(t.databaseId,e)}function HM(t){const e=jI(t);return e.length===4?xe.emptyPath():HI(e)}function Yp(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HI(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function a0(t,e,n){return{name:Qp(t,e),fields:n.value.mapValue.fields}}function WM(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(Le(f===void 0||typeof f=="string"),Rt.fromBase64String(f||"")):(Le(f===void 0||f instanceof Uint8Array),Rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const f=h.code===void 0?O.UNKNOWN:zI(h.code);return new q(f,h.message||"")}(a);n=new BI(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Sf(t,i.document.name),o=jn(i.document.updateTime),a=i.document.createTime?jn(i.document.createTime):ne.min(),c=new Ft({mapValue:{fields:i.document.fields}}),h=Tt.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Vu(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Sf(t,i.document),o=i.readTime?jn(i.readTime):ne.min(),a=Tt.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Vu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Sf(t,i.document),o=i.removedTargetIds||[];n=new Vu([],o,r,null)}else{if(!("filter"in e))return Y();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new DM(r,o),c=i.targetId;n=new FI(c,a)}}return n}function qM(t,e){let n;if(e instanceof Tl)n={update:a0(t,e.key,e.value)};else if(e instanceof $I)n={delete:Qp(t,e.key)};else if(e instanceof or)n={update:a0(t,e.key,e.data),updateMask:tb(e.fieldMask)};else{if(!(e instanceof AM))return Y();n={verify:Qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof Za)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),increment:a.wt};throw Y()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:jM(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y()}(t,e.precondition)),n}function ZM(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?jn(i.updateTime):jn(r);return o.isEqual(ne.min())&&(o=jn(r)),new PM(o,i.transformResults||[])}(n,e))):[]}function GM(t,e){return{documents:[Xp(t,e.path)]}}function KM(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Xp(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Xp(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(h){if(h.length!==0)return qI(Cn.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:us(m.field),direction:YM(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Kp(t,e.limit);var c;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),n}function QM(t){let e=HM(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Le(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(m){const _=WI(m);return _ instanceof Cn&&vI(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(m=>function(_){return new ma(cs(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m)));let c=null;n.limit&&(c=function(m){let _;return _=typeof m=="object"?m.value:m,Ph(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(m){const _=!!m.before,v=m.values||[];return new bc(v,_)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const _=!m.before,v=m.values||[];return new bc(v,_)}(n.endAt)),gM(e,r,a,o,c,"F",h,f)}function XM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WI(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=cs(e.unaryFilter.field);return Xe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=cs(e.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cs(e.unaryFilter.field);return Xe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cs(e.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(e){return Xe.create(cs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Cn.create(e.compositeFilter.filters.map(n=>WI(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Y()}}(e.compositeFilter.op))}(t):Y()}function YM(t){return zM[t]}function JM(t){return FM[t]}function eb(t){return BM[t]}function us(t){return{fieldPath:t.canonicalString()}}function cs(t){return St.fromServerFormat(t.fieldPath)}function qI(t){return t instanceof Xe?function(e){if(e.op==="=="){if(Zw(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NAN"}};if(qw(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Zw(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NOT_NAN"}};if(qw(e.value))return{unaryFilter:{field:us(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(e.field),op:JM(e.op),value:e.value}}}(t):t instanceof Cn?function(e){const n=e.getFilters().map(i=>qI(i));return n.length===1?n[0]:{compositeFilter:{op:eb(e.op),filters:n}}}(t):Y()}function tb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,i,r,o=ne.min(),a=ne.min(),c=Rt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.le=e}}function ib(t){const e=QM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.sn=new sb}addToCollectionParentIndex(e,n){return this.sn.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(Yi.min())}updateCollectionGroup(e,n,i){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class sb{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ct(xe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ct(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Ys(0)}static kn(){return new Ys(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?b.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&_a(i.mutation,r,Kt.empty(),We.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,le()).next(()=>i))}getLocalViewOfDocuments(e,n,i=le()){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Yo();return o.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,le()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=gi();const a=ga(),c=ga();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof or)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),_a(m.mutation,f,m.mutation.getFieldMask(),We.now())):a.set(f.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var _;return c.set(f,new ab(m,(_=a.get(f))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){const i=ga();let r=new $e((a,c)=>a-c),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||Kt.empty();m=c.applyToLocalView(f,m),i.set(h,m);const _=(r.get(c.batchId)||le()).add(h);r=r.insert(c.batchId,_)})}).next(()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,_=PI();m.forEach(v=>{if(!o.has(v)){const S=bI(n.get(v),i.get(v));S!==null&&_.set(v,S),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,_))}return b.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return K.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):b.resolve(Sr());let c=-1,h=o;return a.next(f=>b.forEach(f,(m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(m)?b.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,le())).next(m=>({batchId:c,changes:xI(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let r=Yo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let o=Yo();return this.indexManager.getCollectionParents(e,r).next(a=>b.forEach(a,c=>{const h=function(f,m){return new El(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i).next(f=>{f.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(o=>{r.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Tt.newInvalidDocument(f)))});let a=Yo();return o.forEach((c,h)=>{const f=r.get(c);f!==void 0&&_a(f.mutation,h,Kt.empty(),We.now()),Ah(n,h)&&(a=a.insert(c,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,n){return b.resolve(this.us.get(n))}saveBundleMetadata(e,n){var i;return this.us.set(n.id,{id:(i=n).id,version:i.version,createTime:jn(i.createTime)}),b.resolve()}getNamedQuery(e,n){return b.resolve(this.cs.get(n))}saveNamedQuery(e,n){return this.cs.set(n.name,function(i){return{name:i.name,query:ib(i.bundledQuery),readTime:jn(i.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.overlays=new $e(K.comparator),this.hs=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Sr();return b.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.de(e,n,o)}),b.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.hs.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hs.delete(i)),b.resolve()}getOverlaysForCollection(e,n,i){const r=Sr(),o=n.length+1,a=new K(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return b.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new $e((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Sr(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=Sr(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return b.resolve(c)}de(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.hs.get(r.largestBatchId).delete(i.key);this.hs.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new OM(n,i));let o=this.hs.get(n);o===void 0&&(o=le(),this.hs.set(n,o)),this.hs.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.ls=new Ct(it.fs),this.ds=new Ct(it._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,n){const i=new it(e,n);this.ls=this.ls.add(i),this.ds=this.ds.add(i)}ws(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.gs(new it(e,n))}ys(e,n){e.forEach(i=>this.removeReference(i,n))}ps(e){const n=new K(new xe([])),i=new it(n,e),r=new it(n,e+1),o=[];return this.ds.forEachInRange([i,r],a=>{this.gs(a),o.push(a.key)}),o}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const n=new K(new xe([])),i=new it(n,e),r=new it(n,e+1);let o=le();return this.ds.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new it(e,0),i=this.ls.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class it{constructor(e,n){this.key=e,this.Es=n}static fs(e,n){return K.comparator(e.key,n.key)||ye(e.Es,n.Es)}static _s(e,n){return ye(e.Es,n.Es)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Ct(it.fs)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NM(o,n,i,r);this.mutationQueue.push(a);for(const c of r)this.Rs=this.Rs.add(new it(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return b.resolve(a)}lookupMutationBatch(e,n){return b.resolve(this.vs(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Ps(i),o=r<0?0:r;return b.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.As-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new it(n,0),r=new it(n,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([i,r],a=>{const c=this.vs(a.Es);o.push(c)}),b.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ct(ye);return n.forEach(r=>{const o=new it(r,0),a=new it(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,a],c=>{i=i.add(c.Es)})}),b.resolve(this.bs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;K.isDocumentKey(o)||(o=o.child(""));const a=new it(new K(o),0);let c=new Ct(ye);return this.Rs.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.Es)),!0)},a),b.resolve(this.bs(c))}bs(e){const n=[];return e.forEach(i=>{const r=this.vs(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Le(this.Vs(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return b.forEach(n.mutations,r=>{const o=new it(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Dn(e){}containsKey(e,n){const i=new it(n,0),r=this.Rs.firstAfterOrEqual(i);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}Vs(e,n){return this.Ps(e)}Ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}vs(e){const n=this.Ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.Ss=e,this.docs=new $e(K.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Ss(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return b.resolve(i?i.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let i=gi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Tt.newInvalidDocument(r))}),b.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=gi();const a=n.path,c=new K(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||JD(YD(m),i)<=0||(r.has(m.key)||Ah(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return b.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Y()}Ds(e,n){return b.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new fb(this)}getSize(e){return b.resolve(this.size)}}class fb extends ob{constructor(e){super(),this.rs=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.rs.addEntry(e,r)):this.rs.removeEntry(i)}),b.waitFor(n)}getFromCache(e,n){return this.rs.getEntry(e,n)}getAllFromCache(e,n){return this.rs.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.persistence=e,this.Cs=new ho(n=>Gg(n),Kg),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.xs=0,this.Ns=new t_,this.targetCount=0,this.ks=Ys.Nn()}forEachTarget(e,n){return this.Cs.forEach((i,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.xs&&(this.xs=n),b.resolve()}$n(e){this.Cs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ks=new Ys(n),this.highestTargetId=n),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,n){return this.$n(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.$n(n),b.resolve()}removeTargetData(e,n){return this.Cs.delete(n.target),this.Ns.ps(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Cs.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Cs.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),b.waitFor(o).next(()=>r)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const i=this.Cs.get(n)||null;return b.resolve(i)}addMatchingKeys(e,n,i){return this.Ns.ws(n,i),b.resolve()}removeMatchingKeys(e,n,i){this.Ns.ys(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),b.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ns.ps(n),b.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Ns.Ts(n);return b.resolve(i)}containsKey(e,n){return b.resolve(this.Ns.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.Ms={},this.overlays={},this.Os=new Hg(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new pb(this),this.indexManager=new rb,this.remoteDocumentCache=function(i){return new db(i)}(i=>this.referenceDelegate.Bs(i)),this.serializer=new nb(n),this.Ls=new ub(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Ms[e.toKey()];return i||(i=new hb(n,this.referenceDelegate),this.Ms[e.toKey()]=i),i}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,n,i){Z("MemoryPersistence","Starting transaction:",e);const r=new gb(this.Os.next());return this.referenceDelegate.qs(),i(r).next(o=>this.referenceDelegate.Us(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ks(e,n){return b.or(Object.values(this.Ms).map(i=>()=>i.containsKey(e,n)))}}class gb extends tM{constructor(e){super(),this.currentSequenceNumber=e}}class n_{constructor(e){this.persistence=e,this.Gs=new t_,this.Qs=null}static js(e){return new n_(e)}get zs(){if(this.Qs)return this.Qs;throw Y()}addReference(e,n,i){return this.Gs.addReference(i,n),this.zs.delete(i.toString()),b.resolve()}removeReference(e,n,i){return this.Gs.removeReference(i,n),this.zs.add(i.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.zs.add(n.toString()),b.resolve()}removeTarget(e,n){this.Gs.ps(n.targetId).forEach(r=>this.zs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.zs.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}qs(){this.Qs=new Set}Us(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.zs,i=>{const r=K.fromPath(i);return this.Ws(e,r).next(o=>{o||n.removeEntry(r,ne.min())})}).next(()=>(this.Qs=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ws(e,n).next(i=>{i?this.zs.delete(n.toString()):this.zs.add(n.toString())})}Bs(e){return 0}Ws(e,n){return b.or([()=>b.resolve(this.Gs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ks(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Fi=r}static Bi(e,n){let i=le(),r=le();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new i_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.Li=!1}initialize(e,n){this.qi=e,this.indexManager=n,this.Li=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ui(e,n).next(o=>o||this.Ki(e,n,r,i)).next(o=>o||this.Gi(e,n))}Ui(e,n){if(Xw(n))return b.resolve(null);let i=mi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Zp(n,null,"F"),i=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=le(...o);return this.qi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Qi(n,c);return this.ji(n,f,a,h.readTime)?this.Ui(e,Zp(n,null,"F")):this.zi(e,f,n,h)}))})))}Ki(e,n,i,r){return Xw(n)||r.isEqual(ne.min())?this.Gi(e,n):this.qi.getDocuments(e,i).next(o=>{const a=this.Qi(n,o);return this.ji(n,a,i,r)?this.Gi(e,n):(Bw()<=ve.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gp(n)),this.zi(e,a,n,XD(r,-1)))})}Qi(e,n){let i=new Ct(kI(e));return n.forEach((r,o)=>{Ah(e,o)&&(i=i.add(o))}),i}ji(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Gi(e,n){return Bw()<=ve.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Gp(n)),this.qi.getDocumentsMatchingQuery(e,n,Yi.min())}zi(e,n,i,r){return this.qi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,i,r){this.persistence=e,this.Wi=n,this.serializer=r,this.Hi=new $e(ye),this.Ji=new ho(o=>Gg(o),Kg),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(i)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lb(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Hi))}}function yb(t,e,n,i){return new vb(t,e,n,i)}async function GI(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Zi(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],c=[];let h=le();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({tr:f,removedBatchIds:a,addedBatchIds:c}))})})}function wb(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,c,h,f){const m=h.batch,_=m.keys();let v=b.resolve();return _.forEach(S=>{v=v.next(()=>f.getEntry(c,S)).next(k=>{const I=h.docVersions.get(S);Le(I!==null),k.version.compareTo(I)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),f.addEntry(k)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=le();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function KI(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Fs.getLastRemoteSnapshotVersion(n))}function Eb(t,e){const n=re(t),i=e.snapshotVersion;let r=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Xi.newChangeBuffer({trackRemovals:!0});r=n.Hi;const c=[];e.targetChanges.forEach((m,_)=>{const v=r.get(_);if(!v)return;c.push(n.Fs.removeMatchingKeys(o,m.removedDocuments,_).next(()=>n.Fs.addMatchingKeys(o,m.addedDocuments,_)));let S=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(Rt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,i)),r=r.insert(_,S),function(k,I,R){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(v,S,m)&&c.push(n.Fs.updateTargetData(o,S))});let h=gi(),f=le();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(Tb(o,a,e.documentUpdates).next(m=>{h=m.er,f=m.nr})),!i.isEqual(ne.min())){const m=n.Fs.getLastRemoteSnapshotVersion(o).next(_=>n.Fs.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return b.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Hi=r,o))}function Tb(t,e,n){let i=le(),r=le();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=gi();return n.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(ne.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):Z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{er:a,nr:r}})}function Sb(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ib(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Fs.getTargetData(i,e).next(o=>o?(r=o,b.resolve(r)):n.Fs.allocateTargetId(i).next(a=>(r=new Mi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Hi.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(i.targetId,i),n.Ji.set(e,i.targetId)),i})}async function Jp(t,e,n){const i=re(t),r=i.Hi.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!wl(a))throw a;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.Hi=i.Hi.remove(e),i.Ji.delete(r.target)}function l0(t,e,n){const i=re(t);let r=ne.min(),o=le();return i.persistence.runTransaction("Execute query","readonly",a=>function(c,h,f){const m=re(c),_=m.Ji.get(f);return _!==void 0?b.resolve(m.Hi.get(_)):m.Fs.getTargetData(h,f)}(i,a,mi(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Fs.getMatchingKeysForTargetId(a,c.targetId).next(h=>{o=h})}).next(()=>i.Wi.getDocumentsMatchingQuery(a,e,n?r:ne.min(),n?o:le())).next(c=>(kb(i,_M(e),c),{documents:c,sr:o})))}function kb(t,e,n){let i=t.Yi.get(e)||ne.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Yi.set(e,i)}class u0{constructor(){this.activeTargetIds=SM()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cb{constructor(){this.Wr=new u0,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,n,i){this.Hr[e]=n}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new u0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=null;function If(){return Tu===null?Tu=268435456+Math.round(2147483648*Math.random()):Tu++,"0x"+Tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class Rb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.wo=n+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,n,i,r,o){const a=If(),c=this.Io(e,n);Z("RestConnection",`Sending RPC '${e}' ${a}:`,c,i);const h={};return this.To(h,r,o),this.Eo(e,c,h,i).then(f=>(Z("RestConnection",`Received RPC '${e}' ${a}: `,f),f),f=>{throw Zs("RestConnection",`RPC '${e}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}Ao(e,n,i,r,o,a){return this.po(e,n,i,r,o)}To(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+co,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Io(e,n){const i=Pb[e];return`${this.wo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,n,i,r){const o=If();return new Promise((a,c)=>{const h=new FD;h.setWithCredentials(!0),h.listenOnce(UD.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Tf.NO_ERROR:const m=h.getResponseJson();Z(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Tf.TIMEOUT:Z(yt,`RPC '${e}' ${o} timed out`),c(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const _=h.getStatus();if(Z(yt,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const k=function(I){const R=I.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(R)>=0?R:O.UNKNOWN}(S.status);c(new q(k,S.message))}else c(new q(O.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new q(O.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{Z(yt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);Z(yt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,i,15)})}Ro(e,n,i){const r=If(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=MD(),c=bD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new zD({})),this.To(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const f=o.join("");Z(yt,`Creating RPC '${e}' stream ${r}: ${f}`,h);const m=a.createWebChannel(f,h);let _=!1,v=!1;const S=new Lb({io:I=>{v?Z(yt,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(_||(Z(yt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),_=!0),Z(yt,`RPC '${e}' stream ${r} sending:`,I),m.send(I))},ro:()=>m.close()}),k=(I,R,E)=>{I.listen(R,y=>{try{E(y)}catch(T){setTimeout(()=>{throw T},0)}})};return k(m,vu.EventType.OPEN,()=>{v||Z(yt,`RPC '${e}' stream ${r} transport opened.`)}),k(m,vu.EventType.CLOSE,()=>{v||(v=!0,Z(yt,`RPC '${e}' stream ${r} transport closed`),S.fo())}),k(m,vu.EventType.ERROR,I=>{v||(v=!0,Zs(yt,`RPC '${e}' stream ${r} transport errored:`,I),S.fo(new q(O.UNAVAILABLE,"The operation could not be completed")))}),k(m,vu.EventType.MESSAGE,I=>{var R;if(!v){const E=I.data[0];Le(!!E);const y=E,T=y.error||((R=y[0])===null||R===void 0?void 0:R.error);if(T){Z(yt,`RPC '${e}' stream ${r} received error:`,T);const P=T.status;let U=function(V){const j=Ge[V];if(j!==void 0)return zI(j)}(P),z=T.message;U===void 0&&(U=O.INTERNAL,z="Unknown error status: "+P+" with message "+T.message),v=!0,S.fo(new q(U,z)),m.close()}else Z(yt,`RPC '${e}' stream ${r} received:`,E),S._o(E)}}),k(c,$D.STAT_EVENT,I=>{I.stat===zw.PROXY?Z(yt,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===zw.NOPROXY&&Z(yt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.lo()},0),S}}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){return new VM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.si=e,this.timerId=n,this.vo=i,this.Po=r,this.bo=o,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const n=Math.floor(this.Vo+this.No()),i=Math.max(0,Date.now()-this.Do),r=Math.max(0,n-i);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Vo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){this.So!==null&&(this.So.skipDelay(),this.So=null)}cancel(){this.So!==null&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,i,r,o,a,c,h){this.si=e,this.Mo=i,this.Oo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new QI(e,n)}qo(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&this.Fo===null&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,n){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,e!==4?this.Lo.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(pi(n.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.$o===n&&this.Xo(i,r)},i=>{e(()=>{const r=new q(O.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Zo(r)})})}Xo(e,n){const i=this.Yo(this.$o);this.stream=this.tu(e,n),this.stream.oo(()=>{i(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(r=>{i(()=>this.Zo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return n=>{this.si.enqueueAndForget(()=>this.$o===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ab extends XI{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}tu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.Lo.reset();const n=WM(this.serializer,e),i=function(r){if(!("targetChange"in r))return ne.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?jn(o.readTime):ne.min()}(e);return this.listener.eu(n,i)}nu(e){const n={};n.database=Yp(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=Wp(c)?{documents:GM(r,c)}:{query:KM(r,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VI(r,o.resumeToken);const h=Kp(r,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=$c(r,o.snapshotVersion.toTimestamp());const h=Kp(r,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const i=XM(this.serializer,e);i&&(n.labels=i),this.zo(n)}su(e){const n={};n.database=Yp(this.serializer),n.removeTarget=e,this.zo(n)}}class Nb extends XI{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const n=ZM(e.writeResults,e.commitTime),i=jn(e.commitTime);return this.listener.uu(i,n)}return Le(!e.writeResults||e.writeResults.length===0),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Yp(this.serializer),this.zo(e)}ou(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>qM(this.serializer,i))};this.zo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.hu=!1}lu(){if(this.hu)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,n,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.po(e,n,i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new q(O.UNKNOWN,r.toString())})}Ao(e,n,i,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ao(e,n,i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(O.UNKNOWN,o.toString())})}terminate(){this.hu=!0}}class Db{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){this.du===0&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){this.state==="Online"?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,e==="Online"&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(pi(n),this.wu=!1):Z("OnlineStateTracker",n)}Iu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=o,this.vu.Jr(a=>{i.enqueueAndForget(async()=>{Kr(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=re(c);h.Au.add(4),await Il(h),h.Pu.set("Unknown"),h.Au.delete(4),await bh(h)}(this))})}),this.Pu=new Db(i,r)}}async function bh(t){if(Kr(t))for(const e of t.Ru)await e(!0)}async function Il(t){for(const e of t.Ru)await e(!1)}function YI(t,e){const n=re(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),o_(n)?s_(n):fo(n).Uo()&&r_(n,e))}function JI(t,e){const n=re(t),i=fo(n);n.Eu.delete(e),i.Uo()&&ek(n,e),n.Eu.size===0&&(i.Uo()?i.Qo():Kr(n)&&n.Pu.set("Unknown"))}function r_(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(t).nu(e)}function ek(t,e){t.bu.Lt(e),fo(t).su(e)}function s_(t){t.bu=new $M({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Pu.mu()}function o_(t){return Kr(t)&&!fo(t).qo()&&t.Eu.size>0}function Kr(t){return re(t).Au.size===0}function tk(t){t.bu=void 0}async function bb(t){t.Eu.forEach((e,n)=>{r_(t,e)})}async function Ub(t,e){tk(t),o_(t)?(t.Pu.pu(e),s_(t)):t.Pu.set("Unknown")}async function $b(t,e,n){if(t.Pu.set("Online"),e instanceof BI&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Eu.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Eu.delete(a),i.bu.removeTarget(a))}(t,e)}catch(i){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await zc(t,i)}else if(e instanceof Vu?t.bu.Wt(e):e instanceof FI?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(ne.min()))try{const i=await KI(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.bu.ue(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=r.Eu.get(h);f&&r.Eu.set(h,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const f=r.Eu.get(c);if(!f)return;r.Eu.set(c,f.withResumeToken(Rt.EMPTY_BYTE_STRING,f.snapshotVersion)),ek(r,c);const m=new Mi(f.target,c,h,f.sequenceNumber);r_(r,m)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){Z("RemoteStore","Failed to raise snapshot:",i),await zc(t,i)}}async function zc(t,e,n){if(!wl(e))throw e;t.Au.add(1),await Il(t),t.Pu.set("Offline"),n||(n=()=>KI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await bh(t)})}function nk(t,e){return e().catch(n=>zc(t,n,e))}async function Uh(t){const e=re(t),n=er(e);let i=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;zb(e);)try{const r=await Sb(e.localStore,i);if(r===null){e.Tu.length===0&&n.Qo();break}i=r.batchId,Fb(e,r)}catch(r){await zc(e,r)}ik(e)&&rk(e)}function zb(t){return Kr(t)&&t.Tu.length<10}function Fb(t,e){t.Tu.push(e);const n=er(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function ik(t){return Kr(t)&&!er(t).qo()&&t.Tu.length>0}function rk(t){er(t).start()}async function Bb(t){er(t).au()}async function Vb(t){const e=er(t);for(const n of t.Tu)e.ou(n.mutations)}async function jb(t,e,n){const i=t.Tu.shift(),r=Xg.from(i,e,n);await nk(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Uh(t)}async function Hb(t,e){e&&er(t).ru&&await async function(n,i){if(r=i.code,MM(r)&&r!==O.ABORTED){const o=n.Tu.shift();er(n).Go(),await nk(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Uh(n)}var r}(t,e),ik(t)&&rk(t)}async function h0(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const i=Kr(n);n.Au.add(3),await Il(n),i&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await bh(n)}async function Wb(t,e){const n=re(t);e?(n.Au.delete(2),await bh(n)):e||(n.Au.add(2),await Il(n),n.Pu.set("Unknown"))}function fo(t){return t.Vu||(t.Vu=function(e,n,i){const r=re(e);return r.lu(),new Ab(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{oo:bb.bind(null,t),co:Ub.bind(null,t),eu:$b.bind(null,t)}),t.Ru.push(async e=>{e?(t.Vu.Go(),o_(t)?s_(t):t.Pu.set("Unknown")):(await t.Vu.stop(),tk(t))})),t.Vu}function er(t){return t.Su||(t.Su=function(e,n,i){const r=re(e);return r.lu(),new Nb(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{oo:Bb.bind(null,t),co:Hb.bind(null,t),cu:Vb.bind(null,t),uu:jb.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Go(),await Uh(t)):(await t.Su.stop(),t.Tu.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))})),t.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,c=new a_(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l_(t,e){if(pi("AsyncQueue",`${e}: ${t}`),wl(t))return new q(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=Yo(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new Us(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Us)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Us;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.Du=new $e(K.comparator)}track(e){const n=e.doc.key,i=this.Du.get(n);i?e.type!==0&&i.type===3?this.Du=this.Du.insert(n,e):e.type===3&&i.type!==1?this.Du=this.Du.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Du=this.Du.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Du=this.Du.remove(n):e.type===1&&i.type===2?this.Du=this.Du.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):Y():this.Du=this.Du.insert(n,e)}Cu(){const e=[];return this.Du.inorderTraversal((n,i)=>{e.push(i)}),e}}class Js{constructor(e,n,i,r,o,a,c,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Js(e,n,Us.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.xu=void 0,this.listeners=[]}}class Zb{constructor(){this.queries=new ho(e=>II(e),Rh),this.onlineState="Unknown",this.Nu=new Set}}async function u_(t,e){const n=re(t),i=e.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new qb),r)try{o.xu=await n.onListen(i)}catch(a){const c=l_(a,`Initialization of query '${Gp(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.listeners.push(e),e.ku(n.onlineState),o.xu&&e.Mu(o.xu)&&h_(n)}async function c_(t,e){const n=re(t),i=e.query;let r=!1;const o=n.queries.get(i);if(o){const a=o.listeners.indexOf(e);a>=0&&(o.listeners.splice(a,1),r=o.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Gb(t,e){const n=re(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const c of a.listeners)c.Mu(r)&&(i=!0);a.xu=r}}i&&h_(n)}function Kb(t,e,n){const i=re(t),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(n);i.queries.delete(e)}function h_(t){t.Nu.forEach(e=>{e.next()})}class d_{constructor(e,n,i){this.query=e,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=i||{}}Mu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Js(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),n=!0):this.Lu(e,this.onlineState)&&(this.qu(e),n=!0),this.Fu=e,n}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let n=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),n=!0),n}Lu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Uu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Bu(e){if(e.docChanges.length>0)return!0;const n=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qu(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.key=e}}class ok{constructor(e){this.key=e}}class Qb{constructor(e,n){this.query=e,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=le(),this.mutatedKeys=le(),this.Zu=kI(e),this.tc=new Us(this.Zu)}get ec(){return this.Ju}nc(e,n){const i=n?n.sc:new d0,r=n?n.tc:this.tc;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,_)=>{const v=r.get(m),S=Ah(this.query,_)?_:null,k=!!v&&this.mutatedKeys.has(v.key),I=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let R=!1;v&&S?v.data.isEqual(S.data)?k!==I&&(i.track({type:3,doc:S}),R=!0):this.ic(v,S)||(i.track({type:2,doc:S}),R=!0,(h&&this.Zu(S,h)>0||f&&this.Zu(S,f)<0)&&(c=!0)):!v&&S?(i.track({type:0,doc:S}),R=!0):v&&!S&&(i.track({type:1,doc:v}),R=!0,(h||f)&&(c=!0)),R&&(S?(a=a.add(S),o=I?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tc:a,sc:i,ji:c,mutatedKeys:o}}ic(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const o=e.sc.Cu();o.sort((f,m)=>function(_,v){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return S(_)-S(v)}(f.type,m.type)||this.Zu(f.doc,m.doc)),this.rc(i);const a=n?this.oc():[],c=this.Xu.size===0&&this.current?1:0,h=c!==this.Yu;return this.Yu=c,o.length!==0||h?{snapshot:new Js(this.query,e.tc,r,o,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),uc:a}:{uc:a}}ku(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tc:this.tc,sc:new d0,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(n=>this.Ju=this.Ju.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ju=this.Ju.delete(n)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=le(),this.tc.forEach(i=>{this.cc(i.key)&&(this.Xu=this.Xu.add(i.key))});const n=[];return e.forEach(i=>{this.Xu.has(i)||n.push(new ok(i))}),this.Xu.forEach(i=>{e.has(i)||n.push(new sk(i))}),n}ac(e){this.Ju=e.sr,this.Xu=le();const n=this.nc(e.documents);return this.applyChanges(n,!0)}hc(){return Js.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,this.Yu===0,this.hasCachedResults)}}class Xb{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Yb{constructor(e){this.key=e,this.lc=!1}}class Jb{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.fc={},this.dc=new ho(c=>II(c),Rh),this._c=new Map,this.wc=new Set,this.mc=new $e(K.comparator),this.gc=new Map,this.yc=new t_,this.Ic={},this.Tc=new Map,this.Ec=Ys.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return this.Ac===!0}}async function eU(t,e){const n=cU(t);let i,r;const o=n.dc.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.hc();else{const a=await Ib(n.localStore,mi(e)),c=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await tU(n,e,i,c==="current",a.resumeToken),n.isPrimaryClient&&YI(n.remoteStore,a)}return r}async function tU(t,e,n,i,r){t.Rc=(_,v,S)=>async function(k,I,R,E){let y=I.view.nc(R);y.ji&&(y=await l0(k.localStore,I.query,!1).then(({documents:U})=>I.view.nc(U,y)));const T=E&&E.targetChanges.get(I.targetId),P=I.view.applyChanges(y,k.isPrimaryClient,T);return p0(k,I.targetId,P.uc),P.snapshot}(t,_,v,S);const o=await l0(t.localStore,e,!0),a=new Qb(e,o.sr),c=a.nc(o.documents),h=Sl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,h);p0(t,n,f.uc);const m=new Xb(e,n,a);return t.dc.set(e,m),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),f.snapshot}async function nU(t,e){const n=re(t),i=n.dc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(o=>!Rh(o,e))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Jp(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),JI(n.remoteStore,i.targetId),em(n,i.targetId)}).catch(yl)):(em(n,i.targetId),await Jp(n.localStore,i.targetId,!0))}async function iU(t,e,n){const i=hU(t);try{const r=await function(o,a){const c=re(o),h=We.now(),f=a.reduce((v,S)=>v.add(S.key),le());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=gi(),k=le();return c.Xi.getEntries(v,f).next(I=>{S=I,S.forEach((R,E)=>{E.isValidDocument()||(k=k.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,S)).next(I=>{m=I;const R=[];for(const E of a){const y=RM(E,m.get(E.key).overlayedDocument);y!=null&&R.push(new or(E.key,y,mI(y.value.mapValue),Vn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,h,R,a)}).next(I=>{_=I;const R=I.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(v,I.batchId,R)})}).then(()=>({batchId:_.batchId,changes:xI(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let h=o.Ic[o.currentUser.toKey()];h||(h=new $e(ye)),h=h.insert(a,c),o.Ic[o.currentUser.toKey()]=h}(i,r.batchId,n),await kl(i,r.changes),await Uh(i.remoteStore)}catch(r){const o=l_(r,"Failed to persist write");n.reject(o)}}async function ak(t,e){const n=re(t);try{const i=await Eb(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.gc.get(o);a&&(Le(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.lc=!0:r.modifiedDocuments.size>0?Le(a.lc):r.removedDocuments.size>0&&(Le(a.lc),a.lc=!1))}),await kl(n,i,e)}catch(i){await yl(i)}}function f0(t,e,n){const i=re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.dc.forEach((o,a)=>{const c=a.view.ku(e);c.snapshot&&r.push(c.snapshot)}),function(o,a){const c=re(o);c.onlineState=a;let h=!1;c.queries.forEach((f,m)=>{for(const _ of m.listeners)_.ku(a)&&(h=!0)}),h&&h_(c)}(i.eventManager,e),r.length&&i.fc.eu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rU(t,e,n){const i=re(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.gc.get(e),o=r&&r.key;if(o){let a=new $e(K.comparator);a=a.insert(o,Tt.newNoDocument(o,ne.min()));const c=le().add(o),h=new Dh(ne.min(),new Map,new $e(ye),a,c);await ak(i,h),i.mc=i.mc.remove(o),i.gc.delete(e),f_(i)}else await Jp(i.localStore,e,!1).then(()=>em(i,e,n)).catch(yl)}async function sU(t,e){const n=re(t),i=e.batch.batchId;try{const r=await wb(n.localStore,e);uk(n,i,null),lk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await kl(n,r)}catch(r){await yl(r)}}async function oU(t,e,n){const i=re(t);try{const r=await function(o,a){const c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,a).next(m=>(Le(m!==null),f=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(i.localStore,e);uk(i,e,n),lk(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await kl(i,r)}catch(r){await yl(r)}}function lk(t,e){(t.Tc.get(e)||[]).forEach(n=>{n.resolve()}),t.Tc.delete(e)}function uk(t,e,n){const i=re(t);let r=i.Ic[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ic[i.currentUser.toKey()]=r}}function em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.dc.delete(i),n&&t.fc.vc(i,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach(i=>{t.yc.containsKey(i)||ck(t,i)})}function ck(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);n!==null&&(JI(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),f_(t))}function p0(t,e,n){for(const i of n)i instanceof sk?(t.yc.addReference(i.key,e),aU(t,i)):i instanceof ok?(Z("SyncEngine","Document no longer in limbo: "+i.key),t.yc.removeReference(i.key,e),t.yc.containsKey(i.key)||ck(t,i.key)):Y()}function aU(t,e){const n=e.key,i=n.path.canonicalString();t.mc.get(n)||t.wc.has(i)||(Z("SyncEngine","New document in limbo: "+n),t.wc.add(i),f_(t))}function f_(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new K(xe.fromString(e)),i=t.Ec.next();t.gc.set(i,new Yb(n)),t.mc=t.mc.insert(n,i),YI(t.remoteStore,new Mi(mi(Lh(n.path)),i,"TargetPurposeLimboResolution",Hg.ct))}}async function kl(t,e,n){const i=re(t),r=[],o=[],a=[];i.dc.isEmpty()||(i.dc.forEach((c,h)=>{a.push(i.Rc(h,e,n).then(f=>{if((f||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(h.targetId,f!=null&&f.fromCache?"not-current":"current"),f){r.push(f);const m=i_.Bi(h.targetId,f);o.push(m)}}))}),await Promise.all(a),i.fc.eu(r),await async function(c,h){const f=re(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>b.forEach(h,_=>b.forEach(_.$i,v=>f.persistence.referenceDelegate.addReference(m,_.targetId,v)).next(()=>b.forEach(_.Fi,v=>f.persistence.referenceDelegate.removeReference(m,_.targetId,v)))))}catch(m){if(!wl(m))throw m;Z("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const v=f.Hi.get(_),S=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(S);f.Hi=f.Hi.insert(_,k)}}}(i.localStore,o))}async function lU(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const i=await GI(n.localStore,e);n.currentUser=e,function(r,o){r.Tc.forEach(a=>{a.forEach(c=>{c.reject(new q(O.CANCELLED,o))})}),r.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kl(n,i.tr)}}function uU(t,e){const n=re(t),i=n.gc.get(e);if(i&&i.lc)return le().add(i.key);{let r=le();const o=n._c.get(e);if(!o)return r;for(const a of o){const c=n.dc.get(a);r=r.unionWith(c.view.ec)}return r}}function cU(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ak.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rU.bind(null,e),e.fc.eu=Gb.bind(null,e.eventManager),e.fc.vc=Kb.bind(null,e.eventManager),e}function hU(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oU.bind(null,e),e}class m0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Mh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return yb(this.persistence,new _b,e.initialUser,this.serializer)}createPersistence(e){return new mb(n_.js,this.serializer)}createSharedClientState(e){return new Cb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>f0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lU.bind(null,this.syncEngine),await Wb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zb}createDatastore(e){const n=Mh(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new Rb(r));var r;return function(o,a,c,h){return new Ob(o,a,c,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,o=c=>f0(this.syncEngine,c,0),a=c0.D()?new c0:new xb,new Mb(n,i,r,o,a);var n,i,r,o,a}createSyncEngine(e,n){return function(i,r,o,a,c,h,f){const m=new Jb(i,r,o,a,c,h);return f&&(m.Ac=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=re(e);Z("RemoteStore","RemoteStore shutting down."),n.Au.add(5),await Il(n),n.vu.shutdown(),n.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=wt.UNAUTHENTICATED,this.clientId=dI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=l_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Cf(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await GI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function g0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mU(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>h0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>h0(e.remoteStore,o)),t._onlineComponents=e}function pU(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function mU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!pU(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await Cf(t,new m0)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Cf(t,new m0);return t._offlineComponents}async function hk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await g0(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await g0(t,new dU))),t._onlineComponents}function gU(t){return hk(t).then(e=>e.syncEngine)}async function Fc(t){const e=await hk(t),n=e.eventManager;return n.onListen=eU.bind(null,e.syncEngine),n.onUnlisten=nU.bind(null,e.syncEngine),n}function _U(t,e,n={}){const i=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const f=new p_({next:_=>{o.enqueueAndForget(()=>c_(r,m));const v=_.docs.has(a);!v&&_.fromCache?h.reject(new q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&c.source==="server"?h.reject(new q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new d_(Lh(a.path),f,{includeMetadataChanges:!0,Uu:!0});return u_(r,m)}(await Fc(t),t.asyncQueue,e,n,i)),i.promise}function vU(t,e,n={}){const i=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const f=new p_({next:_=>{o.enqueueAndForget(()=>c_(r,m)),_.fromCache&&c.source==="server"?h.reject(new q(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new d_(a,f,{includeMetadataChanges:!0,Uu:!0});return u_(r,m)}(await Fc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e,n){if(!n)throw new q(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yU(t,e,n,i){if(e===!0&&i===!0)throw new q(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function v0(t){if(!K.isDocumentKey(t))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y0(t){if(K.isDocumentKey(t))throw new q(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $h(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(t);throw new q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w0(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new VD;switch(n.type){case"firstParty":return new qD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=_0.get(e);n&&(Z("ComponentProvider","Removing Datastore"),_0.delete(e),n.terminate())}(this),Promise.resolve()}}function wU(t,e,n,i={}){var r;const o=(t=dn(t,zh))._getSettings();if(o.host!=="firestore.googleapis.com"&&o.host!==e&&Zs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=wt.MOCK_USER;else{a=nT(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new wt(h)}t._authCredentials=new jD(new hI(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Qr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class Zi extends Qr{constructor(e,n,i){super(e,n,Lh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new K(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function tm(t,e,...n){if(t=Oe(t),dk("collection","path",e),t instanceof zh){const i=xe.fromString(e,...n);return y0(i),new Zi(t,null,i)}{if(!(t instanceof xt||t instanceof Zi))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xe.fromString(e,...n));return y0(i),new Zi(t.firestore,null,i)}}function cn(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=dI.A()),dk("doc","path",e),t instanceof zh){const i=xe.fromString(e,...n);return v0(i),new xt(t,null,new K(i))}{if(!(t instanceof xt||t instanceof Zi))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(xe.fromString(e,...n));return v0(i),new xt(t.firestore,t instanceof Zi?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new QI(this,"async_queue_retry"),this.Yc=()=>{const n=kf();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Lo.ko()};const e=kf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const n=kf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const n=new ai;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(this.Gc.length!==0){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!wl(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){const n=this.Kc.then(()=>(this.Wc=!0,e().catch(i=>{this.zc=i,this.Wc=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw pi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Wc=!1,i))));return this.Kc=n,n}enqueueAfterDelay(e,n,i){this.Xc(),this.Jc.indexOf(e)>-1&&(n=0);const r=a_.createAndSchedule(this,e,n,i,o=>this.ea(o));return this.jc.push(r),r}Xc(){this.zc&&Y()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(const n of this.jc)if(n.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.jc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const n=this.jc.indexOf(e);this.jc.splice(n,1)}}function E0(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of n)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Vr extends zh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new EU,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fk(this),this._firestoreClient.terminate()}}function TU(t,e){const n=typeof t=="object"?t:og(),i=typeof t=="string"?t:e||"(default)",r=lh(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=eT("firestore");o&&wU(r,...o)}return r}function Fh(t){return t._firestoreClient||fk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fk(t){var e,n,i;const r=t._freezeSettings(),o=function(a,c,h,f){return new rM(a,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new fU(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eo(Rt.fromBase64String(e))}catch(n){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eo(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=/^__.*__$/;class IU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tl(e,this.data,n,this.fieldTransforms)}}class pk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new or(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Vh{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.oa(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Vh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:i,ha:!1});return r.la(e),r}fa(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:i,ha:!1});return r.oa(),r}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Bc(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(e.length===0)throw this._a("Document fields must not be empty");if(mk(this.ua)&&SU.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class kU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Mh(e)}ga(e,n,i,r=!1){return new Vh({ua:e,methodName:n,ma:i,path:St.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function g_(t){const e=t._freezeSettings(),n=Mh(t._databaseId);return new kU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CU(t,e,n,i,r,o={}){const a=t.ga(o.merge||o.mergeFields?2:0,e,n,r);v_("Data must be an object, but it was:",a,i);const c=gk(i,a);let h,f;if(o.merge)h=new Kt(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const v=nm(e,_,n);if(!a.contains(v))throw new q(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vk(m,v)||m.push(v)}h=new Kt(m),f=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,f=a.fieldTransforms;return new IU(new Ft(c),h,f)}class jh extends Cl{_toFieldTransform(e){if(e.ua!==2)throw e.ua===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function xU(t,e,n){return new Vh({ua:3,ma:e.settings.ma,methodName:t._methodName,ha:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class __ extends Cl{_toFieldTransform(e){return new MI(e.path,new Za)}isEqual(e){return e instanceof __}}class PU extends Cl{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=xU(this,e,!0),i=this.ya.map(o=>po(o,n)),r=new Xs(i);return new MI(e.path,r)}isEqual(e){return this===e}}function LU(t,e,n,i){const r=t.ga(1,e,n);v_("Data must be an object, but it was:",r,i);const o=[],a=Ft.empty();Gr(i,(h,f)=>{const m=y_(e,h,n);f=Oe(f);const _=r.fa(m);if(f instanceof jh)o.push(m);else{const v=po(f,_);v!=null&&(o.push(m),a.set(m,v))}});const c=new Kt(o);return new pk(a,c,r.fieldTransforms)}function RU(t,e,n,i,r,o){const a=t.ga(1,e,n),c=[nm(e,i,n)],h=[r];if(o.length%2!=0)throw new q(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)c.push(nm(e,o[v])),h.push(o[v+1]);const f=[],m=Ft.empty();for(let v=c.length-1;v>=0;--v)if(!vk(f,c[v])){const S=c[v];let k=h[v];k=Oe(k);const I=a.fa(S);if(k instanceof jh)f.push(S);else{const R=po(k,I);R!=null&&(f.push(S),m.set(S,R))}}const _=new Kt(f);return new pk(m,_,a.fieldTransforms)}function AU(t,e,n,i=!1){return po(n,t.ga(i?4:3,e))}function po(t,e){if(_k(t=Oe(t)))return v_("Unsupported field value:",e,t),gk(t,e);if(t instanceof Cl)return function(n,i){if(!mk(i.ua))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&e.ua!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let o=0;for(const a of n){let c=po(a,i.da(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=Oe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return IM(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=We.fromDate(n);return{timestampValue:$c(i.serializer,r)}}if(n instanceof We){const r=new We(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$c(i.serializer,r)}}if(n instanceof m_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof eo)return{bytesValue:VI(i.serializer,n._byteString)};if(n instanceof xt){const r=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(r))throw i._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:e_(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${$h(n)}`)}(t,e)}function gk(t,e){const n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(t,(i,r)=>{const o=po(r,e.aa(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function _k(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof m_||t instanceof eo||t instanceof xt||t instanceof Cl)}function v_(t,e,n){if(!_k(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=$h(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function nm(t,e,n){if((e=Oe(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return y_(t,e);throw Bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const NU=new RegExp("[~\\*/\\[\\]]");function y_(t,e,n){if(e.search(NU)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bc(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new q(O.INVALID_ARGUMENT,c+t+h)}function vk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(w_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OU extends yk{data(){return super.data()}}function w_(t,e){return typeof e=="string"?y_(t,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E_{}class DU extends E_{}function MU(t,e,...n){let i=[];e instanceof E_&&i.push(e),i=i.concat(n),function(r){const o=r.filter(c=>c instanceof T_).length,a=r.filter(c=>c instanceof Hh).length;if(o>1||o>0&&a>0)throw new q(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Hh extends DU{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Hh(e,n,i)}_apply(e){const n=this._parse(e);return Ek(e._query,n),new Qr(e.firestore,e.converter,qp(e._query,n))}_parse(e){const n=g_(e.firestore);return function(r,o,a,c,h,f,m){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new q(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){S0(m,f);const v=[];for(const S of m)v.push(T0(c,r,S));_={arrayValue:{values:v}}}else _=T0(c,r,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||S0(m,f),_=AU(a,o,m,f==="in"||f==="not-in");return Xe.create(h,f,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bU(t,e,n){const i=e,r=w_("where",t);return Hh._create(r,i,n)}class T_ extends E_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new T_(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)Ek(o,c),o=qp(o,c)}(e._query,n),new Qr(e.firestore,e.converter,qp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function T0(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new q(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SI(e)&&n.indexOf("/")!==-1)throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(xe.fromString(n));if(!K.isDocumentKey(i))throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ww(t,new K(i))}if(n instanceof xt)return Ww(t,n._key);throw new q(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function S0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ek(t,e){if(e.isInequality()){const i=Qg(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new q(O.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=TI(t);o!==null&&UU(t,r,o)}const n=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function UU(t,e,n){if(!n.isEqual(e))throw new q(O.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class $U{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Gr(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new m_(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=qg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const n=Ji(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=xe.fromString(e);Le(ZI(i));const r=new Wa(i.get(1),i.get(3)),o=new K(i.popFirst(5));return r.isEqual(n)||pi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tk extends yk{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(w_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ju extends Tk{data(e={}){return super.data(e)}}class Sk{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ea(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ju(this._firestore,this._userDataWriter,i.key,i,new ea(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new ju(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ea(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new ju(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ea(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:FU(a.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(t){t=dn(t,xt);const e=dn(t.firestore,Vr);return _U(Fh(e),t._key).then(n=>Ck(e,t,n))}class S_ extends $U{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function VU(t){t=dn(t,Qr);const e=dn(t.firestore,Vr),n=Fh(e),i=new S_(e);return wk(t._query),vU(n,t._query).then(r=>new Sk(e,i,t,r))}function im(t,e,n){t=dn(t,xt);const i=dn(t.firestore,Vr),r=zU(t.converter,e,n);return kk(i,[CU(g_(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Vn.none())])}function ks(t,e,n,...i){t=dn(t,xt);const r=dn(t.firestore,Vr),o=g_(r);let a;return a=typeof(e=Oe(e))=="string"||e instanceof Bh?RU(o,"updateDoc",t._key,e,n,i):LU(o,"updateDoc",t._key,e),kk(r,[a.toMutation(t._key,Vn.exists(!0))])}function Ik(t,...e){var n,i,r;t=Oe(t);let o={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||E0(e[a])||(o=e[a],a++);const c={includeMetadataChanges:o.includeMetadataChanges};if(E0(e[a])){const _=e[a];e[a]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[a+1]=(i=_.error)===null||i===void 0?void 0:i.bind(_),e[a+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let h,f,m;if(t instanceof xt)f=dn(t.firestore,Vr),m=Lh(t._key.path),h={next:_=>{e[a]&&e[a](Ck(f,t,_))},error:e[a+1],complete:e[a+2]};else{const _=dn(t,Qr);f=dn(_.firestore,Vr),m=_._query;const v=new S_(f);h={next:S=>{e[a]&&e[a](new Sk(f,v,_,S))},error:e[a+1],complete:e[a+2]},wk(t._query)}return function(_,v,S,k){const I=new p_(k),R=new d_(v,I,S);return _.asyncQueue.enqueueAndForget(async()=>u_(await Fc(_),R)),()=>{I.Sc(),_.asyncQueue.enqueueAndForget(async()=>c_(await Fc(_),R))}}(Fh(f),m,c,h)}function kk(t,e){return function(n,i){const r=new ai;return n.asyncQueue.enqueueAndForget(async()=>iU(await gU(n),i,r)),r.promise}(Fh(t),e)}function Ck(t,e,n){const i=n.docs.get(e._key),r=new S_(t);return new Tk(t,r,e._key,i,new ea(n.hasPendingWrites,n.fromCache),e.converter)}function Vc(){return new __("serverTimestamp")}function I0(...t){return new PU("arrayUnion",t)}(function(t,e=!0){(function(n){co=n})(Wr),Mr(new Xi("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),a=new Vr(new HD(n.getProvider("auth-internal")),new GD(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(c.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),zn(Fw,"3.11.0",t),zn(Fw,"3.11.0","esm2017")})();var jU="firebase",HU="9.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(jU,HU,"app");const WU={apiKey:"AIzaSyB573Tzzt1WsqB7Re5BNrpD7ZUOYyixjOI",authDomain:"geochat-473a9.firebaseapp.com",projectId:"geochat-473a9",storageBucket:"geochat-473a9.appspot.com",messagingSenderId:"222094061202",appId:"1:222094061202:web:0bd0a54a7680e7d05a404b"};sT(WU);const Wh=T2(),qU=DO(),qt=TU();/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ka.apply(this,arguments)}var bi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bi||(bi={}));const k0="popstate";function ZU(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:a,hash:c}=i.location;return rm("",{pathname:o,search:a,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:jc(r)}return KU(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function I_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GU(){return Math.random().toString(36).substr(2,8)}function C0(t,e){return{usr:t.state,key:t.key,idx:e}}function rm(t,e,n,i){return n===void 0&&(n=null),Ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mo(e):e,{state:n,key:e&&e.key||i||GU()})}function jc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function mo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function KU(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,c=bi.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Ka({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function _(){c=bi.Pop;let R=m(),E=R==null?null:R-f;f=R,h&&h({action:c,location:I.location,delta:E})}function v(R,E){c=bi.Push;let y=rm(I.location,R,E);n&&n(y,R),f=m()+1;let T=C0(y,f),P=I.createHref(y);try{a.pushState(T,"",P)}catch{r.location.assign(P)}o&&h&&h({action:c,location:I.location,delta:1})}function S(R,E){c=bi.Replace;let y=rm(I.location,R,E);n&&n(y,R),f=m();let T=C0(y,f),P=I.createHref(y);a.replaceState(T,"",P),o&&h&&h({action:c,location:I.location,delta:0})}function k(R){let E=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof R=="string"?R:jc(R);return Ye(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let I={get action(){return c},get location(){return t(r,a)},listen(R){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(k0,_),h=R,()=>{r.removeEventListener(k0,_),h=null}},createHref(R){return e(r,R)},createURL:k,encodeLocation(R){let E=k(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:S,go(R){return a.go(R)}};return I}var x0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x0||(x0={}));function QU(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?mo(e):e,r=k_(i.pathname||"/",n);if(r==null)return null;let o=xk(t);XU(o);let a=null;for(let c=0;a==null&&c<o.length;++c)a=o$(o[c],u$(r));return a}function xk(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(Ye(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Gi([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),xk(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:r$(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,a);else for(let h of Pk(o.path))r(o,a,h)}),e}function Pk(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=Pk(i.join("/")),c=[];return c.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&c.push(...a),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function XU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:s$(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const YU=/^:\w+$/,JU=3,e$=2,t$=1,n$=10,i$=-2,P0=t=>t==="*";function r$(t,e){let n=t.split("/"),i=n.length;return n.some(P0)&&(i+=i$),e&&(i+=e$),n.filter(r=>!P0(r)).reduce((r,o)=>r+(YU.test(o)?JU:o===""?t$:n$),i)}function s$(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function o$(t,e){let{routesMeta:n}=t,i={},r="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],h=a===n.length-1,f=r==="/"?e:e.slice(r.length)||"/",m=a$({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f);if(!m)return null;Object.assign(i,m.params);let _=c.route;o.push({params:i,pathname:Gi([r,m.pathname]),pathnameBase:f$(Gi([r,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(r=Gi([r,m.pathnameBase]))}return o}function a$(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=l$(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((f,m,_)=>{if(m==="*"){let v=c[_]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}return f[m]=c$(c[_]||"",m),f},{}),pathname:o,pathnameBase:a,pattern:t}}function l$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),I_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,c)=>(i.push(c),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function u$(t){try{return decodeURI(t)}catch(e){return I_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function c$(t,e){try{return decodeURIComponent(t)}catch(n){return I_(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function k_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function h$(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?mo(t):t;return{pathname:n?n.startsWith("/")?n:d$(n,e):e,search:p$(i),hash:m$(r)}}function d$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function xf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rk(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=mo(t):(r=Ka({},t),Ye(!r.pathname||!r.pathname.includes("?"),xf("?","pathname","search",r)),Ye(!r.pathname||!r.pathname.includes("#"),xf("#","pathname","hash",r)),Ye(!r.search||!r.search.includes("#"),xf("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,c;if(i||a==null)c=n;else{let _=e.length-1;if(a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),_-=1;r.pathname=v.join("/")}c=_>=0?e[_]:"/"}let h=h$(r,c),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Gi=t=>t.join("/").replace(/\/\/+/g,"/"),f$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),p$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,m$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function g$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ak=["post","put","patch","delete"];new Set(Ak);const _$=["get",...Ak];new Set(_$);/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hc.apply(this,arguments)}const C_=A.createContext(null),v$=A.createContext(null),go=A.createContext(null),qh=A.createContext(null),_o=A.createContext({outlet:null,matches:[]}),Nk=A.createContext(null);function y$(t,e){let{relative:n}=e===void 0?{}:e;xl()||Ye(!1);let{basename:i,navigator:r}=A.useContext(go),{hash:o,pathname:a,search:c}=Dk(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:Gi([i,a])),r.createHref({pathname:h,search:c,hash:o})}function xl(){return A.useContext(qh)!=null}function Zh(){return xl()||Ye(!1),A.useContext(qh).location}function Ok(t){A.useContext(go).static||A.useLayoutEffect(t)}function x_(){return A.useContext(C_)!=null?N$():w$()}function w$(){xl()||Ye(!1);let{basename:t,navigator:e}=A.useContext(go),{matches:n}=A.useContext(_o),{pathname:i}=Zh(),r=JSON.stringify(Lk(n).map(c=>c.pathnameBase)),o=A.useRef(!1);return Ok(()=>{o.current=!0}),A.useCallback(function(c,h){if(h===void 0&&(h={}),!o.current)return;if(typeof c=="number"){e.go(c);return}let f=Rk(c,JSON.parse(r),i,h.relative==="path");t!=="/"&&(f.pathname=f.pathname==="/"?t:Gi([t,f.pathname])),(h.replace?e.replace:e.push)(f,h.state,h)},[t,e,r,i])}function Dk(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=A.useContext(_o),{pathname:r}=Zh(),o=JSON.stringify(Lk(i).map(a=>a.pathnameBase));return A.useMemo(()=>Rk(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function E$(t,e){return T$(t,e)}function T$(t,e,n){xl()||Ye(!1);let{navigator:i}=A.useContext(go),{matches:r}=A.useContext(_o),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Zh(),f;if(e){var m;let I=typeof e=="string"?mo(e):e;c==="/"||(m=I.pathname)!=null&&m.startsWith(c)||Ye(!1),f=I}else f=h;let _=f.pathname||"/",v=c==="/"?_:_.slice(c.length)||"/",S=QU(t,{pathname:v}),k=x$(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Gi([c,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?c:Gi([c,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),r,n);return e&&k?A.createElement(qh.Provider,{value:{location:Hc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:bi.Pop}},k):k}function S$(){let t=A$(),e=g$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:r},n):null,o)}const I$=A.createElement(S$,null);class k$ extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?A.createElement(_o.Provider,{value:this.props.routeContext},A.createElement(Nk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function C$(t){let{routeContext:e,match:n,children:i}=t,r=A.useContext(C_);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(_o.Provider,{value:e},i)}function x$(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));c>=0||Ye(!1),o=o.slice(0,Math.min(o.length,c+1))}return o.reduceRight((c,h,f)=>{let m=h.route.id?a==null?void 0:a[h.route.id]:null,_=null;n&&(_=h.route.errorElement||I$);let v=e.concat(o.slice(0,f+1)),S=()=>{let k;return m?k=_:h.route.element?k=h.route.element:k=c,A.createElement(C$,{match:h,routeContext:{outlet:c,matches:v},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?A.createElement(k$,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:S(),routeContext:{outlet:null,matches:v}}):S()},null)}var sm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(sm||(sm={}));var Qa;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Qa||(Qa={}));function P$(t){let e=A.useContext(C_);return e||Ye(!1),e}function L$(t){let e=A.useContext(v$);return e||Ye(!1),e}function R$(t){let e=A.useContext(_o);return e||Ye(!1),e}function Mk(t){let e=R$(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function A$(){var t;let e=A.useContext(Nk),n=L$(Qa.UseRouteError),i=Mk(Qa.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function N$(){let{router:t}=P$(sm.UseNavigateStable),e=Mk(Qa.UseNavigateStable),n=A.useRef(!1);return Ok(()=>{n.current=!0}),A.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Hc({fromRouteId:e},o)))},[t,e])}function ta(t){Ye(!1)}function O$(t){let{basename:e="/",children:n=null,location:i,navigationType:r=bi.Pop,navigator:o,static:a=!1}=t;xl()&&Ye(!1);let c=e.replace(/^\/*/,"/"),h=A.useMemo(()=>({basename:c,navigator:o,static:a}),[c,o,a]);typeof i=="string"&&(i=mo(i));let{pathname:f="/",search:m="",hash:_="",state:v=null,key:S="default"}=i,k=A.useMemo(()=>{let I=k_(f,c);return I==null?null:{location:{pathname:I,search:m,hash:_,state:v,key:S},navigationType:r}},[c,f,m,_,v,S,r]);return k==null?null:A.createElement(go.Provider,{value:h},A.createElement(qh.Provider,{children:n,value:k}))}function D$(t){let{children:e,location:n}=t;return E$(om(e),n)}var L0;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(L0||(L0={}));new Promise(()=>{});function om(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(i,r)=>{if(!A.isValidElement(i))return;let o=[...e,r];if(i.type===A.Fragment){n.push.apply(n,om(i.props.children,o));return}i.type!==ta&&Ye(!1),!i.props.index||!i.props.children||Ye(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=om(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},am.apply(this,arguments)}function M$(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function b$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function U$(t,e){return t.button===0&&(!e||e==="_self")&&!b$(t)}const $$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function z$(t){let{basename:e,children:n,window:i}=t,r=A.useRef();r.current==null&&(r.current=ZU({window:i,v5Compat:!0}));let o=r.current,[a,c]=A.useState({action:o.action,location:o.location});return A.useLayoutEffect(()=>o.listen(c),[o]),A.createElement(O$,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const F$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bk=A.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:c,target:h,to:f,preventScrollReset:m}=e,_=M$(e,$$),{basename:v}=A.useContext(go),S,k=!1;if(typeof f=="string"&&B$.test(f)&&(S=f,F$))try{let y=new URL(window.location.href),T=f.startsWith("//")?new URL(y.protocol+f):new URL(f),P=k_(T.pathname,v);T.origin===y.origin&&P!=null?f=P+T.search+T.hash:k=!0}catch{}let I=y$(f,{relative:r}),R=V$(f,{replace:a,state:c,target:h,preventScrollReset:m,relative:r});function E(y){i&&i(y),y.defaultPrevented||R(y)}return A.createElement("a",am({},_,{href:S||I,onClick:k||o?i:E,ref:n,target:h}))});var R0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(R0||(R0={}));var A0;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A0||(A0={}));function V$(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a}=e===void 0?{}:e,c=x_(),h=Zh(),f=Dk(t,{relative:a});return A.useCallback(m=>{if(U$(m,n)){m.preventDefault();let _=i!==void 0?i:jc(h)===jc(f);c(t,{replace:_,state:r,preventScrollReset:o,relative:a})}},[h,c,f,i,r,n,t,o,a])}function j$(){const[t,e]=A.useState(!1),n=x_();return W("div",{className:"formContainer",children:He("div",{className:"formWrapper",children:[W("img",{src:KE,alt:"GeoChat logo"}),W("span",{className:"title",children:" Register "}),He("form",{onSubmit:async r=>{r.preventDefault();const o=r.target[0].value,a=r.target[1].value,c=r.target[2].value,h=r.target[3].files[0];try{const f=await iN(Wh,a,c),m=new Date().getTime(),_=OO(qU,`${o+m}`);await AO(_,h).then(()=>{NO(_).then(async v=>{try{await oN(f.user,{displayName:o,photoURL:v}),await im(cn(qt,"users",f.user.uid),{uid:f.user.uid,displayName:o,email:a,photoURL:v}),await im(cn(qt,"userChats",f.user.uid),{}),n("/")}catch(S){console.log(S),e(!0)}})})}catch{e(!0)}},children:[W("input",{type:"text",placeholder:"display name"}),W("input",{type:"email",placeholder:"email"}),W("input",{type:"password",placeholder:"password"}),W("input",{type:"file"}),W("button",{children:" Sign Up "}),t&&W("span",{children:" Oops! Something went wrong "})]}),He("p",{children:[" Already have an account? ",W(bk,{to:"/login",children:" Log In "})," "]})]})})}const H$=""+new URL("pin_icon-d12fb608.png",import.meta.url).href,ar=A.createContext(null),W$=({children:t})=>{const[e,n]=A.useState({});return A.useEffect(()=>{const i=uN(Wh,r=>{n(r),console.log(r)});return()=>{i()}},[]),W(ar.Provider,{value:{currentUser:e},children:t})},vo=A.createContext(void 0),q$=({children:t})=>{const{currentUser:e}=A.useContext(ar),n={chatId:"null",user:{}},i=(a,c)=>{switch(c.type){case"CHANGE_USER":return{user:c.payload,chatId:e.uid>c.payload.uid?e.uid+c.payload.uid:c.payload.uid+e.uid};default:return a}},[r,o]=A.useReducer(i,n);return W(vo.Provider,{value:{data:r,dispatch:o},children:t})};let Su;const Z$=new Uint8Array(16);function G$(){if(!Su&&(Su=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Su))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Su(Z$)}const ct=[];for(let t=0;t<256;++t)ct.push((t+256).toString(16).slice(1));function K$(t,e=0){return(ct[t[e+0]]+ct[t[e+1]]+ct[t[e+2]]+ct[t[e+3]]+"-"+ct[t[e+4]]+ct[t[e+5]]+"-"+ct[t[e+6]]+ct[t[e+7]]+"-"+ct[t[e+8]]+ct[t[e+9]]+"-"+ct[t[e+10]]+ct[t[e+11]]+ct[t[e+12]]+ct[t[e+13]]+ct[t[e+14]]+ct[t[e+15]]).toLowerCase()}const Q$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),N0={randomUUID:Q$};function O0(t,e,n){if(N0.randomUUID&&!e&&!t)return N0.randomUUID();t=t||{};const i=t.random||(t.rng||G$)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return K$(i)}function X$(t,e){const n=A.useRef(e);A.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Y$=1;function J$(t){return Object.freeze({__version:Y$,map:t})}function ez(t,e){return Object.freeze({...t,...e})}const Uk=A.createContext(null),$k=Uk.Provider;function tz(){const t=A.useContext(Uk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function nz(t){function e(n,i){const{instance:r,context:o}=t(n).current;return A.useImperativeHandle(i,()=>r),n.children==null?null:Hu.createElement($k,{value:o},n.children)}return A.forwardRef(e)}function iz(t){function e(n,i){const{instance:r}=t(n).current;return A.useImperativeHandle(i,()=>r),null}return A.forwardRef(e)}function rz(t,e){const n=A.useRef();A.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function zk(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var lm={exports:{}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(fx,function(n){var i="1.9.3";function r(s){var l,u,d,p;for(u=1,d=arguments.length;u<d;u++){p=arguments[u];for(l in p)s[l]=p[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var d=u.call(arguments,2);return function(){return s.apply(l,d.length?d.concat(u.call(arguments)):arguments)}}var c=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,l,u){var d,p,g,w;return w=function(){d=!1,p&&(g.apply(u,p),p=!1)},g=function(){d?p=arguments:(s.apply(u,arguments),setTimeout(w,l),d=!0)},g}function m(s,l,u){var d=l[1],p=l[0],g=d-p;return s===d&&u?s:((s-p)%g+g)%g+p}function _(){return!1}function v(s,l){if(l===!1)return s;var u=Math.pow(10,l===void 0?6:l);return Math.round(s*u)/u}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return S(s).split(/\s+/)}function I(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in l)s.options[u]=l[u];return s.options}function R(s,l,u){var d=[];for(var p in s)d.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(s[p]));return(!l||l.indexOf("?")===-1?"?":"&")+d.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function y(s,l){return s.replace(E,function(u,d){var p=l[d];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(l)),p})}var T=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function P(s,l){for(var u=0;u<s.length;u++)if(s[u]===l)return u;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var V=0;function j(s){var l=+new Date,u=Math.max(0,16-(l-V));return V=l+u,window.setTimeout(s,u)}var fe=window.requestAnimationFrame||z("RequestAnimationFrame")||j,se=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function Te(s,l,u){if(u&&fe===j)s.call(l);else return fe.call(window,a(s,l))}function nt(s){s&&se.call(window,s)}var lr={__proto__:null,extend:r,create:o,bind:a,get lastId(){return c},stamp:h,throttle:f,wrapNum:m,falseFn:_,formatNum:v,trim:S,splitWords:k,setOptions:I,getParamString:R,template:y,isArray:T,indexOf:P,emptyImageUrl:U,requestFn:fe,cancelFn:se,requestAnimFrame:Te,cancelAnimFrame:nt};function tn(){}tn.extend=function(s){var l=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,d=o(u);d.constructor=l,l.prototype=d;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(l[p]=this[p]);return s.statics&&r(l,s.statics),s.includes&&(Gh(s.includes),r.apply(null,[d].concat(s.includes))),r(d,s),delete d.statics,delete d.includes,d.options&&(d.options=u.options?o(u.options):{},r(d.options,s.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,w=d._initHooks.length;g<w;g++)d._initHooks[g].call(this)}},l},tn.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},tn.mergeOptions=function(s){return r(this.prototype.options,s),this},tn.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Gh(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=T(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(s,l,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],l);else{s=k(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],l,u)}return this},off:function(s,l,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var d in s)this._off(d,s[d],l);else{s=k(s);for(var p=arguments.length===1,g=0,w=s.length;g<w;g++)p?this._off(s[g]):this._off(s[g],l,u)}return this},_on:function(s,l,u,d){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,u)===!1){u===this&&(u=void 0);var p={fn:l,ctx:u};d&&(p.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(p)}},_off:function(s,l,u){var d,p,g;if(this._events&&(d=this._events[s],!!d)){if(arguments.length===1){if(this._firingCount)for(p=0,g=d.length;p<g;p++)d[p].fn=_;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var w=this._listens(s,l,u);if(w!==!1){var C=d[w];this._firingCount&&(C.fn=_,this._events[s]=d=d.slice()),d.splice(w,1)}}},fire:function(s,l,u){if(!this.listens(s,u))return this;var d=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var p=this._events[s];if(p){this._firingCount=this._firingCount+1||1;for(var g=0,w=p.length;g<w;g++){var C=p[g],x=C.fn;C.once&&this.off(s,x,C.ctx),x.call(C.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(s,l,u,d){typeof s!="string"&&console.warn('"string" type argument expected');var p=l;typeof l!="function"&&(d=!!l,p=void 0,u=void 0);var g=this._events&&this._events[s];if(g&&g.length&&this._listens(s,p,u)!==!1)return!0;if(d){for(var w in this._eventParents)if(this._eventParents[w].listens(s,l,u,d))return!0}return!1},_listens:function(s,l,u){if(!this._events)return!1;var d=this._events[s]||[];if(!l)return!!d.length;u===this&&(u=void 0);for(var p=0,g=d.length;p<g;p++)if(d[p].fn===l&&d[p].ctx===u)return p;return!1},once:function(s,l,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],l,!0);else{s=k(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],l,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var qn=tn.extend(lt);function N(s,l,u){this.x=u?Math.round(s):s,this.y=u?Math.round(l):l}var te=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(s){return this.clone()._add($(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract($(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new N(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new N(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(s){s=$(s);var l=s.x-this.x,u=s.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(s){return s=$(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=$(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function $(s,l,u){return s instanceof N?s:T(s)?new N(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new N(s.x,s.y):new N(s,l,u)}function J(s,l){if(s)for(var u=l?[s,l]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}J.prototype={extend:function(s){var l,u;if(!s)return this;if(s instanceof N||typeof s[0]=="number"||"x"in s)l=u=$(s);else if(s=pe(s),l=s.min,u=s.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return $(this.min.x,this.max.y)},getTopRight:function(){return $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,u;return typeof s[0]=="number"||s instanceof N?s=$(s):s=pe(s),s instanceof J?(l=s.min,u=s.max):l=u=s,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=pe(s);var l=this.min,u=this.max,d=s.min,p=s.max,g=p.x>=l.x&&d.x<=u.x,w=p.y>=l.y&&d.y<=u.y;return g&&w},overlaps:function(s){s=pe(s);var l=this.min,u=this.max,d=s.min,p=s.max,g=p.x>l.x&&d.x<u.x,w=p.y>l.y&&d.y<u.y;return g&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,u=this.max,d=Math.abs(l.x-u.x)*s,p=Math.abs(l.y-u.y)*s;return pe($(l.x-d,l.y-p),$(u.x+d,u.y+p))},equals:function(s){return s?(s=pe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function pe(s,l){return!s||s instanceof J?s:new J(s,l)}function Je(s,l){if(s)for(var u=l?[s,l]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}Je.prototype={extend:function(s){var l=this._southWest,u=this._northEast,d,p;if(s instanceof ge)d=s,p=s;else if(s instanceof Je){if(d=s._southWest,p=s._northEast,!d||!p)return this}else return s?this.extend(ce(s)||Se(s)):this;return!l&&!u?(this._southWest=new ge(d.lat,d.lng),this._northEast=new ge(p.lat,p.lng)):(l.lat=Math.min(d.lat,l.lat),l.lng=Math.min(d.lng,l.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(s){var l=this._southWest,u=this._northEast,d=Math.abs(l.lat-u.lat)*s,p=Math.abs(l.lng-u.lng)*s;return new Je(new ge(l.lat-d,l.lng-p),new ge(u.lat+d,u.lng+p))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ge||"lat"in s?s=ce(s):s=Se(s);var l=this._southWest,u=this._northEast,d,p;return s instanceof Je?(d=s.getSouthWest(),p=s.getNorthEast()):d=p=s,d.lat>=l.lat&&p.lat<=u.lat&&d.lng>=l.lng&&p.lng<=u.lng},intersects:function(s){s=Se(s);var l=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>=l.lat&&d.lat<=u.lat,w=p.lng>=l.lng&&d.lng<=u.lng;return g&&w},overlaps:function(s){s=Se(s);var l=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>l.lat&&d.lat<u.lat,w=p.lng>l.lng&&d.lng<u.lng;return g&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Se(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(s,l){return s instanceof Je?s:new Je(s,l)}function ge(s,l,u){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,u!==void 0&&(this.alt=+u)}ge.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return vi.distance(this,ce(s))},wrap:function(){return vi.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,u=l/Math.cos(Math.PI/180*this.lat);return Se([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function ce(s,l,u){return s instanceof ge?s:T(s)&&typeof s[0]!="object"?s.length===3?new ge(s[0],s[1],s[2]):s.length===2?new ge(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ge(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new ge(s,l,u)}var Ut={latLngToPoint:function(s,l){var u=this.projection.project(s),d=this.scale(l);return this.transformation._transform(u,d)},pointToLatLng:function(s,l){var u=this.scale(l),d=this.transformation.untransform(s,u);return this.projection.unproject(d)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(s),d=this.transformation.transform(l.min,u),p=this.transformation.transform(l.max,u);return new J(d,p)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,d=s.alt;return new ge(u,l,d)},wrapLatLngBounds:function(s){var l=s.getCenter(),u=this.wrapLatLng(l),d=l.lat-u.lat,p=l.lng-u.lng;if(d===0&&p===0)return s;var g=s.getSouthWest(),w=s.getNorthEast(),C=new ge(g.lat-d,g.lng-p),x=new ge(w.lat-d,w.lng-p);return new Je(C,x)}},vi=r({},Ut,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var u=Math.PI/180,d=s.lat*u,p=l.lat*u,g=Math.sin((l.lat-s.lat)*u/2),w=Math.sin((l.lng-s.lng)*u/2),C=g*g+Math.cos(d)*Math.cos(p)*w*w,x=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*x}}),L_=6378137,Kh={R:L_,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,s.lat),-u),p=Math.sin(d*l);return new N(this.R*s.lng*l,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(s){var l=180/Math.PI;return new ge((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=L_*Math.PI;return new J([-s,-s],[s,s])}()};function Qh(s,l,u,d){if(T(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=u,this._d=d}Qh.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new N((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function yo(s,l,u,d){return new Qh(s,l,u,d)}var Xh=r({},vi,{code:"EPSG:3857",projection:Kh,transformation:function(){var s=.5/(Math.PI*Kh.R);return yo(s,.5,-s,.5)}()}),jk=r({},Xh,{code:"EPSG:900913"});function R_(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function A_(s,l){var u="",d,p,g,w,C,x;for(d=0,g=s.length;d<g;d++){for(C=s[d],p=0,w=C.length;p<w;p++)x=C[p],u+=(p?"L":"M")+x.x+" "+x.y;u+=l?G.svg?"z":"x":""}return u||"M0 0"}var Yh=document.documentElement.style,Pl="ActiveXObject"in window,Hk=Pl&&!document.addEventListener,N_="msLaunchUri"in navigator&&!("documentMode"in document),Jh=xn("webkit"),O_=xn("android"),D_=xn("android 2")||xn("android 3"),Wk=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qk=O_&&xn("Google")&&Wk<537&&!("AudioNode"in window),ed=!!window.opera,M_=!N_&&xn("chrome"),b_=xn("gecko")&&!Jh&&!ed&&!Pl,Zk=!M_&&xn("safari"),U_=xn("phantom"),$_="OTransition"in Yh,Gk=navigator.platform.indexOf("Win")===0,z_=Pl&&"transition"in Yh,td="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!D_,F_="MozPerspective"in Yh,Kk=!window.L_DISABLE_3D&&(z_||td||F_)&&!$_&&!U_,wo=typeof orientation<"u"||xn("mobile"),Qk=wo&&Jh,Xk=wo&&td,B_=!window.PointerEvent&&window.MSPointerEvent,V_=!!(window.PointerEvent||B_),j_="ontouchstart"in window||!!window.TouchEvent,Yk=!window.L_NO_TOUCH&&(j_||V_),Jk=wo&&ed,eC=wo&&b_,tC=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,nC=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return s}(),iC=function(){return!!document.createElement("canvas").getContext}(),nd=!!(document.createElementNS&&R_("svg").createSVGRect),rC=!!nd&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),sC=!nd&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),oC=navigator.platform.indexOf("Mac")===0,aC=navigator.platform.indexOf("Linux")===0;function xn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var G={ie:Pl,ielt9:Hk,edge:N_,webkit:Jh,android:O_,android23:D_,androidStock:qk,opera:ed,chrome:M_,gecko:b_,safari:Zk,phantom:U_,opera12:$_,win:Gk,ie3d:z_,webkit3d:td,gecko3d:F_,any3d:Kk,mobile:wo,mobileWebkit:Qk,mobileWebkit3d:Xk,msPointer:B_,pointer:V_,touch:Yk,touchNative:j_,mobileOpera:Jk,mobileGecko:eC,retina:tC,passiveEvents:nC,canvas:iC,svg:nd,vml:sC,inlineSvg:rC,mac:oC,linux:aC},H_=G.msPointer?"MSPointerDown":"pointerdown",W_=G.msPointer?"MSPointerMove":"pointermove",q_=G.msPointer?"MSPointerUp":"pointerup",Z_=G.msPointer?"MSPointerCancel":"pointercancel",id={touchstart:H_,touchmove:W_,touchend:q_,touchcancel:Z_},G_={touchstart:fC,touchmove:Ll,touchend:Ll,touchcancel:Ll},Xr={},K_=!1;function lC(s,l,u){return l==="touchstart"&&dC(),G_[l]?(u=G_[l].bind(this,u),s.addEventListener(id[l],u,!1),u):(console.warn("wrong event specified:",l),_)}function uC(s,l,u){if(!id[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(id[l],u,!1)}function cC(s){Xr[s.pointerId]=s}function hC(s){Xr[s.pointerId]&&(Xr[s.pointerId]=s)}function Q_(s){delete Xr[s.pointerId]}function dC(){K_||(document.addEventListener(H_,cC,!0),document.addEventListener(W_,hC,!0),document.addEventListener(q_,Q_,!0),document.addEventListener(Z_,Q_,!0),K_=!0)}function Ll(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in Xr)l.touches.push(Xr[u]);l.changedTouches=[l],s(l)}}function fC(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ut(l),Ll(s,l)}function pC(s){var l={},u,d;for(d in s)u=s[d],l[d]=u&&u.bind?u.bind(s):u;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var mC=200;function gC(s,l){s.addEventListener("dblclick",l);var u=0,d;function p(g){if(g.detail!==1){d=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var w=tv(g);if(!(w.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!w.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var C=Date.now();C-u<=mC?(d++,d===2&&l(pC(g))):d=1,u=C}}}return s.addEventListener("click",p),{dblclick:l,simDblclick:p}}function _C(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var rd=Nl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Eo=Nl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),X_=Eo==="webkitTransition"||Eo==="OTransition"?Eo+"End":"transitionend";function Y_(s){return typeof s=="string"?document.getElementById(s):s}function To(s,l){var u=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(s,null);u=d?d[l]:null}return u==="auto"?null:u}function _e(s,l,u){var d=document.createElement(s);return d.className=l||"",u&&u.appendChild(d),d}function De(s){var l=s.parentNode;l&&l.removeChild(s)}function Rl(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Yr(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Jr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function sd(s,l){if(s.classList!==void 0)return s.classList.contains(l);var u=Al(s);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function oe(s,l){if(s.classList!==void 0)for(var u=k(l),d=0,p=u.length;d<p;d++)s.classList.add(u[d]);else if(!sd(s,l)){var g=Al(s);od(s,(g?g+" ":"")+l)}}function Ve(s,l){s.classList!==void 0?s.classList.remove(l):od(s,S((" "+Al(s)+" ").replace(" "+l+" "," ")))}function od(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Al(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function nn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&vC(s,l)}function vC(s,l){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(d)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):s.style.filter+=" progid:"+d+"(opacity="+l+")"}function Nl(s){for(var l=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in l)return s[u];return!1}function ur(s,l,u){var d=l||new N(0,0);s.style[rd]=(G.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function qe(s,l){s._leaflet_pos=l,G.any3d?ur(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function cr(s){return s._leaflet_pos||new N(0,0)}var So,Io,ad;if("onselectstart"in document)So=function(){ie(window,"selectstart",ut)},Io=function(){Ie(window,"selectstart",ut)};else{var ko=Nl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);So=function(){if(ko){var s=document.documentElement.style;ad=s[ko],s[ko]="none"}},Io=function(){ko&&(document.documentElement.style[ko]=ad,ad=void 0)}}function ld(){ie(window,"dragstart",ut)}function ud(){Ie(window,"dragstart",ut)}var Ol,cd;function hd(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Dl(),Ol=s,cd=s.style.outline,s.style.outline="none",ie(window,"keydown",Dl))}function Dl(){Ol&&(Ol.style.outline=cd,Ol=void 0,cd=void 0,Ie(window,"keydown",Dl))}function J_(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function dd(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var yC={__proto__:null,TRANSFORM:rd,TRANSITION:Eo,TRANSITION_END:X_,get:Y_,getStyle:To,create:_e,remove:De,empty:Rl,toFront:Yr,toBack:Jr,hasClass:sd,addClass:oe,removeClass:Ve,setClass:od,getClass:Al,setOpacity:nn,testProp:Nl,setTransform:ur,setPosition:qe,getPosition:cr,get disableTextSelection(){return So},get enableTextSelection(){return Io},disableImageDrag:ld,enableImageDrag:ud,preventOutline:hd,restoreOutline:Dl,getSizedParentNode:J_,getScale:dd};function ie(s,l,u,d){if(l&&typeof l=="object")for(var p in l)pd(s,p,l[p],u);else{l=k(l);for(var g=0,w=l.length;g<w;g++)pd(s,l[g],u,d)}return this}var Pn="_leaflet_events";function Ie(s,l,u,d){if(arguments.length===1)ev(s),delete s[Pn];else if(l&&typeof l=="object")for(var p in l)md(s,p,l[p],u);else if(l=k(l),arguments.length===2)ev(s,function(C){return P(l,C)!==-1});else for(var g=0,w=l.length;g<w;g++)md(s,l[g],u,d);return this}function ev(s,l){for(var u in s[Pn]){var d=u.split(/\d/)[0];(!l||l(d))&&md(s,d,null,null,u)}}var fd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function pd(s,l,u,d){var p=l+h(u)+(d?"_"+h(d):"");if(s[Pn]&&s[Pn][p])return this;var g=function(C){return u.call(d||s,C||window.event)},w=g;!G.touchNative&&G.pointer&&l.indexOf("touch")===0?g=lC(s,l,g):G.touch&&l==="dblclick"?g=gC(s,g):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(fd[l]||l,g,G.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(g=function(C){C=C||window.event,_d(s,C)&&w(C)},s.addEventListener(fd[l],g,!1)):s.addEventListener(l,w,!1):s.attachEvent("on"+l,g),s[Pn]=s[Pn]||{},s[Pn][p]=g}function md(s,l,u,d,p){p=p||l+h(u)+(d?"_"+h(d):"");var g=s[Pn]&&s[Pn][p];if(!g)return this;!G.touchNative&&G.pointer&&l.indexOf("touch")===0?uC(s,l,g):G.touch&&l==="dblclick"?_C(s,g):"removeEventListener"in s?s.removeEventListener(fd[l]||l,g,!1):s.detachEvent("on"+l,g),s[Pn][p]=null}function hr(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function gd(s){return pd(s,"wheel",hr),this}function Co(s){return ie(s,"mousedown touchstart dblclick contextmenu",hr),s._leaflet_disable_click=!0,this}function ut(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function dr(s){return ut(s),hr(s),this}function tv(s){if(s.composedPath)return s.composedPath();for(var l=[],u=s.target;u;)l.push(u),u=u.parentNode;return l}function nv(s,l){if(!l)return new N(s.clientX,s.clientY);var u=dd(l),d=u.boundingClientRect;return new N((s.clientX-d.left)/u.x-l.clientLeft,(s.clientY-d.top)/u.y-l.clientTop)}var wC=G.linux&&G.chrome?window.devicePixelRatio:G.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function iv(s){return G.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/wC:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function _d(s,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var EC={__proto__:null,on:ie,off:Ie,stopPropagation:hr,disableScrollPropagation:gd,disableClickPropagation:Co,preventDefault:ut,stop:dr,getPropagationPath:tv,getMousePosition:nv,getWheelDelta:iv,isExternalTarget:_d,addListener:ie,removeListener:Ie},rv=qn.extend({run:function(s,l,u,d){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=cr(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Te(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var u=this._startPos.add(this._offset.multiplyBy(s));l&&u._round(),qe(this._el,u),this.fire("step")},_complete:function(){nt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),he=qn.extend({options:{crs:Xh,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=I(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Eo&&G.any3d&&!G.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ie(this._proxy,X_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,u.zoom):this._tryAnimatedPan(s,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(G.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(G.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,u){var d=this.getZoomScale(l),p=this.getSize().divideBy(2),g=s instanceof N?s:this.latLngToContainerPoint(s),w=g.subtract(p).multiplyBy(1-1/d),C=this.containerPointToLatLng(p.add(w));return this.setView(C,l,{zoom:u})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Se(s);var u=$(l.paddingTopLeft||l.padding||[0,0]),d=$(l.paddingBottomRight||l.padding||[0,0]),p=this.getBoundsZoom(s,!1,u.add(d));if(p=typeof l.maxZoom=="number"?Math.min(l.maxZoom,p):p,p===1/0)return{center:s.getCenter(),zoom:p};var g=d.subtract(u).divideBy(2),w=this.project(s.getSouthWest(),p),C=this.project(s.getNorthEast(),p),x=this.unproject(w.add(C).divideBy(2).add(g),p);return{center:x,zoom:p}},fitBounds:function(s,l){if(s=Se(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=$(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new rv,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,u){if(u=u||{},u.animate===!1||!G.any3d)return this.setView(s,l,u);this._stop();var d=this.project(this.getCenter()),p=this.project(s),g=this.getSize(),w=this._zoom;s=ce(s),l=l===void 0?w:l;var C=Math.max(g.x,g.y),x=C*this.getZoomScale(w,l),D=p.distanceTo(d)||1,F=1.42,X=F*F;function ae(Ze){var Zl=Ze?-1:1,ux=Ze?x:C,cx=x*x-C*C+Zl*X*X*D*D,hx=2*ux*X*D,Pd=cx/hx,$v=Math.sqrt(Pd*Pd+1)-Pd,dx=$v<1e-9?-18:Math.log($v);return dx}function sn(Ze){return(Math.exp(Ze)-Math.exp(-Ze))/2}function pr(Ze){return(Math.exp(Ze)+Math.exp(-Ze))/2}function ql(Ze){return sn(Ze)/pr(Ze)}var Ei=ae(0);function xd(Ze){return C*(pr(Ei)/pr(Ei+F*Ze))}function sx(Ze){return C*(pr(Ei)*ql(Ei+F*Ze)-sn(Ei))/X}function ox(Ze){return 1-Math.pow(1-Ze,1.5)}var ax=Date.now(),bv=(ae(1)-Ei)/F,lx=u.duration?1e3*u.duration:1e3*bv*.8;function Uv(){var Ze=(Date.now()-ax)/lx,Zl=ox(Ze)*bv;Ze<=1?(this._flyToFrame=Te(Uv,this),this._move(this.unproject(d.add(p.subtract(d).multiplyBy(sx(Zl)/D)),w),this.getScaleZoom(C/xd(Zl),w),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Uv.call(this),this},flyToBounds:function(s,l){var u=this._getBoundsCenterZoom(s,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(s){return s=Se(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,Se(s));return u.equals(d)||this.panTo(d,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var u=$(l.paddingTopLeft||l.padding||[0,0]),d=$(l.paddingBottomRight||l.padding||[0,0]),p=this.project(this.getCenter()),g=this.project(s),w=this.getPixelBounds(),C=pe([w.min.add(u),w.max.subtract(d)]),x=C.getSize();if(!C.contains(g)){this._enforcingBounds=!0;var D=g.subtract(C.getCenter()),F=C.extend(g).getSize().subtract(x);p.x+=D.x<0?-F.x:F.x,p.y+=D.y<0?-F.y:F.y,this.panTo(this.unproject(p),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=l.divideBy(2).round(),p=u.divideBy(2).round(),g=d.subtract(p);return!g.x&&!g.y?this:(s.animate&&s.pan?this.panBy(g):(s.pan&&this._rawPanBy(g),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),u=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,s):navigator.geolocation.getCurrentPosition(l,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,u=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,u=s.coords.longitude,d=new ge(l,u),p=d.toBounds(s.coords.accuracy*2),g=this._locateOptions;if(g.setView){var w=this.getBoundsZoom(p);this.setView(d,g.maxZoom?Math.min(w,g.maxZoom):w)}var C={latlng:d,bounds:p,timestamp:s.timestamp};for(var x in s.coords)typeof s.coords[x]=="number"&&(C[x]=s.coords[x]);this.fire("locationfound",C)}},addHandler:function(s,l){if(!l)return this;var u=this[s]=new l(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),De(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(nt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)De(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),d=_e("div",u,l||this._mapPane);return s&&(this._panes[s]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new Je(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,u){s=Se(s),u=$(u||[0,0]);var d=this.getZoom()||0,p=this.getMinZoom(),g=this.getMaxZoom(),w=s.getNorthWest(),C=s.getSouthEast(),x=this.getSize().subtract(u),D=pe(this.project(C,d),this.project(w,d)).getSize(),F=G.any3d?this.options.zoomSnap:1,X=x.x/D.x,ae=x.y/D.y,sn=l?Math.max(X,ae):Math.min(X,ae);return d=this.getScaleZoom(sn,d),F&&(d=Math.round(d/(F/100))*(F/100),d=l?Math.ceil(d/F)*F:Math.floor(d/F)*F),Math.max(p,Math.min(g,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var u=this._getTopLeftPoint(s,l);return new J(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(s)/u.scale(l)},getScaleZoom:function(s,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var d=u.zoom(s*u.scale(l));return isNaN(d)?1/0:d},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng($(s),l)},layerPointToLatLng:function(s){var l=$(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Se(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return $(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return $(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint($(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return nv(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Y_(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ie(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&G.any3d,oe(s,"leaflet-container"+(G.touch?" leaflet-touch":"")+(G.retina?" leaflet-retina":"")+(G.ielt9?" leaflet-oldie":"")+(G.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=To(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qe(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(s.markerPane,"leaflet-zoom-hide"),oe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,u){qe(this._mapPane,new N(0,0));var d=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var p=this._zoom!==l;this._moveStart(p,u)._move(s,l)._moveEnd(p),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,u,d){l===void 0&&(l=this._zoom);var p=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),d?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return nt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){qe(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Ie:ie;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),G.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){nt(this._resizeRequest),this._resizeRequest=Te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var u=[],d,p=l==="mouseout"||l==="mouseover",g=s.target||s.srcElement,w=!1;g;){if(d=this._targets[h(g)],d&&(l==="click"||l==="preclick")&&this._draggableMoved(d)){w=!0;break}if(d&&d.listens(l,!0)&&(p&&!_d(g,s)||(u.push(d),p))||g===this._container)break;g=g.parentNode}return!u.length&&!w&&!p&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var u=s.type;u==="mousedown"&&hd(l),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,u){if(s.type==="click"){var d=r({},s);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var p=this._findEventTargets(s,l);if(u){for(var g=[],w=0;w<u.length;w++)u[w].listens(l,!0)&&g.push(u[w]);p=g.concat(p)}if(p.length){l==="contextmenu"&&ut(s);var C=p[0],x={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var D=C.getLatLng&&(!C._radius||C._radius<=10);x.containerPoint=D?this.latLngToContainerPoint(C.getLatLng()):this.mouseEventToContainerPoint(s),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=D?C.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(w=0;w<p.length;w++)if(p[w].fire(l,x,!0),x.originalEvent._stopped||p[w].options.bubblingMouseEvents===!1&&P(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return cr(this._mapPane)||new N(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var u=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var u=this.getSize()._divideBy(2);return this.project(s,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,u){var d=this._getNewPixelOrigin(u,l);return this.project(s,l)._subtract(d)},_latLngBoundsToNewLayerBounds:function(s,l,u){var d=this._getNewPixelOrigin(u,l);return pe([this.project(s.getSouthWest(),l)._subtract(d),this.project(s.getNorthWest(),l)._subtract(d),this.project(s.getSouthEast(),l)._subtract(d),this.project(s.getNorthEast(),l)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,u){if(!u)return s;var d=this.project(s,l),p=this.getSize().divideBy(2),g=new J(d.subtract(p),d.add(p)),w=this._getBoundsOffset(g,u,l);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?s:this.unproject(d.add(w),l)},_limitOffset:function(s,l){if(!l)return s;var u=this.getPixelBounds(),d=new J(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(d,l))},_getBoundsOffset:function(s,l,u){var d=pe(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),p=d.min.subtract(s.min),g=d.max.subtract(s.max),w=this._rebound(p.x,-g.x),C=this._rebound(p.y,-g.y);return new N(w,C)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),u=this.getMaxZoom(),d=G.any3d?this.options.zoomSnap:1;return d&&(s=Math.round(s/d)*d),Math.max(l,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var u=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var s=this._proxy=_e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var u=rd,d=this._proxy.style[u];ur(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){De(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ur(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(l),p=this._getCenterOffset(s)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(p)?!1:(Te(function(){this._moveStart(!0,!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function TC(s,l){return new he(s,l)}var mn=tn.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),u=this.getPosition(),d=s._controlCorners[u];return oe(l,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(De(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),xo=function(s){return new mn(s)};he.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",u=this._controlContainer=_e("div",l+"control-container",this._container);function d(p,g){var w=l+p+" "+l+g;s[p+g]=_e("div",w,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)De(this._controlCorners[s]);De(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sv=mn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,u,d){return u<d?-1:d<u?1:0}},initialize:function(s,l,u){I(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var d in s)this._addLayer(s[d],d);for(d in l)this._addLayer(l[d],d,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return mn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=_e("div",s),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Co(l),gd(l);var d=this._section=_e("section",s+"-list");u&&(this._map.on("click",this.collapse,this),ie(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=_e("a",s+"-toggle",l);p.href="#",p.title="Layers",p.setAttribute("role","button"),ie(p,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){ut(g),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=_e("div",s+"-base",d),this._separator=_e("div",s+"-separator",d),this._overlaysList=_e("div",s+"-overlays",d),l.appendChild(d)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(a(function(d,p){return this.options.sortFunction(d.layer,p.layer,d.name,p.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rl(this._baseLayersList),Rl(this._overlaysList),this._layerControlInputs=[];var s,l,u,d,p=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),l=l||d.overlay,s=s||!d.overlay,p+=d.overlay?0:1;return this.options.hideSingleBase&&(s=s&&p>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),u=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(s,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(s){var l=document.createElement("label"),u=this._map.hasLayer(s.layer),d;s.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(d),d.layerId=h(s.layer),ie(d,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+s.name;var g=document.createElement("span");l.appendChild(g),g.appendChild(d),g.appendChild(p);var w=s.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){var s=this._layerControlInputs,l,u,d=[],p=[];this._handlingClick=!0;for(var g=s.length-1;g>=0;g--)l=s[g],u=this._getLayer(l.layerId).layer,l.checked?d.push(u):l.checked||p.push(u);for(g=0;g<p.length;g++)this._map.hasLayer(p[g])&&this._map.removeLayer(p[g]);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])||this._map.addLayer(d[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,u,d=this._map.getZoom(),p=s.length-1;p>=0;p--)l=s[p],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;ie(s,"click",ut),this.expand(),setTimeout(function(){Ie(s,"click",ut)})}}),SC=function(s,l,u){return new sv(s,l,u)},vd=mn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",u=_e("div",l+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,u,d,p){var g=_e("a",u,d);return g.innerHTML=s,g.href="#",g.title=l,g.setAttribute("role","button"),g.setAttribute("aria-label",l),Co(g),ie(g,"click",dr),ie(g,"click",p,this),ie(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ve(this._zoomInButton,l),Ve(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(oe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(oe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});he.mergeOptions({zoomControl:!0}),he.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vd,this.addControl(this.zoomControl))});var IC=function(s){return new vd(s)},ov=mn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",u=_e("div",l),d=this.options;return this._addScales(d,l+"-line",u),s.on(d.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,u){s.metric&&(this._mScale=_e("div",l,u)),s.imperial&&(this._iScale=_e("div",l,u))},_update:function(){var s=this._map,l=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/s)},_updateImperial:function(s){var l=s*3.2808399,u,d,p;l>5280?(u=l/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(p=this._getRoundNum(l),this._updateScale(this._iScale,p+" ft",p/l))},_updateScale:function(s,l,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),u=s/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),kC=function(s){return new ov(s)},CC='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yd=mn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(G.inlineSvg?CC+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=_e("div","leaflet-control-attribution"),Co(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});he.mergeOptions({attributionControl:!0}),he.addInitHook(function(){this.options.attributionControl&&new yd().addTo(this)});var xC=function(s){return new yd(s)};mn.Layers=sv,mn.Zoom=vd,mn.Scale=ov,mn.Attribution=yd,xo.layers=SC,xo.zoom=IC,xo.scale=kC,xo.attribution=xC;var Ln=tn.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ln.addTo=function(s,l){return s.addHandler(l,this),this};var PC={Events:lt},av=G.touch?"touchstart mousedown":"mousedown",yi=qn.extend({options:{clickTolerance:3},initialize:function(s,l,u,d){I(this,d),this._element=s,this._dragStartTarget=l||s,this._preventOutline=u},enable:function(){this._enabled||(ie(this._dragStartTarget,av,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yi._dragging===this&&this.finishDrag(!0),Ie(this._dragStartTarget,av,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!sd(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){yi._dragging===this&&this.finishDrag();return}if(!(yi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(yi._dragging=this,this._preventOutline&&hd(this._element),ld(),So(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,u=J_(this._element);this._startPoint=new N(l.clientX,l.clientY),this._startPos=cr(this._element),this._parentScale=dd(u);var d=s.type==="mousedown";ie(document,d?"mousemove":"touchmove",this._onMove,this),ie(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,u=new N(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ut(s),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),qe(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ve(document.body,"leaflet-dragging"),this._lastTarget&&(Ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ie(document,"mousemove touchmove",this._onMove,this),Ie(document,"mouseup touchend touchcancel",this._onUp,this),ud(),Io(),this._moved&&this._moving&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,yi._dragging=!1}});function lv(s,l){if(!l||!s.length)return s.slice();var u=l*l;return s=AC(s,u),s=RC(s,u),s}function uv(s,l,u){return Math.sqrt(Po(s,l,u,!0))}function LC(s,l,u){return Po(s,l,u)}function RC(s,l){var u=s.length,d=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new d(u);p[0]=p[u-1]=1,wd(s,p,l,0,u-1);var g,w=[];for(g=0;g<u;g++)p[g]&&w.push(s[g]);return w}function wd(s,l,u,d,p){var g=0,w,C,x;for(C=d+1;C<=p-1;C++)x=Po(s[C],s[d],s[p],!0),x>g&&(w=C,g=x);g>u&&(l[w]=1,wd(s,l,u,d,w),wd(s,l,u,w,p))}function AC(s,l){for(var u=[s[0]],d=1,p=0,g=s.length;d<g;d++)NC(s[d],s[p])>l&&(u.push(s[d]),p=d);return p<g-1&&u.push(s[g-1]),u}var cv;function hv(s,l,u,d,p){var g=d?cv:fr(s,u),w=fr(l,u),C,x,D;for(cv=w;;){if(!(g|w))return[s,l];if(g&w)return!1;C=g||w,x=Ml(s,l,C,u,p),D=fr(x,u),C===g?(s=x,g=D):(l=x,w=D)}}function Ml(s,l,u,d,p){var g=l.x-s.x,w=l.y-s.y,C=d.min,x=d.max,D,F;return u&8?(D=s.x+g*(x.y-s.y)/w,F=x.y):u&4?(D=s.x+g*(C.y-s.y)/w,F=C.y):u&2?(D=x.x,F=s.y+w*(x.x-s.x)/g):u&1&&(D=C.x,F=s.y+w*(C.x-s.x)/g),new N(D,F,p)}function fr(s,l){var u=0;return s.x<l.min.x?u|=1:s.x>l.max.x&&(u|=2),s.y<l.min.y?u|=4:s.y>l.max.y&&(u|=8),u}function NC(s,l){var u=l.x-s.x,d=l.y-s.y;return u*u+d*d}function Po(s,l,u,d){var p=l.x,g=l.y,w=u.x-p,C=u.y-g,x=w*w+C*C,D;return x>0&&(D=((s.x-p)*w+(s.y-g)*C)/x,D>1?(p=u.x,g=u.y):D>0&&(p+=w*D,g+=C*D)),w=s.x-p,C=s.y-g,d?w*w+C*C:new N(p,g)}function rn(s){return!T(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function dv(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),rn(s)}function fv(s,l){var u,d,p,g,w,C,x,D;if(!s||s.length===0)throw new Error("latlngs not passed");rn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var F=[];for(var X in s)F.push(l.project(ce(s[X])));var ae=F.length;for(u=0,d=0;u<ae-1;u++)d+=F[u].distanceTo(F[u+1])/2;if(d===0)D=F[0];else for(u=0,g=0;u<ae-1;u++)if(w=F[u],C=F[u+1],p=w.distanceTo(C),g+=p,g>d){x=(g-d)/p,D=[C.x-x*(C.x-w.x),C.y-x*(C.y-w.y)];break}return l.unproject($(D))}var OC={__proto__:null,simplify:lv,pointToSegmentDistance:uv,closestPointOnSegment:LC,clipSegment:hv,_getEdgeIntersection:Ml,_getBitCode:fr,_sqClosestPointOnSegment:Po,isFlat:rn,_flat:dv,polylineCenter:fv};function pv(s,l,u){var d,p=[1,4,2,8],g,w,C,x,D,F,X,ae;for(g=0,F=s.length;g<F;g++)s[g]._code=fr(s[g],l);for(C=0;C<4;C++){for(X=p[C],d=[],g=0,F=s.length,w=F-1;g<F;w=g++)x=s[g],D=s[w],x._code&X?D._code&X||(ae=Ml(D,x,X,l,u),ae._code=fr(ae,l),d.push(ae)):(D._code&X&&(ae=Ml(D,x,X,l,u),ae._code=fr(ae,l),d.push(ae)),d.push(x));s=d}return s}function mv(s,l){var u,d,p,g,w,C,x,D,F;if(!s||s.length===0)throw new Error("latlngs not passed");rn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var X=[];for(var ae in s)X.push(l.project(ce(s[ae])));var sn=X.length;for(C=x=D=0,u=0,d=sn-1;u<sn;d=u++)p=X[u],g=X[d],w=p.y*g.x-g.y*p.x,x+=(p.x+g.x)*w,D+=(p.y+g.y)*w,C+=w*3;return C===0?F=X[0]:F=[x/C,D/C],l.unproject($(F))}var DC={__proto__:null,clipPolygon:pv,polygonCenter:mv},Ed={project:function(s){return new N(s.lng,s.lat)},unproject:function(s){return new ge(s.y,s.x)},bounds:new J([-180,-90],[180,90])},Td={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,u=this.R,d=s.lat*l,p=this.R_MINOR/u,g=Math.sqrt(1-p*p),w=g*Math.sin(d),C=Math.tan(Math.PI/4-d/2)/Math.pow((1-w)/(1+w),g/2);return d=-u*Math.log(Math.max(C,1e-10)),new N(s.lng*l*u,d)},unproject:function(s){for(var l=180/Math.PI,u=this.R,d=this.R_MINOR/u,p=Math.sqrt(1-d*d),g=Math.exp(-s.y/u),w=Math.PI/2-2*Math.atan(g),C=0,x=.1,D;C<15&&Math.abs(x)>1e-7;C++)D=p*Math.sin(w),D=Math.pow((1-D)/(1+D),p/2),x=Math.PI/2-2*Math.atan(g*D)-w,w+=x;return new ge(w*l,s.x*l/u)}},MC={__proto__:null,LonLat:Ed,Mercator:Td,SphericalMercator:Kh},bC=r({},vi,{code:"EPSG:3395",projection:Td,transformation:function(){var s=.5/(Math.PI*Td.R);return yo(s,.5,-s,.5)}()}),gv=r({},vi,{code:"EPSG:4326",projection:Ed,transformation:yo(1/180,1,-1/180,.5)}),UC=r({},Ut,{projection:Ed,transformation:yo(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var u=l.lng-s.lng,d=l.lat-s.lat;return Math.sqrt(u*u+d*d)},infinite:!0});Ut.Earth=vi,Ut.EPSG3395=bC,Ut.EPSG3857=Xh,Ut.EPSG900913=jk,Ut.EPSG4326=gv,Ut.Simple=UC;var gn=qn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});he.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},_addLayers:function(s){s=s?T(s)?s:[s]:[];for(var l=0,u=s.length;l<u;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var p=this._zoomBoundLayers[d].options;s=p.minZoom===void 0?s:Math.min(s,p.minZoom),l=p.maxZoom===void 0?l:Math.max(l,p.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var es=gn.extend({initialize:function(s,l){I(this,l),this._layers={};var u,d;if(s)for(u=0,d=s.length;u<d;u++)this.addLayer(s[u])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[s]&&d[s].apply(d,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),$C=function(s,l){return new es(s,l)},Zn=es.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),es.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),es.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Je;for(var l in this._layers){var u=this._layers[l];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),zC=function(s,l){return new Zn(s,l)},ts=tn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(d,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(s,l){var u=this.options,d=u[l+"Size"];typeof d=="number"&&(d=[d,d]);var p=$(d),g=$(l==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(u.className||""),g&&(s.style.marginLeft=-g.x+"px",s.style.marginTop=-g.y+"px"),p&&(s.style.width=p.x+"px",s.style.height=p.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return G.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function FC(s){return new ts(s)}var Lo=ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Lo.imagePath!="string"&&(Lo.imagePath=this._detectIconPath()),(this.options.imagePath||Lo.imagePath)+ts.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(u,d,p){var g=d.exec(u);return g&&g[p]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=_e("div","leaflet-default-icon-path",document.body),l=To(s,"background-image")||To(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),_v=Ln.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new yi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,u=l._map,d=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,g=cr(l._icon),w=u.getPixelBounds(),C=u.getPixelOrigin(),x=pe(w.min._subtract(C).add(p),w.max._subtract(C).subtract(p));if(!x.contains(g)){var D=$((Math.max(x.max.x,g.x)-x.max.x)/(w.max.x-x.max.x)-(Math.min(x.min.x,g.x)-x.min.x)/(w.min.x-x.min.x),(Math.max(x.max.y,g.y)-x.max.y)/(w.max.y-x.max.y)-(Math.min(x.min.y,g.y)-x.min.y)/(w.min.y-x.min.y)).multiplyBy(d);u.panBy(D,{animate:!1}),this._draggable._newPos._add(D),this._draggable._startPos._add(D),qe(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=Te(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(nt(this._panRequest),this._panRequest=Te(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,u=l._shadow,d=cr(l._icon),p=l._map.layerPointToLatLng(d);u&&qe(u,d),l._latlng=p,s.latlng=p,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){nt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),bl=gn.extend({options:{icon:new Lo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){I(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),oe(u,l),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ie(u,"focus",this._panOnFocus,this);var p=s.icon.createShadow(this._shadow),g=!1;p!==this._shadow&&(this._removeShadow(),g=!0),p&&(oe(p,l),p.alt=""),this._shadow=p,s.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&g&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(this._icon,"focus",this._panOnFocus,this),De(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&De(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&qe(this._icon,s),this._shadow&&qe(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_v)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _v(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&nn(this._icon,s),this._shadow&&nn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,u=l.iconSize?$(l.iconSize):$(0,0),d=l.iconAnchor?$(l.iconAnchor):$(0,0);s.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function BC(s,l){return new bl(s,l)}var wi=gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ul=wi.extend({options:{fill:!0,radius:10},initialize:function(s,l){I(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return wi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,u=this._clickTolerance(),d=[s+u,l+u];this._pxBounds=new J(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function VC(s,l){return new Ul(s,l)}var Sd=Ul.extend({initialize:function(s,l,u){if(typeof l=="number"&&(l=r({},u,{radius:l})),I(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:wi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===vi.distance){var p=Math.PI/180,g=this._mRadius/vi.R/p,w=u.project([l+g,s]),C=u.project([l-g,s]),x=w.add(C).divideBy(2),D=u.unproject(x).lat,F=Math.acos((Math.cos(g*p)-Math.sin(l*p)*Math.sin(D*p))/(Math.cos(l*p)*Math.cos(D*p)))/p;(isNaN(F)||F===0)&&(F=g/Math.cos(Math.PI/180*l)),this._point=x.subtract(u.getPixelOrigin()),this._radius=isNaN(F)?0:x.x-u.project([D,s-F]).x,this._radiusY=x.y-w.y}else{var X=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(X).x}this._updateBounds()}});function jC(s,l,u){return new Sd(s,l,u)}var Gn=wi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){I(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,u=null,d=Po,p,g,w=0,C=this._parts.length;w<C;w++)for(var x=this._parts[w],D=1,F=x.length;D<F;D++){p=x[D-1],g=x[D];var X=d(s,p,g,!0);X<l&&(l=X,u=d(s,p,g))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fv(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Je,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],u=rn(s),d=0,p=s.length;d<p;d++)u?(l[d]=ce(s[d]),this._bounds.extend(l[d])):l[d]=this._convertLatLngs(s[d]);return l},_project:function(){var s=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new N(s,s);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,u){var d=s[0]instanceof ge,p=s.length,g,w;if(d){for(w=[],g=0;g<p;g++)w[g]=this._map.latLngToLayerPoint(s[g]),u.extend(w[g]);l.push(w)}else for(g=0;g<p;g++)this._projectLatlngs(s[g],l,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,d,p,g,w,C,x;for(u=0,p=0,g=this._rings.length;u<g;u++)for(x=this._rings[u],d=0,w=x.length;d<w-1;d++)C=hv(x[d],x[d+1],s,d,!0),C&&(l[p]=l[p]||[],l[p].push(C[0]),(C[1]!==x[d+1]||d===w-2)&&(l[p].push(C[1]),p++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,u=0,d=s.length;u<d;u++)s[u]=lv(s[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var u,d,p,g,w,C,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,g=this._parts.length;u<g;u++)for(C=this._parts[u],d=0,w=C.length,p=w-1;d<w;p=d++)if(!(!l&&d===0)&&uv(s,C[p],C[d])<=x)return!0;return!1}});function HC(s,l){return new Gn(s,l)}Gn._flat=dv;var ns=Gn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mv(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Gn.prototype._convertLatLngs.call(this,s),u=l.length;return u>=2&&l[0]instanceof ge&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(s){Gn.prototype._setLatLngs.call(this,s),rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,u=new N(l,l);if(s=new J(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,p=this._rings.length,g;d<p;d++)g=pv(this._rings[d],s,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,u,d,p,g,w,C,x,D;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,x=this._parts.length;g<x;g++)for(u=this._parts[g],w=0,D=u.length,C=D-1;w<D;C=w++)d=u[w],p=u[C],d.y>s.y!=p.y>s.y&&s.x<(p.x-d.x)*(s.y-d.y)/(p.y-d.y)+d.x&&(l=!l);return l||Gn.prototype._containsPoint.call(this,s,!0)}});function WC(s,l){return new ns(s,l)}var Kn=Zn.extend({initialize:function(s,l){I(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=T(s)?s:s.features,u,d,p;if(l){for(u=0,d=l.length;u<d;u++)p=l[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var g=this.options;if(g.filter&&!g.filter(s))return this;var w=$l(s,g);return w?(w.feature=Bl(s),w.defaultOptions=w.options,this.resetStyle(w),g.onEachFeature&&g.onEachFeature(s,w),this.addLayer(w)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function $l(s,l){var u=s.type==="Feature"?s.geometry:s,d=u?u.coordinates:null,p=[],g=l&&l.pointToLayer,w=l&&l.coordsToLatLng||Id,C,x,D,F;if(!d&&!u)return null;switch(u.type){case"Point":return C=w(d),vv(g,s,C,l);case"MultiPoint":for(D=0,F=d.length;D<F;D++)C=w(d[D]),p.push(vv(g,s,C,l));return new Zn(p);case"LineString":case"MultiLineString":return x=zl(d,u.type==="LineString"?0:1,w),new Gn(x,l);case"Polygon":case"MultiPolygon":return x=zl(d,u.type==="Polygon"?1:2,w),new ns(x,l);case"GeometryCollection":for(D=0,F=u.geometries.length;D<F;D++){var X=$l({geometry:u.geometries[D],type:"Feature",properties:s.properties},l);X&&p.push(X)}return new Zn(p);case"FeatureCollection":for(D=0,F=u.features.length;D<F;D++){var ae=$l(u.features[D],l);ae&&p.push(ae)}return new Zn(p);default:throw new Error("Invalid GeoJSON object.")}}function vv(s,l,u,d){return s?s(l,u):new bl(u,d&&d.markersInheritOptions&&d)}function Id(s){return new ge(s[1],s[0],s[2])}function zl(s,l,u){for(var d=[],p=0,g=s.length,w;p<g;p++)w=l?zl(s[p],l-1,u):(u||Id)(s[p]),d.push(w);return d}function kd(s,l){return s=ce(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Fl(s,l,u,d){for(var p=[],g=0,w=s.length;g<w;g++)p.push(l?Fl(s[g],rn(s[g])?0:l-1,u,d):kd(s[g],d));return!l&&u&&p.push(p[0].slice()),p}function is(s,l){return s.feature?r({},s.feature,{geometry:l}):Bl(l)}function Bl(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Cd={toGeoJSON:function(s){return is(this,{type:"Point",coordinates:kd(this.getLatLng(),s)})}};bl.include(Cd),Sd.include(Cd),Ul.include(Cd),Gn.include({toGeoJSON:function(s){var l=!rn(this._latlngs),u=Fl(this._latlngs,l?1:0,!1,s);return is(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),ns.include({toGeoJSON:function(s){var l=!rn(this._latlngs),u=l&&!rn(this._latlngs[0]),d=Fl(this._latlngs,u?2:l?1:0,!0,s);return l||(d=[d]),is(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),es.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(s).geometry.coordinates)}),is(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var u=l==="GeometryCollection",d=[];return this.eachLayer(function(p){if(p.toGeoJSON){var g=p.toGeoJSON(s);if(u)d.push(g.geometry);else{var w=Bl(g);w.type==="FeatureCollection"?d.push.apply(d,w.features):d.push(w)}}}),u?is(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function yv(s,l){return new Kn(s,l)}var qC=yv,Vl=gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,u){this._url=s,this._bounds=Se(l),I(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){De(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Yr(this._image),this},bringToBack:function(){return this._map&&Jr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Se(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:_e("img");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ur(this._image,u,l)},_reset:function(){var s=this._image,l=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();qe(s,l.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),ZC=function(s,l,u){return new Vl(s,l,u)},wv=Vl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:_e("video");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=a(this.fire,this,"load"),s){for(var u=l.getElementsByTagName("source"),d=[],p=0;p<u.length;p++)d.push(u[p].src);this._url=u.length>0?d:[l.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var w=_e("source");w.src=this._url[g],l.appendChild(w)}}});function GC(s,l,u){return new wv(s,l,u)}var Ev=Vl.extend({_initImage:function(){var s=this._image=this._url;oe(s,"leaflet-image-layer"),this._zoomAnimated&&oe(s,"leaflet-zoom-animated"),this.options.className&&oe(s,this.options.className),s.onselectstart=_,s.onmousemove=_}});function KC(s,l,u){return new Ev(s,l,u)}var Rn=gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof ge||T(s))?(this._latlng=ce(s),I(this,l)):(I(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&nn(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(nn(this._container,0),this._removeTimeout=setTimeout(a(De,void 0,this._container),200)):De(this._container),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yr(this._container),this},bringToBack:function(){return this._map&&Jr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Zn){l=null;var u=this._source._layers;for(var d in u)if(u[d]._map){l=u[d];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=$(this.options.offset),u=this._getAnchor();this._zoomAnimated?qe(this._container,s.add(u)):l=l.add(s).add(u);var d=this._containerBottom=-l.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=d+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});he.include({_initOverlay:function(s,l,u,d){var p=l;return p instanceof s||(p=new s(d).setContent(l)),u&&p.setLatLng(u),p}}),gn.include({_initOverlay:function(s,l,u,d){var p=u;return p instanceof s?(I(p,d),p._source=this):(p=l&&!d?l:new s(d,this),p.setContent(u)),p}});var jl=Rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Rn.prototype.openOn.call(this,s)},onAdd:function(s){Rn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof wi||this._source.on("preclick",hr))},onRemove:function(s){Rn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof wi||this._source.off("preclick",hr))},getEvents:function(){var s=Rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=_e("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=_e("div",s+"-content-wrapper",l);if(this._contentNode=_e("div",s+"-content",u),Co(l),gd(this._contentNode),ie(l,"contextmenu",hr),this._tipContainer=_e("div",s+"-tip-container",l),this._tip=_e("div",s+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=_e("a",s+"-close-button",l);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',ie(d,"click",function(p){ut(p),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var d=s.offsetHeight,p=this.options.maxHeight,g="leaflet-popup-scrolled";p&&d>p?(l.height=p+"px",oe(s,g)):Ve(s,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();qe(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(To(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,d=this._containerWidth,p=new N(this._containerLeft,-u-this._containerBottom);p._add(cr(this._container));var g=s.layerPointToContainerPoint(p),w=$(this.options.autoPanPadding),C=$(this.options.autoPanPaddingTopLeft||w),x=$(this.options.autoPanPaddingBottomRight||w),D=s.getSize(),F=0,X=0;g.x+d+x.x>D.x&&(F=g.x+d-D.x+x.x),g.x-F-C.x<0&&(F=g.x-C.x),g.y+u+x.y>D.y&&(X=g.y+u-D.y+x.y),g.y-X-C.y<0&&(X=g.y-C.y),(F||X)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([F,X]))}},_getAnchor:function(){return $(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),QC=function(s,l){return new jl(s,l)};he.mergeOptions({closePopupOnClick:!0}),he.include({openPopup:function(s,l,u){return this._initOverlay(jl,s,l,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),gn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(jl,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Zn||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){dr(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof wi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Hl=Rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Rn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Rn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Rn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=_e("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,u,d=this._map,p=this._container,g=d.latLngToContainerPoint(d.getCenter()),w=d.layerPointToContainerPoint(s),C=this.options.direction,x=p.offsetWidth,D=p.offsetHeight,F=$(this.options.offset),X=this._getAnchor();C==="top"?(l=x/2,u=D):C==="bottom"?(l=x/2,u=0):C==="center"?(l=x/2,u=D/2):C==="right"?(l=0,u=D/2):C==="left"?(l=x,u=D/2):w.x<g.x?(C="right",l=0,u=D/2):(C="left",l=x+(F.x+X.x)*2,u=D/2),s=s.subtract($(l,u,!0)).add(F).add(X),Ve(p,"leaflet-tooltip-right"),Ve(p,"leaflet-tooltip-left"),Ve(p,"leaflet-tooltip-top"),Ve(p,"leaflet-tooltip-bottom"),oe(p,"leaflet-tooltip-"+C),qe(p,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&nn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return $(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),XC=function(s,l){return new Hl(s,l)};he.include({openTooltip:function(s,l,u){return this._initOverlay(Hl,s,l,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),gn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hl,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Zn||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=s.getElement();l&&(ie(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ie(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0))},_moveTooltip:function(s){var l=s.latlng,u,d;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),d=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(l)}});var Tv=ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Rl(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=$(u.bgPos);l.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function YC(s){return new Tv(s)}ts.Default=Lo;var Ro=gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:G.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),De(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Jr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof N?s:new N(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,u=-s(-1/0,1/0),d=0,p=l.length,g;d<p;d++)g=l[d].style.zIndex,l[d]!==this._container&&g&&(u=s(u,+g));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!G.ielt9){nn(this._container,this.options.opacity);var s=+new Date,l=!1,u=!1;for(var d in this._tiles){var p=this._tiles[d];if(!(!p.current||!p.loaded)){var g=Math.min(1,(s-p.loaded)/200);nn(p.el,g),g<1?l=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(nt(this._fadeFrame),this._fadeFrame=Te(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=_e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=l-Math.abs(s-u),this._onUpdateLevel(u)):(De(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[s],p=this._map;return d||(d=this._levels[s]={},d.el=_e("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=l,d.origin=p.project(p.unproject(p.getPixelOrigin()),s).round(),d.zoom=s,this._setZoomTransform(d,p.getCenter(),p.getZoom()),_(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var s,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var d=l.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)De(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,u,d){var p=Math.floor(s/2),g=Math.floor(l/2),w=u-1,C=new N(+p,+g);C.z=+w;var x=this._tileCoordsToKey(C),D=this._tiles[x];return D&&D.active?(D.retain=!0,!0):(D&&D.loaded&&(D.retain=!0),w>d?this._retainParent(p,g,w,d):!1)},_retainChildren:function(s,l,u,d){for(var p=2*s;p<2*s+2;p++)for(var g=2*l;g<2*l+2;g++){var w=new N(p,g);w.z=u+1;var C=this._tileCoordsToKey(w),x=this._tiles[C];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);u+1<d&&this._retainChildren(p,g,u+1,d)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,u,d){var p=Math.round(l);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var g=this.options.updateWhenZooming&&p!==this._tileZoom;(!d||g)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,l)},_setZoomTransform:function(s,l,u){var d=this._map.getZoomScale(u,s.zoom),p=s.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(l,u)).round();G.any3d?ur(s.el,p,d):qe(s.el,p)},_resetGrid:function(){var s=this._map,l=s.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],d).x/u.x),Math.ceil(s.project([0,l.wrapLng[1]],d).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],d).y/u.x),Math.ceil(s.project([l.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),d=l.getZoomScale(u,this._tileZoom),p=l.project(s,this._tileZoom).floor(),g=l.getSize().divideBy(d*2);return new J(p.subtract(g),p.add(g))},_update:function(s){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(s),p=this._pxBoundsToTileRange(d),g=p.getCenter(),w=[],C=this.options.keepBuffer,x=new J(p.getBottomLeft().subtract([C,-C]),p.getTopRight().add([C,-C]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var D in this._tiles){var F=this._tiles[D].coords;(F.z!==this._tileZoom||!x.contains(new N(F.x,F.y)))&&(this._tiles[D].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var X=p.min.y;X<=p.max.y;X++)for(var ae=p.min.x;ae<=p.max.x;ae++){var sn=new N(ae,X);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var pr=this._tiles[this._tileCoordsToKey(sn)];pr?pr.current=!0:w.push(sn)}}if(w.sort(function(Ei,xd){return Ei.distanceTo(g)-xd.distanceTo(g)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ql=document.createDocumentFragment();for(ae=0;ae<w.length;ae++)this._addTile(w[ae],ql);this._level.el.appendChild(ql)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!l.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(s);return Se(this.options.bounds).overlaps(d)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,u=this.getTileSize(),d=s.scaleBy(u),p=d.add(u),g=l.unproject(d,s.z),w=l.unproject(p,s.z);return[g,w]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),u=new Je(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),u=new N(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(s){var l=this._tiles[s];l&&(De(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){oe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=_,s.onmousemove=_,G.ielt9&&this.options.opacity<1&&nn(s,this.options.opacity)},_addTile:function(s,l){var u=this._getTilePos(s),d=this._tileCoordsToKey(s),p=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(p),this.createTile.length<2&&Te(a(this._tileReady,this,s,null,p)),qe(p,u),this._tiles[d]={el:p,coords:s,current:!0},l.appendChild(p),this.fire("tileloadstart",{tile:p,coords:s})},_tileReady:function(s,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:s});var d=this._tileCoordsToKey(s);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(nn(u.el,0),nt(this._fadeFrame),this._fadeFrame=Te(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(oe(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),G.ielt9||!this._map._fadeAnimated?Te(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new N(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new J(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function JC(s){return new Ro(s)}var rs=Ro.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=I(this,l),l.detectRetina&&G.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var u=document.createElement("img");return ie(u,"load",a(this._tileOnLoad,this,l,u)),ie(u,"error",a(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var l={r:G.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=u),l["-y"]=u}return y(this._url,r(l,this.options))},_tileOnLoad:function(s,l){G.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,u){var d=this.options.errorTileUrl;d&&l.getAttribute("src")!==d&&(l.src=d),s(u,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(s=l-s),s+d},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=_,l.onerror=_,!l.complete)){l.src=U;var u=this._tiles[s].coords;De(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",U),Ro.prototype._removeTile.call(this,s)},_tileReady:function(s,l,u){if(!(!this._map||u&&u.getAttribute("src")===U))return Ro.prototype._tileReady.call(this,s,l,u)}});function Sv(s,l){return new rs(s,l)}var Iv=rs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var u=r({},this.defaultWmsParams);for(var d in l)d in this.options||(u[d]=l[d]);l=I(this,l);var p=l.detectRetina&&G.retina?2:1,g=this.getTileSize();u.width=g.x*p,u.height=g.y*p,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,rs.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),u=this._crs,d=pe(u.project(l[0]),u.project(l[1])),p=d.min,g=d.max,w=(this._wmsVersion>=1.3&&this._crs===gv?[p.y,p.x,g.y,g.x]:[p.x,p.y,g.x,g.y]).join(","),C=rs.prototype.getTileUrl.call(this,s);return C+R(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function ex(s,l){return new Iv(s,l)}rs.WMS=Iv,Sv.wms=ex;var Qn=gn.extend({options:{padding:.1},initialize:function(s){I(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var u=this._map.getZoomScale(l,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,l),g=d.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(s,l));G.any3d?ur(this._container,g,u):qe(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new J(u,u.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),kv=Qn.extend({options:{tolerance:0},getEvents:function(){var s=Qn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ie(s,"mousemove",this._onMouseMove,this),ie(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ie(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){nt(this._redrawRequest),delete this._ctx,De(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var s=this._bounds,l=this._container,u=s.getSize(),d=G.retina?2:1;qe(l,s.min),l.width=d*u.x,l.height=d*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",G.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,u=l.next,d=l.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),u=[],d,p;for(p=0;p<l.length;p++){if(d=Number(l[p]),isNaN(d))return;u.push(d)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||Te(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)s=d.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var u,d,p,g,w=s._parts,C=w.length,x=this._ctx;if(C){for(x.beginPath(),u=0;u<C;u++){for(d=0,p=w[u].length;d<p;d++)g=w[u][d],x[d?"lineTo":"moveTo"](g.x,g.y);l&&x.closePath()}this._fillStroke(x,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,u=this._ctx,d=Math.max(Math.round(s._radius),1),p=(Math.max(Math.round(s._radiusY),1)||d)/d;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(l.x,l.y/p,d,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,l){var u=l.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(l)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(s),d&&(oe(this._container,"leaflet-interactive"),this._fireEvent([d],s,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,u){this._map._fireDOMEvent(l,u||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var u=l.next,d=l.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var u=l.next,d=l.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Cv(s){return G.canvas?new kv(s):null}var Ao=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),tx={_initContainer:function(){this._container=_e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ao("shape");oe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ao("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;De(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,u=s._fill,d=s.options,p=s._container;p.stroked=!!d.stroke,p.filled=!!d.fill,d.stroke?(l||(l=s._stroke=Ao("stroke")),p.appendChild(l),l.weight=d.weight+"px",l.color=d.color,l.opacity=d.opacity,d.dashArray?l.dashStyle=T(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=d.lineCap.replace("butt","flat"),l.joinstyle=d.lineJoin):l&&(p.removeChild(l),s._stroke=null),d.fill?(u||(u=s._fill=Ao("fill")),p.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(p.removeChild(u),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),u=Math.round(s._radius),d=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Yr(s._container)},_bringToBack:function(s){Jr(s._container)}},Wl=G.vml?Ao:R_,No=Qn.extend({_initContainer:function(){this._container=Wl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){De(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var s=this._bounds,l=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),qe(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Wl("path");s.options.className&&oe(l,s.options.className),s.options.interactive&&oe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){De(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,u=s.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,A_(s._parts,l))},_updateCircle:function(s){var l=s._point,u=Math.max(Math.round(s._radius),1),d=Math.max(Math.round(s._radiusY),1)||u,p="a"+u+","+d+" 0 1,0 ",g=s._empty()?"M0 0":"M"+(l.x-u)+","+l.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(s,g)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Yr(s._path)},_bringToBack:function(s){Jr(s._path)}});G.vml&&No.include(tx);function xv(s){return G.svg||G.vml?new No(s):null}he.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Cv(s)||xv(s)}});var Pv=ns.extend({initialize:function(s,l){ns.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Se(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function nx(s,l){return new Pv(s,l)}No.create=Wl,No.pointsToPath=A_,Kn.geometryToLayer=$l,Kn.coordsToLatLng=Id,Kn.coordsToLatLngs=zl,Kn.latLngToCoords=kd,Kn.latLngsToCoords=Fl,Kn.getFeature=is,Kn.asFeature=Bl,he.mergeOptions({boxZoom:!0});var Lv=Ln.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){De(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),So(),ld(),this._startPoint=this._map.mouseEventToContainerPoint(s),ie(document,{contextmenu:dr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=_e("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new J(this._point,this._startPoint),u=l.getSize();qe(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(De(this._box),Ve(this._container,"leaflet-crosshair")),Io(),ud(),Ie(document,{contextmenu:dr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});he.addInitHook("addHandler","boxZoom",Lv),he.mergeOptions({doubleClickZoom:!0});var Rv=Ln.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,u=l.getZoom(),d=l.options.zoomDelta,p=s.originalEvent.shiftKey?u-d:u+d;l.options.doubleClickZoom==="center"?l.setZoom(p):l.setZoomAround(s.containerPoint,p)}});he.addInitHook("addHandler","doubleClickZoom",Rv),he.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Av=Ln.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new yi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ve(this._map._container,"leaflet-grab"),Ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Se(this._map.options.maxBounds);this._offsetLimit=pe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,p=(d-l+u)%s+l-u,g=(d+l+u)%s-l-u,w=Math.abs(p+u)<Math.abs(g+u)?p:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(s){var l=this._map,u=l.options,d=!u.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),d)l.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,w=u.easeLinearity,C=p.multiplyBy(w/g),x=C.distanceTo([0,0]),D=Math.min(u.inertiaMaxSpeed,x),F=C.multiplyBy(D/x),X=D/(u.inertiaDeceleration*w),ae=F.multiplyBy(-X/2).round();!ae.x&&!ae.y?l.fire("moveend"):(ae=l._limitOffset(ae,l.options.maxBounds),Te(function(){l.panBy(ae,{duration:X,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});he.addInitHook("addHandler","dragging",Av),he.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Nv=Ln.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ie(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,u=s.scrollTop||l.scrollTop,d=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},u=this.keyCodes,d,p;for(d=0,p=u.left.length;d<p;d++)l[u.left[d]]=[-1*s,0];for(d=0,p=u.right.length;d<p;d++)l[u.right[d]]=[s,0];for(d=0,p=u.down.length;d<p;d++)l[u.down[d]]=[0,s];for(d=0,p=u.up.length;d<p;d++)l[u.up[d]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},u=this.keyCodes,d,p;for(d=0,p=u.zoomIn.length;d<p;d++)l[u.zoomIn[d]]=s;for(d=0,p=u.zoomOut.length;d<p;d++)l[u.zoomOut[d]]=-s},_addHooks:function(){ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,u=this._map,d;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[l],s.shiftKey&&(d=$(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset($(d),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(p)}else u.panBy(d)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;dr(s)}}});he.addInitHook("addHandler","keyboard",Nv),he.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ov=Ln.extend({addHooks:function(){ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=iv(s),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),d),dr(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,g=u?Math.ceil(p/u)*u:p,w=s._limitZoom(l+(this._delta>0?g:-g))-l;this._delta=0,this._startTime=null,w&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+w):s.setZoomAround(this._lastMousePos,l+w))}});he.addInitHook("addHandler","scrollWheelZoom",Ov);var ix=600;he.mergeOptions({tapHold:G.touchNative&&G.safari&&G.mobile,tapTolerance:15});var Dv=Ln.extend({addHooks:function(){ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new N(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ie(document,"touchend",ut),ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ix),ie(document,"touchend touchcancel contextmenu",this._cancel,this),ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ie(document,"touchend",ut),Ie(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new N(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});he.addInitHook("addHandler","tapHold",Dv),he.mergeOptions({touchZoom:G.touch,bounceAtZoomLimits:!0});var Mv=Ln.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(s.touches[0]),d=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ie(document,"touchmove",this._onTouchMove,this),ie(document,"touchend touchcancel",this._onTouchEnd,this),ut(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(s.touches[0]),d=l.mouseEventToContainerPoint(s.touches[1]),p=u.distanceTo(d)/this._startDist;if(this._zoom=l.getScaleZoom(p,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&p<1||this._zoom>l.getMaxZoom()&&p>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var g=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(p===1&&g.x===0&&g.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),nt(this._animRequest);var w=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Te(w,this,!0),ut(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,nt(this._animRequest),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});he.addInitHook("addHandler","touchZoom",Mv),he.BoxZoom=Lv,he.DoubleClickZoom=Rv,he.Drag=Av,he.Keyboard=Nv,he.ScrollWheelZoom=Ov,he.TapHold=Dv,he.TouchZoom=Mv,n.Bounds=J,n.Browser=G,n.CRS=Ut,n.Canvas=kv,n.Circle=Sd,n.CircleMarker=Ul,n.Class=tn,n.Control=mn,n.DivIcon=Tv,n.DivOverlay=Rn,n.DomEvent=EC,n.DomUtil=yC,n.Draggable=yi,n.Evented=qn,n.FeatureGroup=Zn,n.GeoJSON=Kn,n.GridLayer=Ro,n.Handler=Ln,n.Icon=ts,n.ImageOverlay=Vl,n.LatLng=ge,n.LatLngBounds=Je,n.Layer=gn,n.LayerGroup=es,n.LineUtil=OC,n.Map=he,n.Marker=bl,n.Mixin=PC,n.Path=wi,n.Point=N,n.PolyUtil=DC,n.Polygon=ns,n.Polyline=Gn,n.Popup=jl,n.PosAnimation=rv,n.Projection=MC,n.Rectangle=Pv,n.Renderer=Qn,n.SVG=No,n.SVGOverlay=Ev,n.TileLayer=rs,n.Tooltip=Hl,n.Transformation=Qh,n.Util=lr,n.VideoOverlay=wv,n.bind=a,n.bounds=pe,n.canvas=Cv,n.circle=jC,n.circleMarker=VC,n.control=xo,n.divIcon=YC,n.extend=r,n.featureGroup=zC,n.geoJSON=yv,n.geoJson=qC,n.gridLayer=JC,n.icon=FC,n.imageOverlay=ZC,n.latLng=ce,n.latLngBounds=Se,n.layerGroup=$C,n.map=TC,n.marker=BC,n.point=$,n.polygon=WC,n.polyline=HC,n.popup=QC,n.rectangle=nx,n.setOptions=I,n.stamp=h,n.svg=xv,n.svgOverlay=KC,n.tileLayer=Sv,n.tooltip=XC,n.transformation=yo,n.version=i,n.videoOverlay=GC;var rx=window.L;n.noConflict=function(){return window.L=rx,this},window.L=n})})(lm,lm.exports);var P_=lm.exports;function Fk(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Bk(t,e){return e==null?function(i,r){const o=A.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=A.useRef();o.current||(o.current=t(i,r));const a=A.useRef(i),{instance:c}=o.current;return A.useEffect(function(){a.current!==i&&(e(c,i,a.current),a.current=i)},[c,i,r]),o}}function sz(t,e){A.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Vk(t){return function(n){const i=tz(),r=t(zk(n,i),i);return X$(i.map,n.attribution),rz(r.current,n.eventHandlers),sz(r.current,i),r}}function oz(t,e){const n=Bk(t,e),i=Vk(n);return nz(i)}function az(t,e){const n=Bk(t,e),i=Vk(n);return iz(i)}function lz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function um(){return um=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},um.apply(this,arguments)}function uz({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:c,whenReady:h,zoom:f,...m},_){const[v]=A.useState({className:r,id:o,style:c}),[S,k]=A.useState(null);A.useImperativeHandle(_,()=>(S==null?void 0:S.map)??null,[S]);const I=A.useCallback(E=>{if(E!==null&&S===null){const y=new P_.Map(E,m);n!=null&&f!=null?y.setView(n,f):t!=null&&y.fitBounds(t,e),h!=null&&y.whenReady(h),k(J$(y))}},[]);A.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const R=S?Hu.createElement($k,{value:S},i):a??null;return Hu.createElement("div",um({},v,{ref:I}),R)}const cz=A.forwardRef(uz),hz=oz(function({position:e,...n},i){const r=new P_.Marker(e,n);return Fk(r,ez(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),dz=az(function({url:e,...n},i){const r=new P_.TileLayer(e,zk(n,i));return Fk(r,i)},function(e,n,i){lz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});function fz(){var m;const[t,e]=A.useState(""),[n,i]=A.useState(!1),[r,o]=A.useState(null),{currentUser:a}=A.useContext(ar),c=(m=A.useContext(vo))==null?void 0:m.data;return He("div",{className:"input",children:[W("input",{type:"text",placeholder:"Say hello!",value:t,onChange:_=>e(_.target.value)}),W("img",{src:H$,alt:"pin icon",onClick:()=>{i(!n)}}),W("button",{onClick:async()=>{if(n&&r){const _={id:O0(),senderId:a.uid,date:We.now(),location:r};await ks(cn(tm(qt,"chats"),c&&c.chatId),{messages:I0(_)})}else await ks(cn(tm(qt,"chats"),c&&c.chatId),{messages:I0({id:O0(),text:t,senderId:a.uid,date:We.now()})});await ks(cn(qt,"userChats",a.uid),{[(c==null?void 0:c.chatId)+".lastMsg"]:{text:t},[(c==null?void 0:c.chatId)+".date"]:Vc()}),await ks(cn(qt,"userChats",c==null?void 0:c.user.uid),{[(c==null?void 0:c.chatId)+".lastMsg"]:{text:t},[(c==null?void 0:c.chatId)+".date"]:Vc()}),e(""),i(!1),o(null)},children:"Send"})]})}const pz=({message:t})=>{var i;const{currentUser:e}=A.useContext(ar),n=(i=A.useContext(vo))==null?void 0:i.data;return He("div",{className:"message",children:[W("div",{className:"messageinfo",children:W("img",{src:t.senderId===e.uid?e.photoURL:n==null?void 0:n.user.photoURL})}),He("div",{className:"messagecontent",children:[t.text&&W("p",{children:t.text}),t.location&&W("div",{style:{height:"200px",width:"100%"},children:He(cz,{center:[t.location.lat,t.location.lng],zoom:13,style:{height:"100%",width:"100%"},children:[W(dz,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),W(hz,{position:[t.location.lat,t.location.lng]})]})})]})]})};function mz(){var i;const[t,e]=A.useState([]),n=(i=A.useContext(vo))==null?void 0:i.data;return A.useEffect(()=>{if(n!=null){const r=Ik(cn(qt,"chats",n.chatId),o=>{o.exists()&&e(o.data().messages)});return()=>{r()}}},[n==null?void 0:n.chatId]),W("div",{className:"messages",children:t.map(r=>W(pz,{message:r},r.id))})}function gz(){var e;const t=(e=A.useContext(vo))==null?void 0:e.data;return He("div",{className:"chat",children:[W("div",{className:"chatinfo",children:He("span",{children:[" ",t&&t.user.displayName?t.user.displayName:""," "]})}),W(mz,{}),W(fz,{})]})}function _z(){const{currentUser:t}=A.useContext(ar);return He("div",{className:"navbar",children:[He("div",{className:"userdisplay",children:[W("img",{src:t.photoURL,alt:""}),He("h1",{children:[" ",t.displayName," "]})]}),W("div",{className:"userdisplay",children:W("button",{className:"navbutton",onClick:()=>cN(Wh),children:" log out "})})]})}function vz(){var o,a;const[t,e]=A.useState([]),{currentUser:n}=A.useContext(ar),i=(o=A.useContext(vo))==null?void 0:o.dispatch;A.useEffect(()=>{const c=()=>{const h=Ik(cn(qt,"userChats",n.uid),f=>{e(f.data())});return()=>{h()}};console.log(t),n.uid&&c()},[n.uid]);const r=c=>{i!=null&&i({type:"CHANGE_USER",payload:c})};return W("div",{className:"friends",children:(a=Object.entries(t))==null?void 0:a.map(c=>He("div",{className:"friendchat",onClick:()=>{r(c[1].userInfo)},children:[W("img",{src:c[1].userInfo.photoURL,alt:"User profile picture"}),W("span",{children:c[1].userInfo.displayName})]},c[0]))})}function yz(){const[t,e]=A.useState(""),[n,i]=A.useState(null),[r,o]=A.useState(!1),{currentUser:a}=A.useContext(ar),c=async()=>{const m=MU(tm(qt,"users"),bU("displayName","==",t));try{(await VU(m)).forEach(v=>{i(v.data())})}catch{o(!0)}};return He("div",{className:"search",children:[W("div",{className:"searchform",children:W("input",{type:"text",placeholder:"Find a user",onKeyDown:m=>{m.code==="Enter"&&c()},onChange:m=>e(m.target.value),value:t})}),r&&W("span",{children:"User not found!"}),n&&He("div",{className:"userchat",onClick:async()=>{const m=a.uid>n.uid?a.uid+n.uid:n.uid+a.uid;try{(await BU(cn(qt,"chats",m))).exists()||(await im(cn(qt,"chats",m),{messages:[]}),await ks(cn(qt,"userChats",a.uid),{[`${m}.userInfo`]:{uid:n.uid,displayName:n.displayName,photoURL:n.photoURL},[`${m}.date`]:Vc()}),await ks(cn(qt,"userChats",n.uid),{[`${m}.userInfo`]:{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL},[`${m}.date`]:Vc()}))}catch{}i(null),e("")},children:[W("img",{src:n.photoURL,alt:""}),W("div",{className:"userchatinfo",children:W("span",{children:n.displayName})})]})]})}function wz(){return He("div",{className:"sidebar",children:[W(_z,{}),W(yz,{}),W(vz,{})]})}function Ez(){return W("div",{className:"home",children:He("div",{className:"container",children:[W(wz,{}),W(gz,{})]})})}function D0(){const[t,e]=A.useState(!1),n=x_();return W("div",{className:"formContainer",children:He("div",{className:"formWrapper",children:[W("img",{src:KE,alt:"GeoChat logo"}),W("span",{className:"title",children:" Login "}),He("form",{onSubmit:async r=>{r.preventDefault();const o=r.target[0].value,a=r.target[1].value;try{rN(Wh,o,a),n("/")}catch{e(!0)}},children:[W("input",{type:"email",placeholder:"email"}),W("input",{type:"password",placeholder:"password"}),W("button",{children:" Login "}),t&&W("span",{children:" Oops! Something went wrong "})]}),He("p",{children:[" Don't have an account? ",W(bk,{to:"/register",children:" Sign Up "})," "]})]})})}function Tz(){const{currentUser:t}=A.useContext(ar);return console.log(t),W(z$,{children:W(D$,{children:He(ta,{path:"/",children:[W(ta,{index:!0,element:t?W(Ez,{}):W(D0,{})}),W(ta,{path:"login",element:W(D0,{})}),W(ta,{path:"register",element:W(j$,{})})]})})})}Pf.createRoot(document.getElementById("root")).render(W(W$,{children:W(q$,{children:W(Hu.StrictMode,{children:W(Tz,{})})})}));
